!/bin/sh
###############
## Linux+2.sh
###############


ACPI (Advanced Configuration Power Interface)
OSPM (Operating System-directed configuration and Power Management) 
ACPI source language (ASL)
Extended BIOS Data Area (EBDA)
CMCI(Corrected Machine Check Interrupt)
Interrupt Stack Table (IST)
Task State Segment (TSS)
non-maskable interrupts (NMI)




XML Access control markup language {XACML}




Unified Extensible Firmware Interface (UEFI)
Power-On Self Test (POST)
Basic I/O System (BIOS)
GRand Unified Bootloader (GRUB)
Logical Volume Management (LVM)
electromagnetic pulse (EMP)
USB Chip Card Interface Device (CCID)
X Display Manager Control Protocol (XDMCP)
Input/Output (I/O)
Extensible Firmware Interface (EFI)
EFI System Partition (ESP)
Unified Extensible Firmware Interface (UEFI)
Basic Input/Output System (BIOS)
read only memory (ROM)
Master Boot Record (MBR)
GUID Partition Table (GPT)
compatibility segment (CSEG) fixed to addresses 0xA0000 - 0xBFFFF
below 1MB or top segment (TSEG)

FPU (Floating-point unit on-chip)
VME (Virtual mode extension)
DE (Debugging extension)
PSE (Page size extension)
TSC (Time stamp counter)
MSR (Model specific registers)
PAE (Physical address extension)
MCE (Machine check exception)
CX8 (CMPXCHG8 instruction supported)
APIC (On-chip APIC hardware supported)
SEP (Fast system call)
MTRR (Memory type range registers)
PGE (Page global enable)
MCA (Machine check architecture)
CMOV (Conditional move instruction supported)
PAT (Page attribute table)
PSE-36 (36-bit page size extension)
CLFSH (CLFLUSH instruction supported)
DS (Debug store)
ACPI (ACPI supported)
MMX (MMX technology supported)
FXSR (FXSAVE and FXSTOR instructions supported)
SSE (Streaming SIMD extensions)
SSE2 (Streaming SIMD extensions 2)
SS (Self-snoop)
HTT (Multi-threading)
TM (Thermal monitor supported)
PBE (Pending break enabled)



BSD (Berkeley Software Distribution)
BIND (Berkeley Internet Name Domain)
Common Public License (CPL)
Industry Standard Architecture (ISA)
Open Source Initiative (OSI)
International Standards Organization (ISO)
Internet Engineering Task Force (IETF)
Security Association Database (SAD) 
Security Policy Database (SPD)

Stack-Smashing Protector (SSP)

Peripheral Component Interconnect (PCI) 
Network Cards (NICs)
Embedded Controller  (EC)
Inter-Integrated Circuit (I2C)
System Management Bus (SMBus)
System Management RAM (SMRAM)
Memory Management Unit (MMU)
Translation Lookaside Buffer (TLB)
Configuration Registers (PCRs)
eXtended InterNET Daemon (Xinetd)
Remote Function Call Interrupt (CAL)
Rescheduling Interrupt (RES)
Tlb Flush Interrupt (TLB)
Local Timer Interrupt (LOC)
Nonmaskable Interrupt (NMI)
Interrupt Descriptor Table (IDT)
Interrupt Descriptor Table Register Cache (IDTRC)
I/O Request Packet (IRP)
Interrupt ReQuest (IRQ)
Interrupt Request Register (IRR)



SECCOMP-BPF (SECure COMPuting)

Extended BIOS Data Area (EBDA)
Advanced Configuration Power Interface (ACPI)
AGP (Accelerated Graphics Port)
CLK	Common clock infrastructure
CMA	Contiguous Memory Area
DRM	Direct Rendering Management
BIOS Enhanced Disk Drive Services (EDD
EVM	Extended Verification Module


Procedure Linkage Table (PLT)
Runtime Link Editor (RTLD)
Executable And Linkable Format (ELF)
Global Offset Table (GOT) 
Return Address (RET)
Saved Frame Pointer (SFP)
Platform Configuration Registers (PCRs)
Global Descriptor Table (GDT)
Page Directory Entry (PDE)
Root System Description Table (RSDT)
Input/Output Controls (IOCTLs)



Advanced Configuration and Power Interface (ACPI) 
Advanced Power Management (APM)
Peripheral Component Interconnect (PCI)
Executable and Linkable Format (ELF)
CMA	Contiguous Memory Area

Integrated Drive Electronics (IDE)
Small Computer Systems Interface (SCSI)
Universal Disk Format (UDF)
Parallel ATA (PATA)
New Technology File System (NTFS)
File Allocation Table (FAT) 

Hardware-Assisted Virtualization Technology (Intel-Vt | Amd-V)
Power-Over-Ethernet (Poe)
Direct Memory Addressing (DMA)
Extents File System (XFS)				# XFS was developed by Silicon Graphics (SGI)
Hierarchical File System (HFS)
Radio Frequency Communication (RFCOMM)
Hardware Abstraction Layer (HAL)
Host Controller Interface Daemon (hcid)
Host Controller Interface (HCI)
Linux Socket Filtering (LSF




Direct Sequence Spread Spectrum (DSSS)
Orthogonal Frequency Division Multiplexing (OFDM)
Private Branch eXchange (PBX) lines

Cipher Block Chaining (CBC)
Public Key Infrastructure (PKI)
Role-Based Access Control (RBAC)
Pluggable Authentication Modules (PAM)
one-time-passwords (OTP)
Network Intrusion Detection Systems (NIDS)
Access Control Lists (ACLs)
One-time Passwords In Everything (OPIE)
Stack-Smashing Protector (SSP).
W^X (W XOR X)
Virtual Private Network (VPN)
Virtual Network Computing (VNC)
Software-Defined Networking (SDN)
CCID (Chip Card Interface Description)
PC/SC (Personal computer/Smart Card)

Amazon Web Services (AWS) 
Virtual Private Clouds (VPC) 

Radio Frequency Identification (RFID)
Carrier Sense Multiple Access With Collision Avoidance (CSMA/CA)
Collision Detection (CD)
Acknowledgment (Ack)
Request-To-Send (RTS)
Clear-To-Send (CTS)
Network Allocation Vector (NAV)
Frame Control Header (FCH)
Discretionary Access Control (DAC)
Destination Address (DA)
Receiver Address (RA)
Transmitter Address (TA)
Round Trip Time (RTT)
Time To Live (TTL)
Carriage Returns (CRs)
Line Feeds (LFs)
RF Monitoring (RFMON)
Wired Equivalent Privacy (WEP)
WiFi Protected Access (WPA)
Local-Area Network (LAN) 	
wide-area network connections (WAN)
Initialization vectors (IVs)
Endorsement Key (EK)
Data Encryption Standard (DES)
Temporal Key Integrity Protocol (TKIP)
Extensible Authentication Protocol (EAP)
Counter-mode CBC-MAC Protocol (CCMP)
Pairwise Master Key (PMK)
Pairwise Transient Key (PTK)
Password-Based Key Derivation Function v2.0 (PBKDF2)
Re-Shared Key (PSK)
Wireless Local Area Network (WLAN)
Medium Access Control (MAC)
Initial Sequence Number (ISN)

Network Time Protocol (NTP)
Network User Address (NUA)
Network User Identifier (NUI)
certificate signing request (CSR) or an X.509 certificate
Decibels (dB)

Carrier Sense Multiple Access with Collision Avoidance (CSMA/CA)
Collision Detection (CD) mechanism
Clear-To-Send (CTS)
Request-To-Send (RTS)
Signal Set Identifier (SSID)
Basic Service Set IDentifier (BSSID)
Frame Control Header (FCH),
Basic Service Set IDentifier (BSSID)
ToDS
FromDS
Destination Address (DA)
Source Address (SA)
Receiver Address (RA)
Transmitter Address (TA) 
Transport Layer Security (TLS)
Quality of Service (QoS)
Multiprotocol Label Switching (MPLS)

IP Security (IPsec)
Wireless Network Interface Cards (WNICs)
Frequency Selective Surface (FSS)
Logical Link Control and Adaptation Protocol (L2CAP)
Dynamic Host Configuration Protocol (DHCP)
Fully-Qualified Domain Name (FQDN)
Classless Inter-Domain Routing (CIDR)
cross-site request forgery (CSRF)	
Universal Cross-Site Scripting (UXSS)
Universal Modeling Language (UML)
Asynchronous JavaScript and XML (AJAX)
Simple Object Access Protocol (SOAP)
Security Authorization Markup Language (SAML)
XML Access Control Markup Language (XACML)
Really Simple Syndication (RSS)
Dynamic ARP Inspection (DAI)
Application Programming Interface (API) 
Wireless Intrusion Detection Systems (WIDS)



Mail Delivery Agents (MDAs)
Mail Transfer Agents (MTAs)
Mail User Agents (MUAs)
Mail Delivery Agents (MDAs)
Multipurpose Internet Mail Extensions (MIME)
Mail Submission Agent (MSA)

Forward Secure Sealing (FSS) 
Seekable Sequential Key Generators

American Standard Code for Information Interchange (ASCII)
8-bit Unicode Transformation Format (UTF-8)


Common Unix Printing System (CUPS)


Adobe PostScript Printer Description (PPD)
BSD Line Printer Daemon (LPD)
Printer Control Language (PCL)
Dots Per Inch (DPI)
Internet Printing Protocol (IPP)
Local Subnets (@LOCAL)
CUPS Driver Development Kit (DDK)


http://localhost:631

Internet Message Access Protocol (IMAP3)
LDAP (Lightweight Directory Access Protocol)
Post Office Protocol 2 (POP2)
Simple Network Management Protocol (SNMP)
Network Time Protocol (NTP)
NAV (Network Allocation Vector)
NAT (Network Address Translation)
Delegation Signature (DS) 
Document Object Model (DOM)


Real-time Transport Protocol (RTP)
Service Discovery Protocol (SDP)
Bluetooth Network Encapsulation Protocol (BNEP)
Bluetooth Network Encapsulation Protocol (BNEP)
Common Address Resolution Protocol (CARP)
Hot Standby Router Protocol (HSRP)
Virtual Router Redundancy Protocol (VRRP)

ISDN Basic Rate Interface (BRI)
Integrated Services Digital Network (ISDN)
Network Information System (NIS)
Lightweight Directory Access Protocol (LDAP)
Active Directory (AD)
Session Description Protocol (SDP)


Core Root of Trust for Measurement (CRTM)


802.11 (WiFi)
802.15 (Bluetooth)
802.16 (WiMax)



GNOME On-Screen Keyboard (GOK)
Coordinated Universal Time (UTC)
Greenwich Mean Time (GMT)


SMA connectors
## ======================================== ##
       list of VoIP transport protocols
## _______________________________________ ##
Real-time Transport Protocol (RTP)
RTP Control Protocol (RTCP)
Secure RTP (SRTP)
Secure RTCP (SRTCP)
Zimmermann’s RTP (ZRTP)
# ======================================================================= ##
Orthogonal Frequency-Division Multiplexing (OFDM)
Scalable Orthogonal Frequency-Division Multiple Access (SOFDMA)
Binary Phase-Shift Keying (BPSK)
Quadrature Phase-Shift Keying (QPSK)
Quadrature Amplitude Modulation (QAM)
Complementary Code Keying (CCK) 
# ======================================================================= ##
synchronous dynamic RAM (SDRAM)
Peripheral Component Interface (PCI)
Read-Only Memory (ROM)
power-on self test (POST)
single data rate (SDR)
Universal Serial Bus (USB)
Video Graphics Adapter (VGA)
Electrically Erasable Programmable ROM (EEPROM)
Digital Visual Interface (DVI)
double data rate (DDR)
dual inline memory module (DIMM)
# ======================================================================= ##
 o National Institute of Standards and Technology (NIST)
 o National Vulnerability Database (NVD)
 o The International Standards Organization (ISO)
 o National Security Agency (NSA)
 o Internet Security Association and Key Management Protocol (ISAKMP)
 o Free and Open Source Software (FOSS)
# ======================================================================= ##
 o 
 o 
 o 
 o Broadcast address (BA)
 o Destination port
 o Internet Protocol (IP)
 o IP version 4 (IPv4)
 o IP version 6 (IPv6)
# ==================================================================== #
 o 100baseT
 o 10base2
 o 10baseT
 o Gigabit Ethernet
 o 
 o 
 o 
 o 
 o Coaxial cable (Coax)
 o Unshielded Twisted Pair (UTP)
# ==================================================================== #
 o Security Parameter Index (SPI)
 o Local Area Network (LAN)
 o Wide Area Network (WAN)
 o Link-level protocol
 o Point-to-Point Protocol (PPP)
 o User Datagram Protocol (UDP)
 o 
 o 
 o 
 o Multicast DNS (mDNS)						## UDP port 5353 and with the multicast IP address 224.0.0.251;
# ==================================================================== #
 o loopback interface (lo)
 o Open Host Controller Interface (OHCI)
 o Universal Host Controller Interface (UHCI)
 o Enhanced Host Controller Interface (EHCI)
 o Cylinder/Head/Sector (CHS) Geometry
# ==================================================================== #
 o Internet Print Protocol (IPP)
 o The Berkeley Internet Name Domain (BIND)			## TCP and UDP ports 631
 o Berkeley Packet Filters
 o Extended  Berkeley Packet Filter ( eBPF )
 o 
# ==================================================================== #
 o Samba 						## UDP ports 137 and 138.
 o Openvpn						## UDP port 1194
 o DNSSEC 
# ==================================================================== #
 o The Remote Authentication Dial-In User Service (RADIUS) 		## protocol uses UDP ports 1812 and 1813.
 o Point-to-Point Protocol (PPP)
 o Trivial File Transfer Protocol (TFTP)						## UDP port 69
 o Secure Socket Layer (SSL)
 o Transport Layer Security (TLS)
po i nt-to -po i nt encrypti o n (MP P E)
LD AP (Lightweight D irectory Access Protocol)
public key infrastructure (PKI)
Personal Information Exchange Syntax Standard
(PKCS #12).
Distinguished
Encoding Rules (D ER) or Privacy Enhanced Mail (PEM).


# ==================================================================== #
 o Access Control Lists (ACL)
 o Pluggable Authentication Modules (PAM)
 o Discretionary Access Control (DAC)
 o Mandatory Access Control (MAC)
 o Role Based Access Control (RBAC)
# ================================================ #
 o Digital Signature Algorithm (DSA), 
 o Elliptic Curve DSA (ECDSA)
 o {Rivest//Shamir//Adleman} (RSA)
 o Linux Unified Key Setup (LUKS)
# ============================================= #
 o 
 o 
 o Virtual ELF dynamic shared object (vdso)
 o 
 o 
 o 
# ==================================================================== #



PTR_TO_CTX (a pointer to generic 'struct bpf_context')








[vdso] The virtual dynamically linked shared object.


          ‘b’  =>            512 ("blocks")
          ‘KB’ =>           1000 (KiloBytes)
          ‘K’  =>           1024 (KibiBytes)
          ‘MB’ =>      1000*1000 (MegaBytes)
          ‘M’  =>      1024*1024 (MebiBytes)
          ‘GB’ => 1000*1000*1000 (GigaBytes)
          ‘G’  => 1024*1024*1024 (GibiBytes)







Power-On Self Test (POST) first finds the CPU and then finds the memory.



Start-up values are placed in programmable devices in this order:

system board devices, then the video controller, then the I/O controller.

boot block is the system-wide Master Boot Record.




The firmware performs some power-on self-test operations and detects the processor and memory.




			System Management Interrupt (SMI) handlers
=======================================================================================

_______________________________________________________________________________________
 || >> BIOS boot block code copies the rest of system BIOS code from ROM into DRAM.|| 
======================================================================================

_____________________________________________________________________________
 || >> The first instruction fetched by CPU after reset is located at the || 
 ||  -->>  0xFFFFFFF0 address and is mapped to BIOS firmware ROM		  ||
=============================================================================


________________________________________________________________________________
 || >> This run-time firmware consists of System Management Interrupt (SMI) ||
 ||  -->> handlers that execute in System Management Mode (SMM) of a CPU.	||
===============================================================================

________________________________________________________________________________
 || >> SMRAM is consisting of several regions contiguous in physical memory:|| 
================================================================================

__________________________________________________________________________________
 || >> Compatibility Segment (CSEG) - fixed to addresses 					  || 
 ||  -->> 0xA0000 - 0xBFFFF below 1MB or 									  ||
 ||  -->> Top Segment (TSEG) that can reside anywhere in the physical memory. ||
==================================================================================

________________________________________________________________________
 || >> System BIOS firmware initializes SMRAM, decompresses SMI 	|| 
 ||  -->> handlers stored in BIOS ROM and copies them to SMRAM.		||
=======================================================================


____________________________________________________________________________
 || >> BIOS firmware then should "lock" SMRAM to enable its protection	|| 
 ||		-->> SMI code in modern systems initializes and 				||
 ||		-->> loads The Global Descriptor Table (GDT)					|| 
============================================================================

_______________________________________________________________________
 || >> Then transitions CPU to protected mode without paging.		|| 
 ||  -->> SMI handlers can access 4GB of physical memory.			||
=======================================================================


________________________________________________________________________________
 || >> Operating System execution is suspended for the entire time SMI 		||
 ||  -->> handler is executing till it resumes to protected mode and 		||
 ||	 	-->> restarts OS execution from the point it was interrupted by SMI.||
================================================================================





ioctl structure

Ioctl command values are 32-bit constants.
the last byte is a serial number, and the
       preceding byte(s) give a type indicating the driver.



_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
 ||  -->> 	||
=======================================================================

_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
=======================================================================

_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
 ||  -->> 	||
 ||  -->> 	||
=======================================================================


_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
=======================================================================

_______________________________________________________________________
 || >> 		|| 
================================================================================



|| Sector || The lowest level of addressability on a block device.
Disk segment	An ordered set of physically contiguous sectors residing on the same storage object.
Logical volume
A volume that consumes a storage object and exports something mountable.
	================================
		Boot Order Linux System:
	================================
				BIOS
		MBR (Master Boot Record)
			Boot Loader/GRUB
				Kernel
		Initramfs Ram Disk
			Init Sequence
			Command Shell
			X-windows GUI

Boot order
• Power on → BIOS → Boot Loader → Kernel → init → startup services → shell

1. BIOS - loads and executes the MBR boot loader.
2. MBR - First sector of boot disk. loads and executes the GRUB boot loader.
3. GRUB - loads and executes Kernel and initrd images.
4. KERNEL - mounts fs executed /usr/sbin/init
5. INIT - decides run level
6. RUN LEVEL - starts the system processes


>> The chain loader also mounts initrd



echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo -e "\t## ====================================================================== ##"
echo -e "\t\t\t    << List of Common Unix Shells >>"
echo -e "\t## ====================================================================== ##"
echo -e "\t\t ||\t /bin/sh   \t || The Bourne shell \t ||"
echo -e "\t\t ||\t /bin/csh \t || The C-shell \t ||"
echo -e "\t\t ||\t /bin/tcsh\t || The enhanced C-shell ||"
echo -e "\t\t ||\t /bin/sed \t || The stream editor \t ||"
echo -e "\t## ====================================================================== ##"



echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo -e "\t## ========================================================== ##"
echo -e "\t\t Regular Expressions Programming Language:"
echo -e "\t## ========================================================== ##"
echo -e "\t\t || /usr/bin/awk  || The awk programming language  ||"
echo -e "\t\t || /usr/bin/perl || The Perl programming language ||"
echo "## ============================================================================= ##"



echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + ##"
echo -e "\t## ======================================================================= ##"
echo -e "\t\t UNIX 98 Master Clone & Slave Devices Use These Device Nodes:"
echo -e "\t## ======================================================================= ##"
echo -e "\t\t || /dev/ptmx \t\t|| UNIX 98 master clone device ||"
echo -e "\t\t || /dev/pts/* \t\t|| UNIX 98 slave devices       ||"
echo "## ============================================================================= ##"



echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"


echo -e "\t\t || /dev/pty[p-za-e][0-9a-f] \t || BSD master devices	||"
echo -e "\t\t || /dev/tty[p-za-e][0-9a-f] \t || BSD slave devices	||"
echo "## ============================================================================= ##"


PID 1 = /sbin/init

/etc/shells		## List of valid login shells.
echo $(tty)



## ============================================================================================================================== ##
/run/systemd/notify		## Daemon status notification socket. This is an AF_UNIX datagram socket and is used to implement the daemon
						## notification logic as implemented by sd_notify(3).
## ============================================================================================================================== ##
/run/systemd/private		## Used internally as communication channel between systemctl(1) and the systemd process. This is an AF_UNIX
							## stream socket. This interface is private to systemd and should not be used in external projects.
## ============================================================================================================================== ##
/dev/initctl			## Limited compatibility support for the SysV client interface, as implemented by the systemd-initctl.service
						## unit. This is a named pipe in the file system. This interface is obsolete and should not be used in new
						## applications.
## ============================================================================================================================== ##

echo -e "\t\t ||  \t\t ||  ||"


## =============================================================== ##


echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
## =================================== ##
echo -e "\t\t Pseudoterminals Master"
echo "## ============================================================================= ##"
echo -e "\t\t || /dev/ptm \t\t ||  ||"



echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo "## ============================================================================= ##"
echo -e "\t\t Pseudoterminals Slave "
echo "## ============================================================================= ##"
echo -e "\t\t || /dev/pts


echo -e "\t\t "

echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo "## ============================================================================= ##"
UNIX 98 Master Pseudoterminals Scheme (/dev/ptyp0)
echo "## ============================================================================= ##"



echo "## ============================================================================= ##"
echo -e "\t\t ||  \t\t ||  ||"
echo -e "\t\t ||  \t\t ||  ||"


echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo "## ============================================================================= ##"

echo "## ============================================================================= ##"

/dev/ptyXY (Master)
/dev/ttyXY (Slave)
echo "## ============================================================================= ##"


echo -e "\t\t "
echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo "## ============================================================================= ##"
echo -e "\t\t ||\t /dev/ptyp1 \t\t || Constitute A BSD    ||"
echo -e "\t\t ||\t /dev/ttyp1 \t\t || PseudoTerminal Pair ||"

		## 
		## 
echo "## ============================================================================= ##"




echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo "## ============================================================================= ##"
echo -e "\t\t PseudoTerminal Interfaces (pty)"

echo "## ============================================================================= ##"
echo -e "\t A pair of virtual character devices that provide a bidirectional communication channel.  "
echo -e "\t\t One end of the channel is called the master; the other end is called the  slave."
echo "## ============================================================================= ##"



For example, writing the interrupt character (usually control-C)
to  the master device would cause an interrupt signal (SIGINT) to be generated for the
foreground process group that is connected to the slave.





echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + ##"
echo -e "\t## ======================================================================= ##"
echo -e "\t\t UNIX 98 Master Clone & Slave Devices Use These Device Nodes:"
echo -e "\t## ======================================================================= ##"
/dev/ptmx 					## UNIX 98 Master Clone Device
/dev/pts/* 					## UNIX 98 Slave Devices


echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + ##"
echo -e "\t## ======================================================================= ##"
echo -e "\t\t BSD Master & Slave Devices Use These Device Nodes:"
echo -e "\t## ======================================================================= ##"
/dev/pty[p-za-e][0-9a-f] 	## BSD Master Devices
/dev/tty[p-za-e][0-9a-f] 	## BSD Slave Devices
echo "## ============================================================================ ##"


echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo -e "\t## ========================================================== ##"
echo -e "\t\t  Use These Device Nodes:"
echo -e "\t## ========================================================== ##"
/dev/ptyp0		## UNIX 98 Master Pseudoterminals Scheme
/dev/ttyp0		## UNIX 98 Slave Pseudoterminals



echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo -e "\t## ========================================================== ##"
echo -e "\t\t PseudoTerminal Slave Devices Use This Device Node:"
echo -e "\t## ========================================================== ##"
/dev/pts		## 


echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo -e "\t## ========================================================== ##"
echo -e "\t\t  Use These Device Nodes:"
echo -e "\t## ========================================================== ##"

/dev/sd[a-z]


echo -e "\t\t "
echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo -e "\t## ========================================================== ##"
echo -e "\t\t  Use These Device Nodes:"
echo -e "\t## ========================================================== ##"
/dev/nst*				## SCSI Tape Drives and Changers with 
/dev/sg*				## TapeAlert support the use of these devices: 




echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo -e "\t## ========================================================== ##"
echo -e "\t\t Disks Behind 3ware Controllers Use These Device Nodes:"
echo -e "\t## ========================================================== ##"
/dev/twe[0-9]
/dev/twa[0-9]
/dev/twl[0-9]


echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo -e "\t## ============================================================================ ##"
echo -e "\t\t Disks Behind Areca SATA RAID Controllers Use These Device Nodes:"
echo -e "\t## ============================================================================ ##"
/dev/sg[2-9]"			## 



echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +##"
echo -e "\t## ========================================================== ##"
echo -e "\t\t Disks Accessed Via The CCISS Driver Use These Device Nodes:"
echo -e "\t## ========================================================== ##"
/dev/cciss/c[0-9]d0


echo -e "\t## ========================================================== ##"
echo -e "\t\t "
echo -e "\t## ========================================================== ##"



echo -e "\t## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + ##"
echo -e "\t ## ========================================================== ##"
echo -e "\t\t                   broadcast namespaces"
echo -e "\t ## ========================================================== ##"

/dev/nvme[0-9] 			## (broadcast namespace)
/dev/nvme[0-9]n[1-9] 	## (specific namespace 1-9 for NVMe devices)



##############################################################################################################################

chsh −−list−shells
chfn user_name




 || /etc/securetty || file which lists terminals from which root can log in


0 Standard input (stdin)
1 Standard output (stdout)
2 Standard error (stderr)
## ============================= ##

The shell provides the standard I/O capability, offering three default file descriptors to running programs:
## =========================================================================================================== ##
• 0). Standard input (STDIN) 	|| Input stream  || By default attached to the keyboard.
• 1). Standard output (STDOUT)  || Output stream || Normal program output. By default, this is the screen.
• 2). Standard error (STDERR) 	|| Output stream || Meant for error messages. By default, this is the screen.
## =========================================================================================================== ##


#### ========================================================== ####
 || Cmd 2>&1 || Both output and errors to file					 ||
 || Cmd 2>   || Redirects error output.							 ||
 || Cmd 1>>	 || Redirect and append stdout to file. 			 ||
 || Cmd &>	 ||	Redirect both stdout and stderr to file.		 ||
 || Cmd 1>&2 ||	Standard output to standard error.				 ||
 || Cmd >&   || Redirect both stdout and stderr to file. 		 ||
 || Cmd >>&  || Append both stdout and stderr to file. 			 ||
#### ========================================================== ####
 || Cmd >file 2>&1	 || Redirects stderr to stdout then to file. || 
 || Cmd1 | Cmd2		 || Pipe stdout to cmd2						 ||
 || Cmd1 |& Cmd2     || Pipe stdout and stderr to cmd2			 ||
 || Cmd1 2>&1 | Cmd2 ||	Pipe stdout and stderr to cmd2 			 ||
#### ========================================================== ####


#### ================== Comparison operators: ======================= ####
 || =~ || Matching regular expression. [regex]					  	   ||
 || !~ || Not matching regular expression. [regex]					   ||
 ||  = || Equal to. [number, size, percent, string, string list]	   ||
 || != || Not equal to. [number, size, percent, string, string_list]   ||
 || >= || Greater than or equal to. [number, size, percent]			   ||
 ||  > || Greater than. [number, size, percent]					  	   ||
 || <= || Less than or equal to. [number, size, percent]		       ||
 || <  || Less than. [number, size, percent]						   ||
 || ===================================================================||
####														  		  ####


## ============================================================================================================================== ##

!?string?	 || Run command containing string of the most recent command that contains a particular string of characters.
!!			 || Run previous command.
!n			 || Run command number

## ============================================================================================================================== ##

## ========================================================== ##

echo $!				# process id of last background command
echo $SHELL			# Default shell used

## ========================================================== ##

HISTCONTROL		# controls how your command history is stored.

## ========================================================== ##

$$              # The current process ID 
$?              # exit status of last command 

## ========================================================== ##

!n     			# Refer to command line n.
!123			# execute the 123rd command inside bash history
!!				# execute the last command inside bash history
!!:gs/hda/sda	# prevous command, replacing hda with sda
!!:s/one/two	# prevous command, replacing the first insidance of one with two
"!$"			# represents the last argument of the prevous command
!ssh			# execute the last command that started with ssh

## =================================================================================== ##


# Create a script of the last executed command

echo "!!" > foo.sh








wdctl			## show hardware watchdog status



$?			# show the status of the last command which was run


=============
0	# Successful
1	# Failed
2	# Synatx error





||?<exp>|| Match zero or one instance of patter n.
||*<exp>|| Match zero or more instances of patter n.
||+<exp>|| Match one or more instances of patter n.
||@<exp>|| Match exactly one instance of patter n.
||!<exp>|| Match any strings that don’t match patter n.


||; || Command separator
||& || Background execution
||()||	Command grouping




## ==================== ##
||  	  ! cmd		    || NOT; execute cmd, and produce a zero exit status if cmd exits with a nonzero status. Other wise, produce a nonzero status when cmd exits with a zero status.
||		cmd1 | cmd2		|| Pipe; use output from cmd1 as input to cmd2.
||		cmd1 ; cmd2		|| Command sequence; execute multiple cmds on the same line.
||		cmd1 && cmd2    || AND; execute cmd1 and then (if cmd1 succeeds) cmd2. This is a “shor t circuit” operation: cmd2 is never executed if cmd1 fails.
||		cmd1 || cmd2    || OR; execute either cmd1 or (if cmd1 fails) cmd2. This is a “short Circuit” operation; cmd2 is never executed if cmd1 succeed
||		cmd1 ‘ cmd2 ‘   || Command substitution; use cmd2 output as arguments to cmd1.
||     cmd1 $( cmd2 )   || POSIX shell command substitution; nesting is allowed.
||	  ( cmd1 ; cmd2 ) 	|| Execute commands as a group in a subshell.
||	 { cmd1 ; cmd2 ; }  || Execute commands as a group in the current shell.
||	 cmd $(( express )) || POSIX shell arithmetic substitution. Use the result of expression as argument to cmd.
## ==================== ##










_________________________________________
|| ? || ___ ## Matched at most once. ||
|| * || ___ ## Zero or more times.	 ||
|| + || ___ ## One or more times.	 ||
|| {n}|| __ ## Exactly n times.	 	 ||
||{n,}|| __ ## N or more times.	 	 ||
||{,m}|| __ ## Max of m times.		 ||
||{n,m}|| _	## At least n times		 ||
=========================================

===================================================================
[\^$.|?*+()		## special characters any other will match themselves 
===================================================================

========================================================================
|| \ ||			## Escapes special characters and treat as literal 
|| * ||			## Repeat the previous item zero or more times 
|| . ||			## Single character (except line break characters) 
||.* ||			## Match zero or more characters 
|| ^ ||			## Start of a line/string 
|| $ ||			## The end of a line/string 
||.$ ||			## Single character at the end of line/string 
||^$ ||			## Line with a single space 
========================================================================
||^[A‐Z]||		## Any line beginning with any char from A to Z 
========================================================================



#######################################################################################################
command1 || command2		# command2 will be executed if command1 does not successfully complete 
							# if command1 is successful command2 won't be run 
							# This is called a logical OR.
#######################################################################################################



## ================================================================================================================ ##
cmd > file			# Send STDOUT to file . $ 
cmd 1> file			# Send STDERR to file
cmd 2> file			# Send both STDOUT and STDERR to file . $ 
cmd > file 2>&1		# Send both STDOUT and STDERR to file .
cmd > file 2> file	# Send both STDOUT and STDERR to file .
cmd < file			# Receive STDIN from file
cmd >> file			# Append STDOUT to file 
cmd 1>> file		# Append STDOUT to file
cmd 2>> file		# Append STDERR to file
cmd >> file 2>&1	# Append both STDOUT and STDERR to file .
cmd1 | cmd2			# Pipe STDOUT from cmd1 to cmd2 .
cmd1 2>&1 | cmd2	# Pipe STDOUT and STDERR from cmd1 to cmd2 .
cmd1 | tee file1 | cmd2		# Pipe STDOUT from cmd1 to cmd2 while simultaneously writing it to file1 using tee
## ================================================================================================================ ##
cmd <> file		## Open file for reading and writing on the standard input. The contents are not destroy ed. *
cmd >| file		## Send output of cmd to file (overwrite), even if the shell’s noclobber option is set.
## ================================================================================================================ ##
cmd >& n		## Send cmd output to file descriptor n.
cmd m >& n		## Same as previous, except that output that would normally go to file descriptor m is sent to file descriptor n instead.
cmd >&-			## Close standard output.
cmd <& n		## Take input for cmd from file descriptor n.
cmd m <& n		## Same as previous, except that input that would normally come from file descriptor m comes from file descriptor n instead.
cmd <&-			## Close standard input.
cmd <& n -		## Move input file descriptor n instead of duplicating it.
cmd >& n -		## Move output file descriptor n instead of duplicating it.
## ================================================================================================================ ##
cmd > file 2>&1		## Send both standard error and standard output to file.
cmd &> file			## Same as previous. Preferred form.
cmd >& file			## Same as previous.
cmd > f1 2> f2		## Send standard output to file f1 and standard error to file f2.
## ================================================================================================================ ##

echo $?						## Display last exit status of a command
cmd |&  					## sends data to a co-process or socket. 


cmd 1>&2		## Redirect standard output to standard error:



awk '/^\// { print $1 }' 


| sed -n '10,20p' 

awk '$2 !~ /[a-z]/'


sed 's/\b\(.\)/\u\1/g' 


 | grep "^d"
 | grep "^d" | cut -d" " -f9-

awk '/^[0-9]/ {print $1}'
 | sort -nr -k1 -k2
 | awk 'BEGIN { RS = ":" }

awk '/^d/ { print $NF } '


awk '/^perf/ {print $1}'



sort -k2



SIGHUP		## This signal flushes all cached passphrases and if the program has been started
with a configuration file, the configuration file is read again.


SIGTERM Shuts down the process but waits until all current requests are fulfilled.

SIGINT Shuts down the process immediately.
SIGUSR1 Dump internal information to the log file.
SIGUSR2 This signal is used for internal purposes.




echo "## ============================================================================================ ##"
echo "[+] The PS1 environment variable - specifies the characters used to create the shell prompt.		"
echo "## ============================================================================================ ##"



echo "## ================================================================================ ##"
echo "[+] $IFS - The Internal Field Separator that is used for word splitting after 		"
echo "   		 Expansion and to split lines into words with the read builtin command.		"
echo "## ================================================================================ ##"





## ================================================================================================================ ##

egrep ’(yes|no)’ ‘cat list‘				## Specify a list of files to search
egrep ’(yes|no)’ $(cat list)			## POSIX version of previous Syntax
## ================================================================================================================ ##
egrep ’(yes|no)’ $(< list)				## Faster; not in POSIX
grep XX file && lp file					## Print file if it contains the pattern
grep XX file || echo "XX not found"		## Other wise, echo an error message
## ================================================================================================================ ##


echo "Usage error: see administrator" 1>&2		## Redirect standard output to standard error:



touch $HOME/projects/house{1..9}
chmod 777 $HOME/TEST/{one,two,three}


cat /proc/partitions | grep -o "hd[a-z][0-9]"
cat /proc/partitions | grep -o "sd[a-z][0-9]"


hd[a-z][0-9]*

"/dev/std{out,err}"





sum the second field of every record based on the first field.

            $1 ~ /credit|gain/ { sum += $2 }
            $1 ~ /debit|loss/  { sum -= $2 }

            END { print sum }


count the number of unique "real words".

            BEGIN { FS = "[^A-Za-z]+" }

            { for(i = 1 ; i <= NF ; i++)  word[$i] = "" }

            END { delete word[""]
                  for ( i in word )  cnt++
                  print cnt
            }





RS = "\n([ \t]*\n)+"





## ================================================================================================================ ##
ls −l | grep '[[:upper:]][[:digit:]]'		## any uppercase letter followed by any digit.
=========================================================================================================
grep -h			## Display matched lines, but do not include filenames for multiple file input.
grep -i			## Ignore uppercase and lowercase distinctions, allowing abc to match both abc and ABC .
grep -n			## Display matched lines prefixed with their line numbers.
=========================================================================================================
rm file[^7]						## performs a logical "not" removing file1,file2,file3 etc and saving file7
=========================================================================================================
cat myfile | grep '^s.*n$'		## lines starting with an "s" and ending with an "n"
=========================================================================================================
=========================================================================================================
grep -v '^$' /etc/nsswitch.conf | grep -v '^#'         # select only the lines from /etc/nsswitch.conf that are not blank and do not contain a comment
=========================================================================================================
grep '^Linux' file1							## Display all lines from file1 where the string Linux appears at the start of the line:
grep 'x$' file1								## Display lines in file1 where the last character is an x :
grep '^[^0-9]' file1						## Display all lines from file1 beginning with any single character other than a digit:
grep -c '^$' file1							## Display the number of empty lines in file1 by finding lines with nothing between the beginning and the end:
grep '^null$' file1							## Display all lines from file1 containing only the word null by itself:
grep '[Ll]inux' file1						## Display all lines from file1 containing Linux , linux , TurboLinux , and so on:
grep '[0-9][0-9][0-9]' file1				## Display all lines from file1 that contain three adjacent digits:
grep '\<[Ll]inux\>' file1					## Display all lines from file1 that contain the whole word Linux or linux , but not LinuxOS or TurboLinux :
grep '.....' file1							## Display all lines from file1 with five or more characters on a line (excluding the newline character):
grep '.' file1								## Display all nonblank lines from file1 (i.e., that have at least one character):
grep '\.' file1								## Display all lines from file1 that contain a period (normally a metacharacter) using an escape:
grep 'abcc*' file1							## Display all lines from file1 that contain abc , abcc , abccc , and so on, but not ab :
grep '[0-9][0-9][0-9]*' file1				## Display all lines from file1 that contain 
grep '[0-9]\{2,\}' file1					## two or more adjacent digits:
grep 'file[12]\?' file1						## Display lines from file1 that contain file (because ? can match zero occurrences), file1 , or file2 :
grep '[0-9]\+' file1						## Display all lines from file1 containing at least one digit:
grep '^1\{3,5\}$' file1						## Display all lines from file1 that contain 111 , 1111 , or 11111 on a line by itself:
grep '\(abc\)\{2,\}' file					## Display all lines of file that contain any repeated sequence of abc ( abcabc , abcabcabc , and so on):
grep '\<[0-9]\{3,5\}\>' file1				## Display all lines from file1 that contain any three-, four-, or five-digit number:
grep -E '[Hh]appy|[Ss]ad|[Aa]ngry' file1	## Display all lines from file1 that contain Happy , happy , Sad , sad , Angry , or angry :
## ========================================================================================================================================= ##
grep '[A-Za-z]'								## Match any letter:
grep '[^0-9A-Za-z]'							## Match any symbol (not a letter or digit):
grep '[A-Z][a-z]*'							## Match an uppercase letter, followed by zero or more lowercase letters:
## ========================================================================================================================================= ##
grep -i             						## case insensitive
grep ^            							## begining of the line
grep $              						## end of the line
## ============================================================================================================== ##
egrep'^(b|d)'								## anything that begins with either b or d
egrep '^[a-k]'     							## anything that starts with a-k
egrep'^([a-k]|[A-K])'
## ============================================================================================================== ##
egrep 'Victor(ia)*' file					## Search for occurrences of Victor or Victoria in file:
egrep '(Victor|Victoria)' file				## 
egrep -n '(old|new)\.doc?' files			## Find and print strings such as old.doc1 or new.doc2 in files
## ============================================================================================================== ##
grep -r eth /etc/*
grep -r eth[01] /etc/*
grep -E "(\.edu).*127" /etc/*
grep -E "(\.edu).*127" /etc/*
egrep -r 127. /etc/*
egrep -r 127.0.0.1: /etc/*
## ============================================================================================================== ##
grep 'FOO\|BAR'                                     # Find lines that contain FOO, and lines that contain BAR
grep 'FOO$'                                         # Find lines that end with FOO
grep '^[0-9]'                                       # Find lines that start with a number
grep '^FOO'                                         # Find lines that start with FOO
## ============================================================================================================== ##


grep -rH --include='*.c' 'hello' /home/gigi
grep -e '--cut here--' *
grep -H 'eli' /etc/passwd
ps -ef | grep '[c]ron'



## ================================================================================== ##
grep-available -P -F Description 
grep-available -P 
grep-available dpkg
grep-status -P -e 'apt|dpkg'
grep-available -F Maintainer -s Depends 'ajk@debian.org'
grep-available -F Maintainer -s Package,Depends 'ajk@debian.org'
grep-available -F Maintainer 'ajk@debian.org' -a -F Depends libc6 -s Package,Depends
grep-dctrl -n -s Maintainer '' Sources | sort | uniq -c | sort -nr

grep-available -c -FMaintainer "`grep-available -sMaintainer -n -PX dctrl-tools`"

grep-status -FStatus -sInstalled-Size,Package -n "install ok installed" -a -FInstalled-Size --gt 0 | paste -sd "  \n" | sort -n

grep-dctrl -s Package -F Build-Depends,Build-Depends-Indep quilt /var/lib/apt/lists/*Sources



run-parts --list --regex '^p.*d$' /etc			## Print the names of all files in /etc that start with p and end with d:


sed s/pattern/replacement/[flags]
sed s/pattern/replacement/n			## Replace n th instance of pattern ; the default is 1.
sed s/pattern/replacement/p			## Print the line if a successful substitution is done.
sed s/pattern/replacement/w file	## Print the line to file if a successful substitution is done.


:g/Local	|| Searches for the word Local and prints every occurrence of that line from the file.

___________________	  _______________________________________________________
:g/Local/s//Remote	|| Substitutes the fi rst occurrence of the word Local on
===================	|| every line of the fi le with the word Remote.
					  ===========================================================
_____________________	  _______________________________________________________
:g/Local/s//Remote/g	|| Substitutes every occurrence of the word Local with
=====================	|| the word Remote in the entire file.
						  =======================================================
______________________	  _______________________________________________________
:g/Local/s//Remote/gp	|| Substitutes every occurrence of the word Local with the
======================	|| word Remote in the entire fi le, and then prints each line
						  =======================================================




## =================================================================================================== ##
sed 10q		## print first 10 lines of file (emulates behavior of "head")
sed q		## print first line of file (emulates "head -1")
## =================================================================================================== ##
sed '3,5d' file1		## Delete lines 3 through 5 of file1:
sed '/^#/d' file1		## Delete lines of file1 that contain a # at the beginning of the line:
sed y/abc/xyz/			## Every instance of a is translated to x , b to y , and c to z .
sed 's/^$/@/' file1		## Write the @ symbol for all empty lines in file1 (that is, lines with only a newline character but nothing more):
sed 's/"//g' file1		## Remove all double quotation marks from all lines in file1:
## =================================================================================================== ##
sed 's/^[ \t]*//'    	## delete leading whitespace (spaces, tabs) from front of each line aligns all text flush left
sed 's/[ \t]*$//'		## delete trailing whitespace (spaces, tabs) from end of each line
sed 's/^/     /'		## insert 5 blank spaces at beginning of each line (make page offset)
## =================================================================================================== ##
sed 's/foo/bar/'            ## replaces only 1st instance in a line
sed 's/foo/bar/4'           ## replaces only 4th instance in a line
sed 's/foo/bar/g'           ## replaces ALL instances in a line
sed '$!N;$!D'				## print the last 2 lines of a file (emulates "tail -2")
## =================================================================================================== ##
sed 's/\(.*\)foo\(.*foo\)/\1bar\2/' ## replace the next-to-last case
sed 's/\(.*\)foo/\1bar/'            ## replace only the last case
sed 's/^[ \t]*//;s/[ \t]*$//'		## delete BOTH leading and trailing whitespace from each line
## =================================================================================================== ##
sed '/baz/s/foo/bar/g'				## substitute "foo" with "bar" ONLY for lines which contain "baz"
sed '/baz/!s/foo/bar/g'				## Substitute "foo" with "bar" EXCEPT for lines which contain "baz"
sed -e :a -e '$q;N;11,$D;ba'		## print the last 10 lines of a file (emulates "tail")
## ==================================================================================================== ##
sed '$!d'							## print the last line of a file (emulates "tail -1")
sed -n '$p'							## print the last line of a file (emulates "tail -1") method 2
## ==================================================================================================== ##


sed -n '/this line/p' file.txt		## print lines that contain specified text:


## ==================================================================================================== ##
echo -e "\t\tPrint The Next-To-The-Last Line of A File"
## ============================================================================== ##
sed -e '$!{h;d;}' -e x             		## for 1-line files, print blank line
sed -e '1{$q;}' -e '$!{h;d;}' -e x 		## for 1-line files, print the line
sed -e '1{$d;}' -e '$!{h;d;}' -e x 		## for 1-line files, print nothing
## ============================================================================= ##
sed -n '/regexp/p'		## print only lines which match regular expression
sed '/regexp/!d'        ## method 2
## ============================================================================= ##
sed -n '/regexp/!p'		## print only lines which do NOT match regexp
sed '/regexp/d'         ## method 2, simpler syntax
## ============================================================================= ##



## ======================================================================================== ##
## [+] replace the third and fourth double quotation marks with ( and ) on lines 
##	   1 through 10 in file1. Make no changes from line 11 to the end of the file.
## ======================================================================================== ##


## =============================================================================== ##

1,10{
s/"/(/3			
s/"/)/4			
}

## =============================================================================== ##



:s/s1/s2/ Replace the first occurrence of s1 with s2 in the current line
:s/s1/s2/g Replace globally every occurrence of s1 with s2 in the current line
:%s/s1/s2/gc Replace globally every occurrence of s1 with s2 in the whole file, asking for confirmation
:5,40s/^/#/ Add a hash character at the beginning of each line, from line 5 to 40









echo "## ===================================================================================== ##"
echo -e "\t\t [!] Advanced Sed-fu Section (Look at me! Look what I can do!)"
echo "## ===================================================================================== ##"









echo "## ===================================================================================== ##"
echo -e "\t [?] Sed Shellscript function that lists directories."
echo "## ===================================================================================== ##"

ldirs ()
{
	{
		[ $# -gt 0 ] && {
			/bin/ls -ld "$@" || [ $# -gt 0 ]
		} || /bin/ls -l
	} | sed -ne 's/^d\([^ ]* *\)\{8\}//p'
}



echo "## ===================================================================================== ##"
echo -e "\t [?] Same thing, but with piped manipulation of the outcome."
echo "## ===================================================================================== ##"
find just directory entries
ls -l | grep "^d"
ls -l | awk '/^d/ { print $NF } '
ls -l | grep "^d" | cut -d" " -f9-
ls -l tools | grep "^d" | cut -d" " -f9-
ls -ld tools/[fjt]*
ls -l | grep "^d" | cut -c40-







echo "## ===================================================================================== ##"
echo -e "\t [?] Sed expression is a substitution that matches the protocol name and port number "
echo "## ===================================================================================== ##"
sed 's/^<port protocol="\([^"]*\)" portid="\([^"]*\)"><state state="open".*/\2\/\1/;
	t p; d; :p' test.xml | sort | uniq -c | sort -nr -k1 -k2
	






echo "## ===================================================================================== ##"
echo -e "\t [?] Use tr to convert the spaces to newlines, forcing the output to "
echo -e "\t\t   have a single port entry per line. After that, it's just awk:"
echo "## ===================================================================================== ##"
cat test.gnmap | tr ' ' \\n | awk -F/ '/\/\/\// {print $1 "/" $3}' |
	sort | uniq -c | sort -nr -k1 -k2







echo "## ===================================================================================== ##"
echo -e "\t [?] Use awk to match those lines and output the port and protocol fields"
echo "## ===================================================================================== ##"
awk '/^[0-9]/ {print $1}' test.nmap | sort | uniq -c | sort -nr -k1 -k2




echo "## ===================================================================================== ##"
echo -e "\t [?] Elegant sed idiom for just printing the lines that match our substitution:"
echo "## ===================================================================================== ##"
sed -n 's/^<port protocol="\([^"]*\)" portid="\([^"]*\)"><state
	state="open".*/\2\/\1/p' test.xml |
		sort | uniq -c | sort -nr -k1 -k2







echo "## ===================================================================================== ##"
echo -e "\t [?] "
echo "## ===================================================================================== ##"


echo -n $PATH | awk 'BEGIN { RS = ":" };
					!a[$0]++ { printf "%s%s", s, $0; s = RS };
					END { print "" }'











## ====================================================================================================== ##

sed -n '4p'				## Print just line 4 from a textfile
sed /^$/d				## Delete blank lines:
sed /#keepme/!d			## Delete any line that doesn’t contain #keepme :
sed /^[ Tab]*$/d		## Delete lines containing only whitespace (spaces or Tabs)
sed /^[[:blank:]]*$/d	## sed also supports character classes
sed /^[\.#]/d			## Delete lines beginning with periods or pound signs:
sed 11,20s/abc/def/g	## Substitute def for abc from line 11 to 20, wherever it occurs on the line:
## ====================================================================================================== ##
sed -n '10,20p' <filename>	## Print all the lines between 10 and 20 of a file
## ====================================================================================================== ##
sed 's/Windows/Linux/' opsys > newopsys
sed 's/Windows/Linux/g' opsys > newopsys          						
sed 's/writable = yes/writable = no/g' /etc/samba/smb.conf > ~/smb.conf
sed -e 's/oo/00' file.txt
sed -re 's/^(b|b)/C/' file.txt
## ====================================================================================================== ##






## ===================================================== ##
column -t				## Align columns
## ===================================================== ##






## ============================================================================================ ##
paste -s -d" " 		## Convert a list into a single line
paste Cromwell-intl-list-text.txt Cromwell-intl-list.txt > pdftotextCromwell-intl.txt
## ============================================================================================ ##





## ==================================================================================== ##
sed '<$Input>/d'		## delete all lines containing "Arse"
sed /^$/d      			## Compress blank lines
sed 's/FOO$//'			## Find lines that end with FOO, and delete FOO
sed '/^FOO/i\ '  		## Find lines that start with FOO, and insert a line before
sed '/^FOO/a\ '  		## Find lines that start with FOO, and insert a line after
## ==================================================================================== ##







## ========================================================================================================================== ##
sed 's/\b\(.\)/\u\1/g'                              # Capitalize the first letter of every word
sed -e 's/^/<$Input>/'                              # Add FOO to the beginning of each line
sed -e 's/$/<$Input>/'                              # Add FOO to the end of each line
sed '/FOO/I,+12 d'                                  # Find lines that contain FOO, and delete that and the next 12 lines
sed '/FOO/,${D}'                                    # Find lines that contain FOO, and delete to the end of file
sed 's/FOO/\n&/g'                                   # Find lines that contain FOO, and insert a new line and FOO
## ========================================================================================================================== ##
sed '1N;N;/\(.*\n\)\{2\}.*FOO/P;$d;D'               # Find lines that contain FOO, and print the second line before that
sed '/^FOO/{n;d;}'                                  # Find lines that start with FOO, and delete the following line
printf '%s\n' 'g/^FOO/-1d' w | ed -s                # Find lines that start with FOO, and delete the previous line
sed -e :a -e '$!N;s/\nFOO/ /;ta' -e 'P;D'           # Find lines that start with FOO, insert a space and append to the previous line
## =========================================================================================================================== ##
sed -n '/FOO/,$p'                                   # Print from FOO to the end of the file
sed s/FOO.*//                                       # Print from FOO to the end of the line
sed -n '5,/^$/p'                                    # Print from the 5th line to the first blank line
sed -n '/FOO/,/BAR/p'                               # Print lines between FOO and BAR
sed -e '/./{H;$!d;}' -e 'x;/FOO/!d;'                # Print paragraphs that contains FOO 
## =========================================================================================================================== ##
for x in $(cat tmp); do rm $x; done                 # Remove all files in tmp
sed 's/[A-Z]\{2\},//g'                              # Remove any 2 capital letters followed by a comma
sed '/^$/d'                                         # Remove blank lines
sed 's/[0-9]\{2\}\/[0-9]\{2\}\/[0-9]\{2\}//g'       # Remove dates (mm/dd/yy)
cat -s                                              # Remove double spacing
sed 's/^....//'                                     # Remove first 4 characters from each line
sed '1,5d'                                          # Remove first 5 lines
sed 's/^[ \t]*//;s/[ \t]*$//'                       # Remove leading and trailing whitespace from each line
sed 's/^[ \t]*//'                                   # Remove leading whitespace from each line
sed '/FOO/,/BAR/d'                                  # Remove lines between FOO and BAR
sed '/[[:blank:]]/!d'                               # Remove lines that contain a single word
printf '%s\n' 'g/FOO/d\' '-d' w | ed -s             # Remove lines that contain FOO and the previous line
sed '/@.*@/d'                                       # Remove lines that contain two @ symbols
sed '/[0-9]$/'                                      # Remove lines that contain a number
sed '/[0-9]$/d'                                     # Remove lines that end with a number
sed '/FOO$/d'                                       # Remove lines that end with FOO
sed '/^[0-9]/d'                                     # Remove lines that start with a number
sed '/^FOO/d'                                       # Remove lines that start with FOO
## ============================================================================================================== ##
sed 's/[ \t]*$//'                                   # Remove trailing whitespace from each line
## ============================================================================================================== ##
sed 's/\.\.\.//g'                                   # Replace 3 periods with nothing
sed 's/FOO/BAR/g'                                   # Replace FOO with BAR
sed '/TEST/!s/FOO/BAR/g'                            # Replace FOO with BAR, except on lines that contain TEST
sed '/TEST/s/FOO/BAR/g'                             # Replace FOO with BAR, on lines that contain TEST
sed 's/FOO//g'                                      # Replace FOO with nothing
## ============================================================================================================== ##
sed 's/\([^,]*,\)\{7\}[^,]*,/&\n/g'                 # Replace the 8th comma with a new line
## ============================================================================================================== ##




## ====================================================================================== ##
sort -n -u -t . -k 1,1 -k 2,2 -k 3,3 -k 4,4         # Sort IPs
sort ‐t. ‐k1,1n ‐k2,2n ‐k3,3n ‐k4,4n         # Sort IPv4 ip addresses 
## ====================================================================================== ##
sort −t : −k 4 −k 1 −g /etc/passwd | more





## ====================================================================================== ##
sort −k					## Specify which column you would like to sort by
sort -n					## sort numerically (not alpha)
sort ­­--numeric­-sort		## sort option used to sort by number sort ­n
sort -k2				## Sort by the second column
## ====================================================================================== ##
sort -g || --general-numeric-sort		## compare according to general numerical value
sort -n || --numeric-sort				## compare according to string numerical value
sort --human-numeric-sort				## compare human readable numbers (e.g., 2K 1G)
## ====================================================================================== ##
ps aux | sort -k 6 -n					## Sort all processes on the system by resident size ( RSS in ps ):
## ====================================================================================== ##



## ====================================================================================================== ##
sed "s/$FOO./$FOO/g"                         # Variables - use double quotes with sed or grep
sed 's/string1/string2/g'                    # Replace string1 with string2 
sed ‐i 's/wroong/wrong/g' *.txt              # Replace a recurring word with g 
sed 's/\(.*\)1/\12/g'                        # Modify anystring1 to anystring2 
sed '/<p>/,/<\/p>/d' t.xhtml                 # Delete lines that start with <p> 
                                             # and end with </p> 
sed '/ *#/d; /^ *$/d'                        # Remove comments and blank lines 
sed 's/[ \t]*$//'                            # Remove trailing spaces (use tab as \t) 
sed 's/^[ \t]*//;s/[ \t]*$//'                # Remove leading and trailing spaces 
sed 's/[^*]/[&]/'                            # Enclose first char with [] top‐>[t]op 
sed = file | sed 'N;s/\n/\t/' > file.num     # Number lines on a file 
sed 's/.$//' dosfile.txt > unixfile.txt      # DOS to UNIX 
## ============================================================================================================================================= ##
sed ‐n p unixfile.txt > dosfile.txt 		# Convert Unix to DOS newlines within a Windows environment. Use sed or awk from mingw or cygwin.
## ============================================================================================================================================= ##


## ========================================================== ##
ifconfig $INTERFACE | sed '/.*inet addr:/!d;s///;s/ .*//'
## ========================================================== ##



# <<{!}================================================================================================================{!}>> #
# <<{+}-----------------------------------------------------------------------------------------------------------------{+} ##
# <<{!}================================================================================================================{!}>> #





pcresyntax
pcrepattern





awk '/pattern1/ && /pattern2/ && !/pattern3/ {print}'		## pattern match in awk - no grep




awk '/^\// { print $1 }' /etc/fstab
awk '/^\// { print $1 }' /proc/mounts
awk '/^[^#]/ { printf " " substr($3, 2) }' /proc/mounts; echo -n ' '
awk '/^[^#]/ { printf " " substr($1,2,length($1)-2) }' /proc/mounts; echo -n ' '
## ===================================================================================================================== ##
awk '!x[$0]++' <file>									## Remove duplicate entries in a file without sorting.
sed -n '10,20p' <filename>								## Print all the lines between 10 and 20 of a fil
awk '/FOO/{f=1} (!f || f>2){print} (f && /BAR/){f++}'   ## Remove lines from FOO and the second BAR
awk '$2 !~ /[a-z]/'                                		## Remove lines in the second columns that contain characters
## ===================================================================================================================== ##
for a in z*; do grep -vE '^[\/\#\(\_\[\|\<\.\,\`\%\@]' "$a" > "$a.tmp"; mv "$a.tmp" "$a"; done    
## ====================================================================================== ##
awk '{print $2 " " $1}'                           		 # Print the second column, insert a space, then the first column                                                    # Remove lines starting with various non-characters
awk '$2 !~ /[a-z]/'                           		     # Remove lines that contain [a-z] in the second column
awk 1 unixfile.txt > dosfile.txt  						 # UNIX to DOS (with a cygwin shell) 
awk '{sub(/\r$/,"");print}' dosfile.txt > unixfile.txt   # DOS to UNIX 
awk '{sub(/$/,"\r");print}' unixfile.txt > dosfile.txt   # UNIX to DOS 
## ====================================================================================== ##
awk '{ $1="";print}'						# drop first column of output by piping to this
awk '{ print $2, $1 }' file					# Print and inverse first two columns 
awk '{printf("%5d : %s\n", NR,$0)}' file	# Add line number left aligned 
awk '{print FNR "\t" $0}' files				# Add line number right aligned 
awk NF test.txt								# remove blank lines (same as grep '.') 
awk 'length > 80'							# print line longer than 80 char)
awk '{ print NR" "$0 }'						# print lines in the text file
## ============================================================================================= ##
awk -F : '/mike/ {print $4}' /etc/passwd
awk -F: '($2 == "") {print $1}' /etc/shadow			# find accounts with null passwords
## ============================================================================================= ##


gawk '{print $1}'						## displays the first data field in every line of the input stream.


gawk 'BEGIN {print "test test"}'		## execute the BEGIN keyword before reading the data:



echo "## ===================================================== ##"
echo "        [?] Execute input stream in an ordered way:		 "
echo "## ===================================================== ##"
echo "##~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~##"
echo "    1). Executes the code in the BEGIN section first.		 "
echo "    2). then processes any data in the input stream.		 "
echo "    3). Finally, executes the code in the END section.	 "
echo "##~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~=~##"

gawk 'BEGIN {print "Hello World!"} {print $0} END {print "byebye"}' data1



echo "## ======================================================== ##"
echo "    [?] displays the 1st data field value for all lines		"
echo "        that contain the value 0 in the 4th data field.		"
echo "## ======================================================== ##"
gawk -F: '$4 == 0{print $1}' /etc/passwd



## ============================================================================================= ##
cut -f3 -d: /etc/passwd | sort -n | uniq -c | awk '!/ 1 / {print $2}'		# duplicate UIDs
## ============================================================================================= ##
awk -F: '($3 == 0) {print $1}' /etc/passwd		# display the usernames of all UID 0 accounts:
## ====================================================================================== ##
sort -t: -k3 -n /etc/passwd
## ============================================================================================= ##





strings /bin/ls | grep -A 5 -n Usage



## ============================================================================================= ##
## grep '\.so' part is there to restrict the grep lib returns to only those lines that refer to
## particular binaries (lib*.so.*)
## ============================================================================================= ##
strings /usr/bin/latex | grep lib | grep '\.so'




$ tr '[:upper:]' '[:lower:]' < whats.gnu | tr -cd '[:alnum:]_ \n' |
     > tr -s ' ' '\n' | sort | uniq -c | sort -n -r


get a list of home directories with their users, you can use this:
# cat /etc/passwd | awk -F: '{print $1 "\n" $6}'



$ awk -F: '{print $3}' /etc/passwd | sort | uniq -d			

## find out if you have any duplicate UIDs in your /etc/passwd file ##


## ============================================================================= ##
tr -d '\r' < DosFile > UnixFile		# convert Dos to Unix
cat file | tr -s '[:blank]'			# delete all spaces in the file
tr '^M' '\n' < macfile.txt			# Remove  ^M  mac newline and replace with unix new line. To get a  ^M  use CTL­V then CTL­M
cat tmp | tr ';' '\n'				# Replace semicolon with a new line
cat file | tr a-z A-Z				# convert lowercase characters to uppercase
cat file | tr '[:lower]' '[:upper]'
tr -d 0-9 <myfile
tr -d [:digit:] <myfile
tr -cs '[:alnum:]' '[\n*]'			## Put all words on lines by themselves.  This converts all 
## ================================================================================= ##

tr '[A−Z]' '[a−z]' < fileName.txt > fileNameNew.txt
tr abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ
cat fileName.txt | tr '[A−Z]' '[a−z]' > newFileName.txt		# convert uppercase to lowercase using the the file "fileName.txt"
## =================================================================================== ##



## ================================================================================================= ##
##  ## non-alphanumeric characters to newlines
tr -cs A-Za-z0-9 '\012'		## the octal code for newline is 012
tr -d '\0'					## Remove all zero bytes:
tr -s '\n'					## Convert each sequence of repeated newlines to a single newline (elete blank lines)
tr -d axM					## remove all ‘a’s, ‘x’s, and ‘M’s
## ================================================================================================= ##
cat some_file | tr '3' '5' > new_file			## replace all the instances of 3 with 5
cat some_file | tr '[A−Z]' '[a−z]' > new_file	## This will run cat on some_file and convert 
## ~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~- ## any capital letters to lowercase letters
## ================================================================================================= ##
tr −d '\r' < inputFile.txt > outputFile.txt		## Delete carriage returns it finds, making the file a UNIX system text file.
## ============================================================================================================================== ##
tr '[A-Z]' '[a-z]'								## Change to lower case
## =========================================================================================================================== ##
cat file1 | tr -s '[:blank:]'			## suppress repeated whitespace characters from file1:
cat file1 | tr -dc '[:print:]\n'		## remove all non-printable characters from file1 (except the newline character):
## =========================================================================================================================== ##





## ============================================ ##
xxd -l 300 -ps -c 32 $File
xxd -l 120 -c 20 
## ============================================ ##





















Signal| Num|  Meaning
______|____|______________________________
HUP	  |	 1 |  Hangup, reread config	 ||
INT   |	 2 |  Interrupt, stop run	 ||
KILL  |	 9 |  Exit immediately		 ||
TERM  |	15 |  Terminate nicely		 ||
TSTP  |	20 |  Stop executing		 ||
==========================================







$?

Keystroke Full Name Meaning
[+]========[+]=============================================================================[+]
 || Ctrl+F || 	Character forward Go forward one character.
 || Ctrl+B || 	Character backward Go backward one character.
 || Alt+F  || 	Word forward Go forward one word.
 || Alt+B  || 	Word backward Go backward one word.
 || Ctrl+A || 	Beginning of line Go to the beginning of the current line.
 || Ctrl+E || 	End of line Go to the end of the line.
 || Ctrl+L || 	Clear screen Clear screen and leave line at the top of the screen.
[+]========[+]=============================================================================[+]
 || Ctrl+D || 	 Delete current Delete the current character.
 || Ctrl+T || 	 Transpose character Switch positions of current and previous characters.
 || Alt+T  || 	 Transpose words Switch positions of current and previous words.
 || Alt+U  || 	 Uppercase word Change the current word to uppercase.
 || Alt+L  || 	 Lowercase word Change the current word to lowercase.
 || Alt+C  || 	 Capitalize word Change the current word to an initial capital.
 || Ctrl+V || 	 Insert special character Add a special character. For example, to add a Tab character, press Ctrl+V+Tab.
[+]========[+]=============================================================================[+]
 || Ctrl+K || Cut end of line Cut text to the end of the line.
 || Ctrl+U || Cut beginning of line Cut text to the beginning of the line.
 || Ctrl+W || Cut previous word Cut the word located behind the cursor.
 || Alt+D  || Cut next word Cut the word following the cursor.
 || Ctrl+Y || Paste recent text Paste most recently cut text.
 || Alt+Y  || Paste earlier text Rotate back to previously cut text and paste it.
 || Ctrl+C ||  Delete whole line Delete the entire line.
[+]========[+]=============================================================================[+]


[+]========[+]=============================================================================[+]
 || Ctrl+W || 	Erase a word
 || Ctrl+U || 	Erase a line
 || Ctrl+A || 	Move to the start of the line
 || Ctrl+E || 	Move to the end of the line
 || Ctrl+B || 	Move back one character
 || Ctrl+F || 	Move forward one character
 || Ctrl+u || 	Delete from the cursor to the beginning of the line.
 || Ctrl+K || 	Delete from the cursor to the end of the line.
 || Ctrl+W || 	Delete from the cursor to the start of the word.
 || Ctrl+Y || 	Pastes text from the clipboard.
 || Ctrl+L || 	Clear the screen leaving the current line at the top of the screen.
 || Ctrl+R || 	Reverse incremental search of history
 || Ctrl++ ||
[+]========[+]=============================================================================[+]
 ||        ||	## =============================================== ##
 || Alt+P  || 	Reverse non-incremental search of history
 || Alt+B  || 	Move back one word
 || Alt+F  || 	Move forward one word
 ||        ||	## =============================================== ##
 || Esc+Del|| 	Delete previous word
 ||        ||	
 ||        ||	## =============================================== ##
[+]========[+]==[+]========================================================================[+]
 || Shift+Ctrl+F ||	
 || Shift+Ctrl+N ||	
 || Shift+Ctrl+T ||	
 || Shift+Ctrl+  ||	
 || Shift+Ctrl+  ||	
 || Shift+Ctrl+  ||	
[+]==============[+]===============[+]==========================================================[+]
 || Ctrl+PageUp  ||	Switch Pre-Tab	\\
 || Ctrl+PageDown|| Switch Next Tab  ||
 || Shift+Ctrl+T || New Tab			 ||
 || Shift+Ctrl+N || New Win			 ||
 || Shift+Ctrl+W || Close Tab		 ||
 || Shift+Ctrl+Q || Close Win		 ||
[+]==============[+]=================[+]

Alt+F2



Raid Levels:
0	# Stripe
1	# Mirror
5	# stripe with parity distributed over multiple disks (3 disk minimum)






___________________		 _________________________________________
• /proc/interrupts		| This  is  used to record the number of interrupts per CPU per IO device.
___________________		 _________________________________________
• Interrupts (IRQs)		| allow peripherals to interrupt the CPU 
________________		 ________________________________________________________________
• I/O addresses			| locations in the processor memory map to map hardware devices.



#### ====================== ####
 || ttyS0 (COM1) || 3f8 || 4 ||
 || ttyS1 (COM2) || 2f8 || 3 ||
 || ttyS2 (COM3) || 3e8 || 4 ||
 || ttyS3 (COM4) || 2e8 || 3 ||
 || ======================== ||
 || lp1 (LPT2) ||278-27f|| 5 ||
 || fd0, fd1   ||3f0-3f7|| 6 ||
 || ======================== ||
#### ====================== ####
	   \\==============//
		 \\__________//
		   \\______//
			 \\__//
				



		# 
		# 
		# 
		# 


three types of USB host controllers:
• Open Host Controller Interface (OHCI)
• Universal Host Controller Interface (UHCI)
• Enhanced Host Controller Interface (EHCI)



When you turn on a computer, the firmware
performs a power-on self-test (POST), initializes hardware to a known operational state,
loads the boot loader from the boot device (typically the first hard disk), and passes control
to the boot loader, which in turn loads the OS.


The motherboard’s firmware resides in 
Electronically Erasable Programmable Read-Only Memory (EEPROM), aka flash memory



CHS geometry		#cylinder/head/sector (CHS) geometry.





_________________________________________________________________
mknod /dev/sda				## 								  ||
mknod /dev/sda1				## If mounting filesystems fails: ||
fdisk -l /dev/sda			## ============================== ||
fsck -y /dev/sda1						## 					  ||
mount -t ext3 /dev/sda1 /mnt/sysimage	##					  ||
chroot /mnt/sysimage					## 					  ||
=================================================================




cat (hd1, 0)/etc/fstab






==================================================================
>> To load a multiboot kernel and modules in Syslinux, put 
	--> mboot.c32 (from com32/modules) in the boot directory
==================================================================
>> Then, load it as the "kernel" in the configuration file.
==================================================================
>> load a Xen VMM, xenlinux and an initrd:
===================================================================


======================================================================================================

DEFAULT mboot.c32 xen.gz dom0_mem=15000 nosmp noacpi --- linux.gz console=tty0 root=/dev/hda1 --- initrd.img
======================================================================================================


as a choice in a menu:

======================================================================================================

LABEL Xen
  KERNEL mboot.c32
  APPEND xen.gz dom0_mem=15000 nosmp noacpi --- linux.gz console=tty0 root=/dev/hda1 --- initrd.img

======================================================================================================


/boot/grub/initrd.img-3.16.7-parrot-amd64
/boot/grub/vmlinuz-3.16.7-parrot-amd64
/boot/grub/device.map

======================================================================================================

/etc/default/grub
/boot/grub/device.map
/boot/grub/grub.cfg
/boot/grub/grub.conf
/boot/grub/menu.lst
/etc/grub.d/


===================================================================
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
===================================================================

ls (hd0,msdos1)/grub2/grub.cfg

grub> cat (hd0,msdos1)/grub2/grub.cfg
grub> search.file /grub2/grub.cfg

grub> cat (hd0,msdos2)/etc/fstab


grub2-mkconfig -o /boot/grub2/grub.cfg




grub-mkdevicemap
grub-mkimage
grub-mkrescue
grub-mkstandalone
grub-set-default
grub-bios-setup
grub-editenv
grub-install
grub-mkconfig
grub-mkpasswd-pbkdf2
grub-mount
update-grub2


grub-mkconfig -o /boot/grub/grub.cfg




--uefi-secure-boot
--efi-directory=
--disk-module=
--core-compress=
--boot-directory=
--verbose

--pubkey=FILE
--install-modules=MODULES
--directory=



qemu-img create -f qcow2 -b modified.img diff.qcow2
                   qemu-img rebase -b base.img diff.qcow2

qemu-img info --backing-chain snap2.qcow2



ase.qcow2 <- snap1.qcow2 <- snap2.qcow2




--target=






pdfdocs
mandocs

isoimage
bzdisk
bzImage
fdimage288


includecheck
installmandocs


Kconfig

modules
modules.builtin
modules_install
modules_prepare


outputmakefile



prepare-compiler-check
prepare-objtool

rpm

scripts_basic
security

vmlinux
vmlinux_prereq







gcc-plugins
gcc-plugins-check


grsecurity





tarxz-pkg



perf-tarbz2-src-pkg
perf-tarxz-src-pkg


checkstack
namespacecheck
versioncheck
includecheck
export_report

headerdep
coccicheck



vmlinux
modules
modules_install



headers_install_all
headers_install
headers_check
headers_check_all




kvmconfig
xenconfig


listnewconfig



oldconfig
localmodconfig

defconfig
savedefconfig
alldefconfig



make‐kpkg ‐‐initrd ‐‐append‐to‐version "grsec1.0" kernel_image



make dep
make zImage
make zdisk
make zlilo
make bzImage
cp arch/i386/boot/bzImage /boot/bzImage-
KERNEL_VERSION
cp System.map /boot/System.map-
KERNEL_VERSION
ln -s /boot/System.map-KERNEL_VERSION



make config
make menuconfig
make xconfig
Unpack the tarball in /usr/src directory
bzip2 -dc linux-2.4.0.tar.bz2 | tar xvf –
Configuring the kernel with interactive, menu
or X window interface.
===================================================================

# System.map is used by module-init tools and some debugging
# tools to retrieve the actual addresses of symbols in the kernel.

#   The second row specify the type of the symbol:
#   A = Absolute
#   B = Uninitialised data (.bss)
#   C = Common symbol
#   D = Initialised data
#   G = Initialised data for small objects
#   I = Indirect reference to another symbol
#   N = Debugging symbol
#   R = Read only
#   S = Uninitialised data for small objects
#   T = Text code symbol
#   U = Undefined symbol
#   V = Weak symbol
#   W = Weak symbol
#   Corresponding small letters are local symbols

# For System.map filter away:
#   a - local absolute symbols
#   U - undefined global symbols
#   N - debugging symbols
#   w - local weak symbols



_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
=======================================================================

_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
=======================================================================

_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
=======================================================================





======================================================================================================

 || >> Boot scripts These are included in the initramfs image and normally executed during kernel boot  in  the  early  user-space
    -->> before the root partition has been mounted.
======================================================================================================

_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
=======================================================================

____________________________________________________________________
 || >> dmesg is used to examine or control the kernel ring buffer. || 
===================================================================


_________________________________________________
 || >> initrd - boot loader initialized RAM disk ||
=================================================


_______________________________________________________________________________________________
 || >> /dev/initrd  is  a  read-only block device.  This device is a RAM disk that 
 || is initialized (e.g., loaded) by the boot loader before the kernel is started.			
================================================================================================

_______________________________________________________________________________________________
 || >> first  boot-up phase, the kernel starts up and mounts an initial root filesystem from the contents of
       /dev/initrd (e.g., RAM disk initialized by the boot loader).  In the second phase, additional drivers or other
       modules  are loaded from the initial root devices contents.  After loading the additional modules, a new root
       filesystem (i.e., the normal root filesystem) is mounted from a different device.
======================================================================================================




man 7 bootparam


======================================================================================================
## ============================== SystemCtl ============================ ##
======================================================================================================
At boot, the system manager on the OS image is responsible for initializing the required file systems, services and drivers that are necessary for operation
of the system. On systemd(1) systems, this process is split up in various discrete steps which are exposed as target units. (See systemd.target(5) for
detailed information about target units.) The boot-up process is highly parallelized so that the order in which specific target units are reached is not
deterministic, but still adheres to a limited amount of ordering structure.

When systemd starts up the system, it will activate all units that are dependencies of default.target (as well as recursively all dependencies of these
dependencies). Usually, default.target is simply an alias of graphical.target or multi-user.target, depending on whether the system is configured for a
graphical UI or only for a text console. To enforce minimal ordering between the units pulled in, a number of well-known target units are available, as listed
on systemd.special(7).

The following chart is a structural overview of these well-known units and their position in the boot-up logic. The arrows describe which units are pulled in
and ordered before which other units. Units near the top are started before units nearer to the bottom of the chart.

    local-fs-pre.target
             |
             v
    (various mounts and   (various swap   (various cryptsetup
     fsck services...)     devices...)        devices...)       (various low-level   (various low-level
             |                  |                  |             services: udevd,     API VFS mounts:
             v                  v                  v             tmpfiles, random     mqueue, configfs,
      local-fs.target      swap.target     cryptsetup.target    seed, sysctl, ...)      debugfs, ...)
             |                  |                  |                    |                    |
             \__________________|_________________ | ___________________|____________________/
                                                  \|/
                                                   v
                                            sysinit.target
                                                   |
              ____________________________________/|\________________________________________
             /                  |                  |                    |                    \
             |                  |                  |                    |                    |
             v                  v                  |                    v                    v
         (various           (various               |                (various          rescue.service
        timers...)          paths...)              |               sockets...)               |
             |                  |                  |                    |                    v
             v                  v                  |                    v              rescue.target
       timers.target      paths.target             |             sockets.target
             |                  |                  |                    |
             \__________________|_________________ | ___________________/
                                                  \|/
                                                   v
                                             basic.target
                                                   |
              ____________________________________/|                                 emergency.service
             /                  |                  |                                         |
             |                  |                  |                                         v
             v                  v                  v                                 emergency.target
         display-        (various system    (various system
     manager.service         services           services)
             |             required for            |
             |            graphical UIs)           v
             |                  |           multi-user.target
             |                  |                  |
             \_________________ | _________________/
                               \|/
                                v
                      graphical.target

Target units that are commonly used as boot targets are emphasized. These units are good choices as goal targets, for example by passing them to the
systemd.unit= kernel command line option (see systemd(1)) or by symlinking default.target to them.









IN THE INITIAL RAM DISK (INITRD)
The initial RAM disk implementation (initrd) can be set up using systemd as well. In this case, boot up inside the initrd follows the following structure.

The default target in the initrd is initrd.target. The bootup process begins identical to the system manager bootup (see above) until it reaches basic.target.
From there, systemd approaches the special target initrd.target. If the root device can be mounted at /sysroot, the sysroot.mount unit becomes active and
initrd-root-fs.target is reached. The service initrd-parse-etc.service scans /sysroot/etc/fstab for a possible /usr mount point and additional entries marked
with the x-initrd.mount option. All entries found are mounted below /sysroot, and initrd-fs.target is reached. The service initrd-cleanup.service isolates to
the initrd-switch-root.target, where cleanup services can run. As the very last step, the initrd-switch-root.service is activated, which will cause the system
to switch its root to /sysroot.

                                                   : (beginning identical to above)
                                                   :
                                                   v
                                             basic.target
                                                   |                                 emergency.service
                            ______________________/|                                         |
                           /                       |                                         v
                           |                  sysroot.mount                          emergency.target
                           |                       |
                           |                       v
                           |             initrd-root-fs.target
                           |                       |
                           |                       v
                           v            initrd-parse-etc.service
                    (custom initrd                 |
                     services...)                  v
                           |            (sysroot-usr.mount and
                           |             various mounts marked
                           |               with fstab option
                           |              x-initrd.mount...)
                           |                       |
                           |                       v
                           |                initrd-fs.target
                           \______________________ |
                                                  \|
                                                   v
                                              initrd.target
                                                   |
                                                   v
                                         initrd-cleanup.service
                                              isolates to
                                        initrd-switch-root.target
                                                   |
                                                   v
                            ______________________/|
                           /                       v
                           |        initrd-udevadm-cleanup-db.service
                           v                       |
                    (custom initrd                 |
                     services...)                  |
                           \______________________ |
                                                  \|
                                                   v
                                       initrd-switch-root.target
                                                   |
                                                   v
                                       initrd-switch-root.service
                                                   |
                                                   v
                                         Transition to Host OS

MANAGER SHUTDOWN
System shutdown with systemd also consists of various target units with some minimal ordering structure applied:

                                      (conflicts with  (conflicts with
                                        all system     all file system
                                         services)     mounts, swaps,
                                             |           cryptsetup
                                             |          devices, ...)
                                             |                |
                                             v                v
                                      shutdown.target    umount.target
                                             |                |
                                             \_______   ______/
                                                     \ /
                                                      v
                                             (various low-level
                                                  services)
                                                      |
                                                      v
                                                final.target
                                                      |
                _____________________________________/ \_________________________________
               /                         |                        |                      \
               |                         |                        |                      |
               v                         v                        v                      v
    systemd-reboot.service   systemd-poweroff.service   systemd-halt.service   systemd-kexec.service
               |                         |                        |                      |
               v                         v                        v                      v
        reboot.target             poweroff.target            halt.target           kexec.target

Commonly used system shutdown targets are emphasized.











dracut.cmdline









## ========================== SystemCtl ============================ ##



systemctl get-default
systemctl set-default multi-user.target
systemctl isolate multi-user.target

systemctl list-dependencies graphical.target



systemctl isolate poweroff.target			## Shutdown Now
systemctl isolate rescue.target				# Enter single/rescue mode

																							
## ================================================================================================ ##
## ======== shows the time required to initialize the kernel, plus the time to load the =========== ## 
## ======= initial RAM disk (initrd) and the time to activate systemd units (userspace) =========== ##
## ================================================================================================ ##

systemd-analyze time



systemctl show-environment
systemctl show
systemctl status
systemctl list-jobs
systemctl is-enabled
systemctl list-sockets
systemctl list-units
systemctl list-unit-files
systemctl --all
systemctl --recursive
systemctl --show-types
systemctl --plain
systemctl list-timers
systemctl is-system-running   






strings /sbin/init | grep -i systemd
strings /sbin/init | grep -i upstart
initctl list | grep start/running
systemctl list-unit-files --type=service | grep -v disabled
systemctl list-unit-files --type=service | grep -v enabled

systemctl show --property "WantedBy" getty.target
systemctl show --property "Requires" multi-user.target

ls -al /lib/systemd/system/runlevel*.target
ls -al /etc/systemd/system/default.target

ls -l /usr/lib/systemd/system/runlevel?.target


systemctl list-units | grep .target
systemctl list-units | grep .service
systemctl list-unit-files --type=service
systemctl list-unit-files --type=target




/etc/systemd/system
/usr/lib/systemd/system
/lib/systemd 
/usr/share/systemd


## ------------------------------------------------------------------------------------------------- ##
systemctl list-units --type=service --all
## ------------------------------------------------------------------------------------------------- ##
systemctl list-units --type=target --all
## ------------------------------------------------------------------------------------------------- ##
ls -l /usr/lib/systemd/system/runlevel?.target
## ------------------------------------------------------------------------------------------------- ##
systemctl list-dependencies graphical.target

systemctl get-default
systemctl set-default multi-user.target
ln -s '/usr/lib/systemd/system/multi-user.target' '/etc/systemd/system/default.target'

systemctl isolate multi-user.target
systemctl isolate poweroff.target
systemctl poweroff
systemctl reboot

systemd-analyze time

disable a service unit at boot and
ensure that it cannot be started anymore, you should use the mask


# systemctl mask postfix.service
ln -s '/dev/null' '/etc/systemd/system/postfix.service'


timedatectl list-timezones
timedatectl set-timezone America/Chicago

systemctl start ntpd.service
systemctl enable ntpd.service

ntpq -p

## ============================================= ##
HwdbEtcBinaryDatabase="/etc/udev/hwdb.bin"
HwdbLibBinaryDatabase="/lib/udev/hwdb.bin"
## ============================================= ##
HwdbEtcUDevDatabase="/etc/udev/hwdb.d"
HwdbLibUDevDatabase="/lib/udev/hwdb.d"
## ============================================= ##



systemd-hwdb

systemd-hwdb update					## Update the hwdb database
systemd-hwdb query <MODALIAS>		## Query database and print result



update-mime-database

update-initramfs (8) - generate an initramfs image
update-initramfs.conf (5) - configuration file for update-initramfs



## ================================================================================================= ##
## 						wdctl (Show the status of the hardware watchdog.)							 ##
## ================================================================================================= ##

## ------------------------------------------------------------------------------------------------- ##
		wdctl --flags <list>    			## print selected flags only
## ------------------------------------------------------------------------------------------------- ##
		wdctl --noflags         			## don't print information about flags
## ------------------------------------------------------------------------------------------------- ##
		wdctl --noident         			## don't print watchdog identity information
## ------------------------------------------------------------------------------------------------- ##
		wdctl --noheadings      			## don't print headings for flags table
## ------------------------------------------------------------------------------------------------- ##
		wdctl --oneline         			## print all information on one line
## ------------------------------------------------------------------------------------------------- ##
		wdctl --output <list>   			## output columns of the flags
## ------------------------------------------------------------------------------------------------- ##
		wdctl --raw             			## use raw output format for flags table
## ------------------------------------------------------------------------------------------------- ##
		wdctl --notimeouts      			## don't print watchdog timeouts
## ------------------------------------------------------------------------------------------------- ##
		wdctl --settimeout <sec>			## set watchdog timeout
## ------------------------------------------------------------------------------------------------- ##
		wdctl --flags-only      			## print only flags table (same as -I -T)
## ------------------------------------------------------------------------------------------------- ##









man ls
man -t alias | lpr -PpsG
man -aw --no-subpages 

--sections=
--regex
--wildcard
--ignore-case			case-sensitively
--extension=
man -e tcl
--global-apropos
--apropos
--ditroff
--debug
--config-file=file
--whatis
--prompt=
--ascii
--troff
--gxditview
--html[=
--catman
--where-cat,
--location-cat

--where, --path, --location

troff
apropos
zsoelim
whatis
nrofff


journald.conf


/var/log/{kern.log,debug,syslog,messages}


--priority=7/"debug"
PRIORITY=
/var/log/journal
--update-catalog /var/lib/systemd/catalog/database


"_SYSTEMD_USER_UNIT="
"_UID="
"_SYSTEMD_UNIT=UNIT"

"_TRANSPORT=kernel"

"_KERNEL_DEVICE="


"_EXE="

"FIELD=VALUE", e.g.  "_SYSTEMD_UNIT=httpd.service"G

systemd.journal-fields

sd_journal_send
sd_journal_add_match


journalctl --new-id


_UID=,
           _GID=, _COMM=, _EXE=, _CMDLINE=, _AUDIT_SESSION=,
           _AUDIT_LOGINUID=, _SYSTEMD_CGROUP=,
           _SYSTEMD_SESSION=, _SYSTEMD_UNIT=,
           _SYSTEMD_USER_UNIT=, and _SYSTEMD_OWNER_UID=


OBJECT_UID=, OBJECT_GID=, OBJECT_COMM=, OBJECT_EXE=,
       OBJECT_CMDLINE=, OBJECT_AUDIT_SESSION=,
       OBJECT_AUDIT_LOGINUID=, OBJECT_SYSTEMD_CGROUP=,
       OBJECT_SYSTEMD_SESSION=, OBJECT_SYSTEMD_OWNER_UID=,
       OBJECT_SYSTEMD_UNIT=, OBJECT_SYSTEMD_USER_UNIT=











--new-id128
--disk-usage
generate a new
           key pair for Forward Secure Sealing (FSS)


journalctl _SYSTEMD_UNIT=avahi-daemon.service

journalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=2809
7 + _SYSTEMD_UNIT=dbus.service

Show all logs generated by the D-Bus executable:

journalctl /usr/bin/dbus-daemon


journalctl -a -u NetworkManager.service




journalctl -f -u 


journalctl --since "1 hour ago" Query the systemd journal for events happened in the last hour
journalctl -x Query the systemd journal, adding explanations from the message catalog
journalctl -f Query the systemd journal in real time, scrolling as new entries are added
journalctl -u sshd.service Query the systemd journal for a specific unit
evtest Monitor and query input device events in /dev/input/eventn



mkdir /var/log/journal
chgrp systemd-journal /var/log/journal
chmod 2775 /var/log/journal
systemctl restart systemd-journald.service
echo "## ============================================================================== ##"


echo "## ============================================================================== ##"
journalctl /usr/bin/dbus-daemon			## Show all logs generated by the D-Bus executable:
echo "## ============================================================================== ##"
journalctl -k -b -1						## Show all kernel logs from previous boot:
echo "## ============================================================================== ##"
journalctl -f -u apache					## Show a live log display from a system service apache.service:
echo "## ============================================================================== ##"

journalctl -b 0				# --> Displays the log messages since the last boot
echo "## ============================================================================== ##"
journalctl -b 1				# --> The boot before the last one
echo "## ============================================================================== ##"
journalctl -p warning		# displays all messages with a priority level of “warning”
echo "## ============================================================================== ##"
journalctl					# all collected logs are shown unfiltered:
echo "## ============================================================================== ##"


echo "## ============================================================================== ##"

journalctl _SYSTEMD_UNIT=avahi-daemon.service						## With one match specified, all entries with a field matching the expression are shown:
echo "## ============================================================================== ##"

journalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=28097			## If two different fields are matched, only entries matching both expressions at the same time are shown:
echo "## ============================================================================== ##"
## If two matches refer to the same field, all entries matching either expression are shown:
journalctl _SYSTEMD_UNIT=avahi-daemon.service _SYSTEMD_UNIT=dbus.service	
echo "## ============================================================================== ##"


echo "## ============================================================================== ##"
echo "## If the separator "+" is used, two expressions may be combined in a logical OR. The following will
echo "## show all messages from the Avahi service process with the PID 28097 plus all messages from the D-Bus
echo "## service (from any of its processes):
echo "## ============================================================================== ##"
journalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=28097 + _SYSTEMD_UNIT=dbus.service
echo "## ============================================================================== ##"


journalctl -b | egrep "dhc"






Control groups (or cgroups) are a feature of the Linux kernel to group processes together
and control or limit their resource usage (such as CPU, memory, and so on).

				# --> 
				# --> 
				# --> 
				# --> 
				# --> 
				# --> 

				# --> 
				# --> 
				# --> 





To see all system unit configuration changes:

           systemd-delta systemd/system

       To see all runtime "drop-in" changes for system units:

           systemd-delta --type=extended /run/systemd/system





systemctl list-dependencies rsyslog.service
systemctl status rsyslog.service
systemctl status rsyslog


ls /etc/systemd/system/graphical.target.wants


The systemd Unit Types

systemctl list-unit-files | grep postfix.service


systemd.unit=rescue.target
systemd.unit=emergency.target		# No filesystem is mounted, apart from the root
filesystem in read-only mode.


systemctl list-unit-files --type=service
systemctl is-enabled postfix.service


systemctl mask postfix.service
ln -s '/dev/null' '/etc/systemd/system/postfix.service'


systemctl start ntpd.service



echo "list all services which are started at bootup"
chkconfig --list |grep on






## ============================================================================================================================= ##
	||				||				## 	||
## ============================================================================================================================= ##
	||				||				## 	||
## ============================================================================================================================= ##
	||				||				## 	||
## ============================================================================================================================= ##



## ============================================================================================================================= ##
	||	/usr/sbin/policy-rc.d	||				## Init script policy layer helper (not required).							||
## ============================================================================================================================= ##
	||	/etc/runlevel.conf		||				## file-rc runlevel configuration (if the file-rc package is being used).	||
## ============================================================================================================================= ##
	||	/etc/rc?.d/*			||				## System V runlevel configuration (if the sysv-rc package is being used).	||
## ============================================================================================================================= ##
/etc/default/rcS				||				## contains variable settings in POSIX format




dmesg | grep panic && print yes


dmesg --console-level level
dmesg --console-on
dmesg --show-delta
--human --color=always
dmesg --level=debug,emerg,alert,crit,err,warn,notice,info             # Restrict output to the given (comma-separated) list of levels.
dmesg --facility=kern,user,daemon,auth,syslog,lpr,news
dmesg --raw

dmesg --ctime            # Print human-readable timestamps.
dmesg --buffer-size      # Use  a  buffer of size to query the kernel ring buffer.  This is 16392 by default.
dmesg --decode









dmesg | grep -i irq		# show all interrupts found by the kernel during boot process
dmesg | grep -i dma		# shows dma capable devices during boot process


hdparm -d 1 /dev/sda	# enable DMA for the device /dev/sda?


grep '\] Memory' /var/log/dmesg


dmesg --userspace > /home/poozer/userspace.txt
dmesg --kernel > /home/poozer/kernel.txt

dmesg | grep

dmesg | tail -n 1



Facilities auth, auth-priv, cron, daemon, kern, lpr, mail, mark,
news, syslog, user, uucp, local0 – local7.

Priorities debug, info, notice, warning, err, crit, alert, emerg.


Action
Regular File:
File with full pathname beginning with “/”.
Terminal and Console:
Specify a tty, same with /dev/console.
Remote Machine:
@myhost.mydomain.org



ipcs ‐a                            # information on System V interprocess 
tail ‐n 500 /var/log/messages      # Last 500 kernel/syslog messages 
tail /var/log/warn                 # System warnings messages see syslog.conf 
tail /var/log/messages |grep ICMP |tail -n 1

tail /var/log/messages | grep UDP | tail -n 1



hwclock --utc --systohc
hwclock --show
dpkg-reconfigure tzdata






mailq -bp

runq
newaliases
telinit


	{¤} 
±
Æ
µ
¤
€
¥
£
_______________________________
 || 0 || Halt The System   ||
 || 1 || Single User Mode  ||		(Minimal Services)
 || 2 || Multi-User Modes  ||
 || 3 || Multi-User Mode   ||
 || 4 || Multi-User Mode   ||
 || 5 || Multi-User Mode   ||
 || 6 || Reboot The System ||
===============================

/etc/cron.allow
/etc/cron.deny	
/var/spool/cron/crontabs/*		# user crontabs


    field          allowed values
 _______________________________________________________          --------------
 || minute         0-59
 || hour           0-23
 || day of month   1-31
 || month          1-12 
 || day of week    0-7			
 || Sun			   0|7 



____________________________________________________________________
 || m | h |dom|mon|dow| user | command |
 ||___|___|___|___|___|______|_________|_____________________
 || 0 | 0 | 1 | 1 | * |						@reboot   Run once, at startup		
 || 0 | 0 | 1 | 1 | * |____ 				@yearly   Run once a year
 ||     									@annually 
					   ____ 				@yearly
 || 0 | 0 | 1 | * | * |						@monthly  Run once a month
 || 0 | 0 | * | * | 0 |						@weekly   Run once a week
 || 0 | 0 | * | * | * |						@daily 	  Run once a day
 || 0 | 12|	* | * | * |					@daily 	  Same as @midnight
 || 0 | * | * | * | * |    					@hourly	  Run once an hour


crontab -e 				# Edit your user crontab file
crontab -e -u jdoe 		# Edit the crontab file of another user (command available only to the superuser)



user accounts can NOT submit jobs via at or batch?
/ETC/AT.DENY



at 5:00pm tomorrow myscript.sh 					####
at -f mylistofcommands.txt 5:00pm tomorrow		# Execute a command once at the specified time (absolute or relative)
echo "rm file" | at now+2 minutes 				####


at -l		######
atq 		## List the scheduled jobs


at -d 3		## Remove job number 3 from the list
atrm 3 		#####



ldd /usr/bin/crontab | grep pam

Whenever an external command is executed, a child process is created. This action is termed forking.

Built-in commands are different in that they do not need a child process to execute. They
were compiled into the shell







PATH A colon-separated list of directories where the shell looks for commands
PS1 The primary shell command line interface prompt string


/etc/rc.d/rcX.d
S02schroot		# “start” parameter to scripts that start with S.
K02openvpn		# “stop” parameter to scripts that start with K

lsb_release -a
uname -a
cat /etc/debian_version
	  _																									   ____   
   __(±)																						    	  /×/×/^\ 
  /Æ/%/_\																								_/×/×/  _\
 /#/#/(+)\___________________________________________________________________________________________________|_|    
/#/#/  _|_________________________________________________________________________________________________________ 
Cylinders_______## the concentric parallel tracks on all sides of all platters inside the hard disk drive._/
Heads___________## the number of read/write heads inside the drive.
Sectors_________## the number of wedges the platters have been divided into.
Landing Zone____## an area of the platter near its inner diameter where no data are stored
## ====================================================================================================== ##

¶

The udev daemon creates a virtual file system that is mounted at /dev.


	  _																									   ____   
   __(±)																						    	  /×/×/^\ 
  /Æ/%/_\																								_/×/×/  _\
 /#/#/(+)\___________________________________________________________________________________________________|_|    
/#/#/  _|_________________________________________________________________________________________________________ 



/dev   		# Special or device files, which refer to physical devices.
/opt		# commercial programs
/usr/local	# default location for source software



/var/spool			## Spooled (or queued) files for various programs.
/var/spool/at		## Spooled jobs for at(1).
/var/spool/cron		## Spooled jobs for cron(8).
/var/spool/lpd		## Spooled files for printing.
/var/spool/mail		## Replaced by /var/mail.
/var/spool/mqueue	## Queued outgoing mail.
/var/yp				## Database files for NIS.




ext2/3 cannont dynamically create create inodes








======================
       runlevel
======================
		5 | 3
  prevous | Current
======================




(hd1,5)
6th partition, second disk


/dev/hda	## IDE Hard Drive






gnome-disks --restore-disk-image 
gnome-disk-image-mounter 

gdebi-gtk 
lshw-gtk




lsscsi
sg_map						# provides map between sg name and device name of SCSI device
sginfo /dev/sda			# get physical SCSI adress from sda



0 – System timer – Reserved for internal use.
1 – Keyboard – Reserved for keyboard use only. 
2 – Cascade for IRQs 8–15
3 – Second RS–232 serial port (COM2: in Windows) – May also be shared by a fourth RS–232 serial port.
4 First RS–232 serial port (COM1: in Windows) – May also be shared by a third RS–232 serial port.

IRQ 1 is hard-wired for the keyboard

IRQ 8 is hard-wired for the real-time clock



## ================================================================== ## 
I/O addresses (also referred to as I/O ports) are unique locations in memory that are reserved for
communications between the CPU and specific physical hardware devices.
## ================================================================== ## 


## ================================================================== ## 
interrupt request (IRQ), or interrupt, is a signal sent to the CPU instructing it to suspend its current
activity and to handle some external event such as keyboard input.
## ================================================================== ## 




ls -R /lib/modules/$(uname -r)

Linux doesn’t begin using an IRQ until
the relevant driver is loaded. This may not happen
until you try to use the hardware.



xt_geoip_build -D /usr/share/xt_geoip






## ================================================================== ## 
modinfo is run using modules compiled for a multiprocessing (SMP) kernel
## ================================================================== ## 
modinfo -d 
modinfo -p 
modinfo -a 




modinfo -p loop # verify kernel capability
modprobe loop max_part=16

/etc/modules.conf or /etc/ modprobe.conf :
alias ethO 3c59x

modprobe --show-config --verbose | grep xfs








depmod computes the interdependencies among
kernel modules and writes the results to /lib/
modules/$(uname -r)/modules.dep



--field
modinfo -a || modinfo --author
modinfo -d || modinfo --description
modinfo -l || modinfo --license
modinfo -p || modinfo --parameters
modinfo -n || modinfo --filename
modinfo -k

modinfo freevxfs
modinfo ohci-pci
modinfo -n freevxfs		# Print only 'filename'
modinfo -d freevxfs		# Print only 'description'
modinfo -a freevxfs		# Print only 'author'
modinfo -p freevxfs		# Print only 'parmameters'


modprobe -l					# List all modules available for use:
modprobe -lt net | grep 3c			# List all modules in the net directory for 3Com network interfaces:




/etc/modprobe.conf			# kernel modules configuration on 2.6+ kernels


The options directive in modprobe.conf gives modprobe a list of options, such as irq= or io=, 
that should be used when a particular kernel module loads.


## ================================================================== ## 
The Hardware Abstraction Layer (HAL) daemon (hald) 
Its job is to provide applications running on the system with
information about the hardware (both hotplug and coldplug) available in the system.
## ================================================================== ## 

## ================================================================== ## 
A zombied process is one where the process has finished executing and exited, but the process’ parent 
didn’t get notified that it was finished and hasn’t released the child process’ PID.
## ================================================================== ## 





losetup -v -f partition.img

mkdir -p /mnt/loop0
mount -t auto /dev/loop0 /mnt/loop0		## mount loop0 at /mnt/loop0

umount /dev/loop0			## Unmount loop0
losetup -d /dev/loop0		## Detach loop device



inetd uses tcp wrappers
/etc/hosts.allowed 
/etc/hosts.denied
xinetd has security features builtin



======================================
The main XDMCP servers in linux are: 
======================================
		XDM		KDM		GDM
======================================



The vmlinuz-version.gz file is the compressed Linux kernel file.
## ================================================================== ## 






depmod



tar –cvf /media/usb/backup.tar /home
## ================================================================== ## 
quotacheck command is used to scan the file system for disk usage as well as your create quota files.
## ================================================================== ## 



## ========================================================== ##
When a login shell is run, the bash shell program 
searches for configuration files in the following order: 
## ========================================================== ##
~/.bash_profile, ~/.bash_login, ~/.profile.
~/.bash_logout
## ========================================================== ##
non-login shell sessions:
/etc/bash.bashrc  and ~/.bashrc
## ========================================================== ##




mkisofs				# create iso-9660 filesystem
cdrecord			# burn to media


##########################################
Create isapnp configuration file:
##########################################
pnpdump > /etc/isapnp.conf
isapnp /etc/isapnp.conf
##########################################





What application can be used in place of xhost?
Answer: XAUTH


print a list of usernames (first column) and their corresponding user id (uid,
third column) from /etc/passwd?
cut -d: -f 1,3 /etc/passwd

cut −d ',' −f 1 /etc/passwd
cut −d ':' −f 1,7 /etc/passwd












# diff two unsorted files without creating temporary files
diff <(sort file1) <(sort file2)



=============================================================================
xargs				# build command from standard input
od					# examine byte code of a binary file or inpupt stream
tr					# translates or deletes characters
set					# read and write variables to bash
sed					# directly modifies contents of files, send to standard output
/etc/inittab		# describes processes started at bootup and during normal operation
file globbing		# the process of wildcard expansion
umask				# sets default perminssions newly created files will recieve
debugfs				# interactely modify a filesystem
test 				# check file types and compare values
fg		# restores a job to the foreground
=============================================================================



pr !(*.o|core) | lp						## Print files that are not object files or core dumps
cat -n /etc/profile | pr -d | lpr
cat -n /etc/profile | pr -dfl 50 | lpr


pr -3 -df /home/faggot/poop.txt


=============================================================================
wc --words
wc --lines
wc --bytes
wc --chars
wc --files0-from=
wc --max-line-length
=============================================================================

tac -							# concatenate and print files in reverse
tac filepart1 filepart2 filepart3 > wholefile.txt


=============================================================================

=============================================================================
split -2 <file> <splitfile>		# split file every 2 lines 


split -b 2000m large_file
cat x* >large_file
=============================================================================





=============================================================================
pr ­-l $lines			# pr option used to set page length in lines per page 
pr ­­--length=$lines		# 
pr ­­--header=$text		# pr option used to set header text pr ­h text
pr ­­--omit­-header		# pr option used to omit header pr ­t
=============================================================================
fmt --­­width=$width		# 
fmt ­-w $width			# 
fmt ­-width				# 
fmt -w 75 myfile 		# Format a text file so that each line has a max width of 75 chars

########################################################################################
fmt −u file.txt		## output text with "uniform spacing", where the space 			  ##
					## between words is reduced to one space character and 			  ##
					## the space between sentences is reduced to two space characters ##
########################################################################################

=============================================================================
nl --­­body­-numbering=$style		# nl option used to set body numbering style nl ­b style
nl ­­--header-­numbering=$style		# nl option used to set header number style nl ­h style
nl ­­--section-­delimeter=$code		# nl option used to specify page seperator for a file nl ­d code
=============================================================================
nl --­­no-­renumber	# nl option used to keep nl from resetting  
nl ­-p				# line numbers on new pages
=============================================================================
nl ­­--number-­format=$format		# nl option used to specify number format 
nl -n $format					# specify number format 
=============================================================================
		# 
		# 
		# 
		# 
		# 
		# 
||  ||	## 
||  ||	## 
||  ||	##
||  ||	## 





||n||
||  ||

|| a ||	## number all lines within the body, header,or footer
|| t ||	## number only non­blank lines t
|| n ||	## omit line numbers 


nl -n rz
nl -v1 
nl -i1 
nl -l1 
nl -sTAB 
nl -w6 
nl -nrn 
nl -hn 
nl -bt 
nl -fn
||  ||	## 
||  ||	## 
||  ||	## 
||  ||	##
||  ||	## 
||  ||	## 
||  ||	## 
||  ||	##
||  ||	## 

procinfo -H -r -n3			# -n3 | # of seconds between updates
procinfo -H -r -D -b		# -D  | memory/swap usage, -b number of bytes
procinfo -H -r -s			# -s  | netdevs


echo "Running processes CPU consumption"
pidstat
pidstat -r			# report page faults
pidstat	-s			# stack utilization
pidstat -d			# the number of bytes written and read per second by a process.
pidstat -p <PID>	# gather resource consumption details for a specific target process



echo "displays the location of each memory region that is being copied"
pcat -v <PID> > /home/poo/xntps.pcat


echo "Libraries loaded of a running process with pmap"
pmap -d 7840



	SERIAL   FLAGS  USAGE EXPY PERM     UID   GID   TYPE      DESCRIPTION: SUMMARY
	00000001 I-----    39 perm 1f3f0000     0     0 keyring   _uid_ses.0: 1/4
	00000002 I-----     2 perm 1f3f0000     0     0 keyring   _uid.0: empty
	00000007 I-----     1 perm 1f3f0000     0     0 keyring   _pid.1: empty
	0000018d I-----     1 perm 1f3f0000     0     0 keyring   _pid.412: empty
	000004d2 I--Q--     1 perm 1f3f0000    32    -1 keyring   _uid.32: 1/4
	000004d3 I--Q--     3 perm 1f3f0000    32    -1 keyring   _uid_ses.32: empty
	00000892 I--QU-     1 perm 1f000000     0     0 user      metal:copper: 0
	00000893 I--Q-N     1  35s 1f3f0000     0     0 user      metal:silver: 0
	00000894 I--Q--     1  10h 003f0000     0     0 user      metal:gold: 0

     The flags are:

	I	Instantiated
	R	Revoked
	D	Dead
	Q	Contributes to user's quota
	U	Under construction by callback to userspace
	N	Negative key



(*) /proc/key-users

     This file lists the tracking data for each user that has at least one key
     on the system.  Such data includes quota information and statistics:

	[root@andromeda root]# cat /proc/key-users
	0:     46 45/45 1/100 13/10000
	29:     2 2/2 2/100 40/10000
	32:     2 2/2 2/100 40/10000
	38:     2 2/2 2/100 40/10000

     The format of each line is
	<UID>:			User ID to which this applies
	<usage>			Structure refcount
	<inst>/<keys>		Total number of keys and number instantiated
	<keys>/<max>		Key count quota
	<bytes>/<max>		Key size quota


===============================
USERSPACE SYSTEM CALL INTERFACE
===============================

Userspace can manipulate keys directly through three new syscalls: add_key,
request_key and keyctl. The latter provides a number of functions for
manipulating keys.

When referring to a key directly, userspace programs should use the key's
serial number (a positive 32-bit integer). However, there are some special
values available for referring to special keys and keyrings that relate to the
process making the call:

	CONSTANT			VALUE	KEY REFERENCED
	==============================	======	===========================
	KEY_SPEC_THREAD_KEYRING		-1	thread-specific keyring
	KEY_SPEC_PROCESS_KEYRING	-2	process-specific keyring
	KEY_SPEC_SESSION_KEYRING	-3	session-specific keyring
	KEY_SPEC_USER_KEYRING		-4	UID-specific keyring
	KEY_SPEC_USER_SESSION_KEYRING	-5	UID-session keyring
	KEY_SPEC_GROUP_KEYRING		-6	GID-specific keyring
	KEY_SPEC_REQKEY_AUTH_KEY	-7	assumed request_key()
						  authorisation key



/sbin/request-key update <key> <uid> <gid> \
		<threadring> <processring> <sessionring>

[*] KEYRING_SEARCH_LOOKUP_DIRECT - A direct lookup hashes the type and
      	  description to narrow down the search to a small number of keys.

      [*] KEYRING_SEARCH_LOOKUP_ITERATE - An iterative lookup walks all the
      	  keys in the keyring until one is matched.  This must be used for any
      	  search that's not doing a simple direct match on the key description.

System Monitoring Piped Through Grep:


grep "System RAM" /proc/iomem
grep MemTotal /proc/meminfo
smartctl -A /dev/sda | grep Power_On_Hours










/dev/sd[a-z]


/dev/nst*				## SCSI Tape Drives and Changers with 
/dev/sg*				## TapeAlert support the use of these devices: 




/dev/twe[0-9]  			## disks behind 3ware controllers
/dev/twa[0-9]
/dev/twl[0-9]



/dev/sg[2-9]"			## disks behind Areca SATA RAID controllers:



/dev/cciss/c[0-9]d0		## disks accessed via the cciss driver use these device nodes:

/dev/nvme[0-9] 			## (broadcast namespace)

/dev/nvme[0-9]n[1-9] 	## (specific namespace 1-9 for NVMe devices)






grep -F capacity: /proc/acpi/battery/BAT0/info


cat /proc/meminfo | grep "^MemTotal" | tr -s ' ' | awk '{ print $2" "$3 }'


lsscsi  -g





smartctl --xall /dev/sda						## (Show all information for device)
smartctl --xall
smartctl --scan								## Scan for devices
smartctl --scan-open							## Scan for devices and try to open each device
smartctl --format='{old|brief|hex(id|va)}'				## Set output format for attributes: 

smartctl --attributes
smartctl --capabilities
smartctl --health

smartctl --all /dev/sda						## (Prints all SMART information)
smartctl --test=long /dev/sda				## Executes extended disk self-test)



smartctl --attributes --log=selftest --quietmode=errorsonly /dev/sda			## (Prints Self-Test & Attribute errors)
smartctl --smart=on --offlineauto=on --saveauto=on /dev/sda						## (Enables SMART on first disk)



smartctl -H -i -c -A -l error -l selftest -l selective			## ATA devices
smartctl -H -i -A -l error -l selftest							## SCSI
smartctl -H -i -c -A -l error									## NVMe




isodump (1)          - Utility programs for dumping and verifying iso9660 images.
isofilter (1)        - removes isomorphic structures from mace4 (1) models
isofilter0 (1)       - removes isomorphic structures from mace4 (1) models
isofilter2 (1)       - removes isomorphic structures from mace4 (1) models
isoinfo (1)          - Utility programs for dumping and verifying iso9660 images.
isosize (8)          - output the length of an iso9660 filesystem
isovfy (1)           - Utility programs for dumping and verifying iso9660 images.
devdump (1)          - Utility programs for dumping and verifying iso9660 images.
genisoimage (1)      - create ISO9660/Joliet/HFS filesystem with optional Rock Ridge attributes
genisoimagerc (5)    - startup configuration file for genisoimage
growisofs (1)        - combined genisoimage frontend/DVD recording program.



devlink dev show



/proc/[pid]/io				## This file contains I/O statistics for the process
/proc/[pid]/limits

/proc/self/map_files/		## Entries  are  named  by  memory  region  start and end address pair
							## (expressed as hexadecimal numbers), and are symbolic links to the mapped  files themselves.


/proc/[pid]/maps			## A file containing the currently mapped memory regions and their access  permissions.
/proc/[pid]/mem				## This file can be used to  access  the  pages  of  a  process's  memory
/proc/[pid]/mountinfo		## contains information about mount points.  It supplies various infor‐
              				## mation (e.g., propagation state, root of mount for bind mounts

/proc/interrupts			# IRQ assignments
/proc/cmdline				# 
/proc/bus/pci/devices
/proc/bus/usb/devices
/proc/ide/sda/geometry		# SCSI geometry of sda


egrep 'vmx|svm' /proc/cpuinfo 




/sys/class/net List of all network interfaces in the system
/sys/class/
/sys/class/
/sys/class/
/sys/class/
/sys/class/
/sys/class/



hdparm -l				# Hard disk parameters
hdparm -g /dev/hda 		# Display drive geometry (cylinders, heads, sectors) of /dev/hda
hdparm -i /dev/hda 		# Display identification information for /dev/hda
hdparm -tT /dev/hda 	# Perform benchmarks on the /dev/hda drive



hdparm	# adjust the DMA settings of an IDE hard drive?
tune2fs	# reserved blocks count for a file-system be seen



smokeping			# monitor network latency using RRDTool to store and dislay graphs


scsi_info /dev/sda		# details of real devices that corresponse to /dev/sda




watch --color -n1 'cat /proc/interrupts'	# ## Watch changeable data continuously ##


watch --color -d ls -l					# To watch the contents of a directory change, you could use
watch --color -d 'ls -l | fgrep joe'	# files owned by user joe
watch echo $$
watch uname -r
watch --color -n 1 lsof -nPi tcp:443
watch --color -n 1 lsof -nPi tcp:80
watch --color -n 1 
watch --color -n 1 lsof -i udp:5353 -t
watch --color -n 1 lsof -iTCP -sTCP:LISTEN
watch --color -n 1 lsof -t -c sshd
watch --color -n 1 lsof -i tcp:ssh
watch --color -n 1 lsof -i tcp:22
watch --color -n 1 lsof -u syslog
watch --color -n 1 lsof +d /var/log
watch --color -n 1 lsof -i udp -u root
watch -n1 iptables -vnL
watch -d -n 2 iptables -nvL
Monitor iptables in realtime


grep MemTotal /proc/meminfo




cdrecord -v -eject dev=0,1,0 data.iso




set
man 7 regex
nohup

Present Working Directory
pwd -L
pwd -P
cd - Change to the previously used directory
pushd /etc/apt

file --files-from
file --mime
file --mime-type
file --list
file <file>.c file /dev/{sr0,loop0,}

file /dev/{sr0,loop0,loop1,loop2,loop3,loop4,loop5,loop6,loop7}
file /dev/{vcs,vcsa,vhci,vhost-net,sg0,watchdog,ppp,mcelog,hidraw0}






/usr/lib/rpm/rpmrc

/etc/rpmrc			# changes here affect RPM configuration on a global scope

~/.rpmrc			# change here are on per user bases


RPM --showrc		# displays rpm configuration file (rpmrc)
rpm -nodeps			# install without worrying about dependancies
rpm -qd				# list all the documentation fi les contained in the package
rpm -qlc			# List configurations files by an rpm package

rpm -Kv *.rpm		# check package signature while displaying progess indicator
rpm -iv *.rpm		# install package while displaying progess indicator
rpm -Vv *.rpm


rpm --checksig bash
rpm --verify --group “Amusements/Games”
rpm --verify --all

­rpm -b				# builds a binary package given a src code and config file
rpm -p				# queries the uninstalled RPM package file
rpm -a				# Queries or verifies all packages
rpm -f				# Queries or verifies the package that owns the file
rpm -l              # list packages in redhat
rpm -K				# check package signature
rpm -F				# ­F or ­­freshen update already installed packages
rpm –v 				# Display a progress indicator while the package is installed.


rpm -q --changelog rpm | less		# look through the changelog of the package

­­rpm --rebuild 		# builds a binary package given a RPM source
­­rpm --rebuilddb		# rebuilds the RPM DB to fix errors
rpm ­­--root <Dir>	# modifies the linux system having a root folder located at dir
rpm --­­force			# forces installation of a package even when it means overwriting existing files or packages
rpm --test			# Checks for dependencies, conflicts and other problems without actually installing the package

rpm --prefix <path> # Sets the installation dir to path
rpm -qi				# displays package info
rpm -ql				# Displays the files contained in the package
rpm -qR				# displays the packages and files on which this one depends

rpm ‐ql package‐name               # list the files for INSTALLED package 
rpm ‐qlp package.rpm               # list the files inside package 


rpm -qa --qf “%{GROUP}\n” | sort -u
rpm2cpio pam-1.1.8-2.fc20.x86_64.rpm | cpio -i -v --make-directories




rpm -qpi openssh-3.4p1-2.i386.rpm | grep Version

rpm -qi kernel-source | grep Version


rpm -qa					## List the packages that have been installed on the system:
rpm -qd at				## List the documentation files in a package:
rpm -qc at				## List configuration files or scripts in a package:
rpm -qf /etc/fstab		## Determine what package a particular file was installed from.

rpm -ql kernel-source			## For an installed package, enter query mode and use the -l option along with the package name:
rpm -qf /etc/aliases			## Those that are package members look like this:
rpm -qa | grep kernel			## List Installed Packages With Kernel in the name

rpm -qlp kernel-source-1.3.0-1.i386.rpm		## List the files contained in a package:



rpm --showrc
-d, --docfiles
              List only documentation files (implies -l).

rpm -q --requires
rpm -q --provides
rpm -q --changelog httpd | less
rpm --querytags | less

/etc/yum.conf
/etc/yum.repos.d/
cat /etc/yum.repos.d/*.repo
/var/cache/yum
yum 
yum check­update		# checks to see whether updates are available
yum upgrade			# works like update with the ­­obsoletes flag set
yum list			# displays info about the package
yum list available
yum list installed
yum list all


yum provides		# displays information about packages 
yum whatprovides	# that provide a specified program or feature
yum search			# searches package names, summaries, packagers and descriptions for a specified keyword

yum info ­ 			# displays info about a package
yum clean ­ 			# cleans up the Yum cache directory
yum clean metadata
yum clean packages
yum shell ­ 			# enters the yum shell mode


yum resolvedep­ 			# displays packages matching the specified dependency
yum localinstall­ 		# install the specified local RPM files, using your yum repositories to resolve dependencies
yum deplist­ 			# display dependencies of the specified package
yum deplist emacs | less

yum localupdate­ 		# updates the system using the specified local RPM files, using your yum repositories to resolve dependencies
yumdownloader firefox

yum history
yum history info 96

yum grouplist | less
yum groupinstall LXDE



cpio -i		# Extract
cpio -o < name-list		# Copy files named in name-list to the archive
cpio -o             	# --create Create the archive (run in copy-out mode)
cpio -t					# --List Print a table of contents of the input
cpio -A					# Append to existing archive
cpio -d					# --make-directories     Create leading directories where needed




paxtar c bonvole sekve
paxtar zcf foriru.tar.gz bonvole sekve
paxtar zcvf backup.tar.gz *.c
paxtar tvzf backup.tar.gz '*.jpeg'






aptitude versions '~nexim4-daemon-light'
aptitude versions --group-by=none '~nexim4-daemon-light'
aptitude versions wesnoth

aptitude versions '~i'                  # will display all the versions that are currently installed on the system
aptitude safe-upgrade

aptitude install zsh
aptitude remove zsh
aptitude full­upgrade
aptitude safe­upgrade
aptitude search samba 

aptitude -s			# Simulate actions, but do not actually perform them.
aptitude -d			# Only download packages, do not install or remove anything.
aptitude -P			# Always prompt for confirmation of actions.
aptitude -y			# Assume that the answer to simple yes/no questions is 'yes'.
aptitude -f			# Aggressively try to fix broken packages.
aptitude -V			# Show which versions of packages are to be installed.
aptitude -D			# Show the dependencies of automatically changed packages.
aptitude -Z			# Show the change in installed size of each package.
aptitude -v			# Display extra information. (may be supplied multiple times).
aptitude -t [release]   # Set the release from which packages should be installed.









alien --to-deb		# converts Debian, 
alien --to-rpm		# converts RPM, 
alien --to-slp		# converts Stampede, 
alien --to-tgz		# converts tarball format



/usr/sbin/groupadd

groupadd admin                     # Add group "admin" and user colin (Linux/Solaris) 
# useradd ‐c "Colin Barschel" ‐g admin ‐m colin 
# usermod ‐a ‐G <group> <user>       # Add existing user to group (Debian) 

useradd -c "John Baxter" -s /bin/sh jbaxter

add jbaxter to the testing group and the bin group, type the following:
# usermod -aG testing,bin jbaxter
# grep jbaxter /etc/group

create a group account named testing with GID 315:
groupadd -g 315 testing


the most common states are p, meaning that no trace of the package exists on the
system, c, meaning that the package was deleted but its configuration files remain on the system, i,
meaning that the package is installed, and v, meaning that the package is virtual. The second character
indicates the stored action (if any; otherwise a blank space is displayed) to be performed on the package,
with the most common actions being i, meaning that the package will be installed, d, meaning that the
package will be deleted, and p, meaning that the package and its configuration files will be removed. If
the third character is A, the package was automatically installed.




pgrep -u root sshd
pgrep -u root,daemon

kill $(pgrep mozilla)

pgrep −l		# To list processes ids and names type:

pgrep -d, -x xterm | ps aux
ps aux | pgrep redis-server



grep -n faggot file.txt		# Line #s
grep -i faggot file.txt		# Case Insensitive




The file type is one of the following characters:

 /\		/\												  /\\
/^^\   /^^\												 /^^\\
####___####												/_##_\\
 ||		|| _______________________________________________| |
 ||		|| _______________________________________________| |
 || ‘-’ || regular file					  				  | |
 || ‘b’ || block special file					  		  | |
 || ‘c’ || character special file						  | |
 || ‘C’ || high performance (“contiguous data”) file	  | |
 || ‘d’ || directory					  				  | |
 || ‘D’ || door (Solaris 2.5 and up)					  | |
 || ‘l’ || symbolic link					  			  | |
 || ‘M’ || off-line (“migrated”) file (Cray DMF)		  | |
 || ‘n’ || network special file (HP-UX)					  | |
 || ‘p’ || FIFO (named pipe)					  		  | |
 || ‘P’ || port (Solaris 10 and up)					  	  | |
 || ‘s’ || socket										  | |
 || ‘?’ || some other file type							  | |
 ||_____||================================================|_|
####===#### 											 ##### 

◊ 

ls −F 			# append symbols to particular files, such as * (asterisk) for executable files.
ls −S			# sort the output of the command in decending order sorted by size.
ls -F			# Filetype
ls −d */			# Lists all subdirectories of current directory.
ls −d /usr/*/*/doc		# Lists all directories that are two levels below the /usr/ directory and have a directory called "doc"
ls *.???
ls ?????
ls ?????.???

echo "lists the directories as well"
ls [ab]*
ls [a-m]*
ls [!a-m]*


/ Directory
@ Symbolic link
= Socket
| Pipe



cp -i		# interactive
cp -p		# preserve ownership
cp -a		# Archive
cp -u		# update



mv -i		# interactive






find .
find . -name "fo*"
find . -name "[a-z]*.*"
find . -size +5M
find . -size -5M
find . -type l
find . -type d


find . -atime +5		# Acess Time
find . -ctime +5		# Changed Time
find . -mtime +5		# Modification Time

find . -name "*.zip" | cpio -o > ../file.cpio
cpio -id < ../file.cpio


df -h







## ============================================================= ##
dd if=/dev/sda of=backup.img 		# Create Backup:
dd if=backup.img of=/dev/sda 		# Restore Backup:
## ================================================================================== ##
dd if=/dev/sda7 of=/home/root.img bs=4096 conv=notrunc,noerror 		# Backup / 
dd if=/home/root.img of=/dev/sda7 bs=4096 conv=notrunc,noerror 		# Restore / 
dd bs=1M if=/dev/ad4s3e | gzip ‐c > ad4s3e.gz                  		# Zip the backup 
dd bs=1M if=/dev/ad4s3e | gzip | ssh eedcoba@fry 'dd of=ad4s3e.gz' 	# also remote 
## ============================================================================= #######
gunzip ‐dc ad4s3e.gz | dd of=/dev/ad0s3e bs=1M						# Restore the zip ##
gunzip ‐dc ad4s3e.gz | ssh eedcoba@host 'dd of=/dev/ad0s3e bs=1M'	####################
## ============================================================================= #######
dd if=/dev/ad0 of=/dev/ad2 skip=1 seek=1 bs=4k conv=noerror   						# Skip MBR This is necessary if the destination (ad2) is smaller. 
dd if=/vm/FreeBSD‐8.2‐RELEASE‐amd64‐memstick.img of=/dev/disk1 bs=10240 conv=sync 	# Copy FreeBSD image to USB memory stick 
## ============================================================= ##
dd if=/dev/hda of=/dev/null bs=1m		# Check for bad blocks 
mount ‐o loop /hda1.img /mnt			# Mount the image 
## ============================================================= ##
dd if=/dev/zero of=/dev/hdc			# Delete full disk 
dd if=/dev/urandom of=/dev/hdc		# Delete full disk better 
kill ‐USR1 PID 						# View dd progress (Linux) 
## ==================================================================================== ##
dd if=/dev/sda of=/mbr_sda.bak bs=512 count=1       # Backup the full MBR 
dd if=/dev/zero of=/dev/sda bs=512 count=1          # Delete MBR and partition table 
dd if=/mbr_sda.bak of=/dev/sda bs=512 count=1       # Restore the full MBR 
dd if=/mbr_sda.bak of=/dev/sda bs=446 count=1       # Restore only the boot loader
## ==================================================================================== ##
dd if=/mbr_sda.bak of=/dev/sda bs=1 count=64 skip=446 seek=446 # Restore partition table
dd bs=1k if=/dev/hda1 conv=sync,noerror,notrunc of=hda1.img    # Store into an image 
## ============================================================================================================================= ##
dd bs=1k if=/dev/hda1 conv=sync,noerror,notrunc | gzip | ssh root@fry 'dd of=hda1.gz bs=1k'		# Send to remote ssh connection 
## ============================================================================================================================= ##


## ================================================== ##
gzip backup.img		# Compess Backup with gzip
bzip2 backup.img	# Compess Backup with bzip2
## ================================================== ##

## ==================================================================================== ##
dd if=/dev/hda of=~/mbr.txt count=1 bs=512      ## Make a backup of the MBR from the hard drive and store a copy
dd if=~/mbr.txt of=/dev/hda count=1 bs=512      ## Restore the MBR
sfdisk -d /dev/hda > partition_backup.txt		## Backup of the partition layout
sfdisk /dev/hda < partition_backup.txt			## Restore the partition table, you can use the sfdisk
## ==================================================================================== ##

echo -e "\t## ========================================================= ##"
echo -e "\t ## ====== ways to securely wipe drives
echo -e "\t## ========================================================= ##"


echo "To overrite data with zeros:"

dd if=/dev/zero of=/dev/sdX
echo "   ■ or"
dd if=/dev/zero of=/dev/sdX


echo -e "\t## ========================================================= ##"
echo -e "\t ## ====== To overwrite data with random data =========== ##"
echo -e "\t## ========================================================= ##"
dd if=/dev/urandom of=/dev/sdX
echo "   ■ or:"
dd if=/dev/urandom of=/dev/sdX












echo "## ==================================================================== ##"
echo "## ==========  ========== ##"
echo "## ==================================================================== ##"
sudo dd if=/dev/hda of=/mnt/recovery/hdaimage.dd

echo "## ==================================================================== ##"
echo "## ==== dd will abort on error. Avoid this with the noerror option ==== ##"
echo "## ==================================================================== ##"
sudo dd conv=noerror if=/dev/hda of=/mnt/recovery/hdaimage.dd


echo "## ==================================================================== ##"
echo "## ============= grab most of the error-free areas ==================== ##"
echo "## ==================================================================== ##"
gddrescue -n /dev/hda /mnt/recovery/hdaimage.raw rescued.log

echo "## ==================================================================== ##"
echo "## ====== Once you have your bit-for-bit copy, run fsck on it: ======== ##"
echo "## ==================================================================== ##"
fsck /mnt/recovery/hdaimage.dd


echo "## ==================================================================== ##"
echo "## ============ mount the image as a loopback device: ================= ##"
echo "## ==================================================================== ##"
mount -o loop /mnt/recovery/hdaimage.dd /mnt/hdaimage

echo "## ==================================================================== ##"
echo "## ========= Find out where the partitions are with this: ============= ##"
echo "## ==================================================================== ##"
fdisk -lu /mnt/recovery/hdaimage.dd

echo "## =============================================================================== ##"
echo "## Which will list the start and end cylinders of each partition and the units in  ##"
echo "## Which they’re measured. If the second partition starts at cylinder 80300 and    ##"
echo "## The Units are 512 bytes, then that partition starts at 80300 × 512 = 41,113,600 ##"
echo "## 		bytes. In this case, the command you want looks like this: 				 ##"
echo "## =============================================================================== ##"
mount -o loop,offset=41113600 /mnt/recover/hdaimage.raw /mnt/hdaimage

echo "## ==================================================================== ##"
echo "## ============== Write The Image Back onto Another Disk ============== ##"
echo "## ==================================================================== ##"
dd if=/mnt/recovery/hdaimage.raw of=/dev/hdb		


dd if=/dev/hda1 of=/mnt/hdb1/hda1_drive_image.img


echo "## ==================================================================== ##"
Monitor The Progress of The Image Being Created:
echo "## ==================================================================== ##"
$ watch ls -l /mnt/hdb1/hda1_drive_image.img




The Sleuthkit Command-line tools:
• ils lists inode information from the image.
• ffind finds the file or directory name using the inode.
• icat outputs the file content based on its inode number.


use ffind to get the file/directory name, and then output the
content with icat once you establish whether you’re looking at a file or a directory.


output to the directory from where you ran it:
foremost image.dd

write them to a specified output directory:
foremost -t all -o /rescue/dir -i image.dd





e2image -r /dev/hda1 - | bzip2 > hda1.e2i.bz2


## ==================================================================================== ##
tar cvzf archive.tar.gz files		# Compress with gunzip
tar cvjf archive.tar.bz files		# Compress with Bzip2
tar zxvf archive.tar.gz				# Extract
tar cvJf archive.tar.xz archive/ 	# Create a tarred xz-compressed archive
tar xvJf archive.tar.xz 			# Extract a tarred xz-compressed archive
tar tvf archive.tar 				# List the contents of the tarred archive without extracting it


tar --list (t)						# list archive contents
tar tzf home.tgz            		# look inside the archive without extracting (list)
## ==================================================================================== ##
tar ‐xjf home.tbz home/colin/file.txt    # Restore a single file 
## ==================================================================================== ##
tar c dir/ | gzip | ssh user@remote 'dd of=dir.tgz' # arch dir/ and store remotely. 
tar cvf ‐ `find . ‐print` > backup.tar              # arch the current directory. 
tar ‐cf ‐ ‐C /etc . | tar xpf ‐ ‐C /backup/etc      # Copy directories
## ==================================================================================== ##
tar ‐cf ‐ ‐C /etc . | ssh user@remote tar xpf ‐ ‐C /backup/etc      # Remote copy. 
tar ‐czf home.tgz ‐‐exclude '*.o' ‐‐exclude 'tmp/' home/ 
## ==================================================================================== ##



mount −t ext2 /dev/fd0 /mnt/floppy
mount −t iso9660 /dev/hdb /mnt/cdrom
mount −t iso /tmp/image_file /mnt/iso_file/ −o loop

mount -t sysfs sysfs /sys

umask rw-r-----		# 027






ls | tee output.txt
tee		# option used to append data to files tee ­a


cat output.txt





fg 1		# bring a process TO the terminal


bg 1		# Take a process, and put it in the background



The files section consist of fontPath, RGBPath and ModulePath

echo "## ============================================================================== ##"
echo -e "\t\t\t[+] 


Files			# File pathnames
ServerFlags		# Server flags
Module			# Dynamic module loading
Extensions		# Extension enabling
InputDevice		# Input device description
InputClass		# Input class description
OutputClass		# Output class description
Device			# Graphics device description
VideoAdaptor	# Xv video adaptor description
Monitor			# Monitor description
Modes			# Video modes descriptions
Screen			# Screen configuration
ServerLayout	# Overall layout
DRI				# DRI-specific configuration
Vendor			# Vendor-specific configuration

The  following  obsolete  section names are still recognised compatibility purposes.  In new config files,
the InputDevice section should be used instead.

Keyboard		# Keyboard configuration
Pointer			# Pointer/mouse configuration








ps –f 	# commands only display information about the processes associated with your current terminal session.


ps aux
a - Select all processes except both session leaders
u - user-oriented format
x - processes without controlling ttys


ps -eo user,pid,pcpu,nice,comm | grep gdm
e - Everything
o - options







pstree
pstree --show-pids --show-parents --show-pgids --arguments --long --ascii >> pstree.txt && cat pstree.txt
pstree --show-pids --show-parents --show-pgids --arguments --long >> pstree.txt && cat pstree.txt
pstree --show-pids --arguments --long >> pstree.txt && cat pstree.txt
pstree --arguments --show-pids --show-pgids --show-parents > pstree.txt











HAL (Hardware Abstraction Layer)
dbus - Communication pathway to hardware/software


Sysfs - Where HAL keeps DB of devices connected


POST (Power-On Self Test)
BIOS (Basic I/O System)

Chain loader

GRUB (GRand Unified Bootloader)

GRUB stage 1 is loaded from the MBR and executes GRUB stage 2 from filesystem.

The chain loader hands over to the boot sector of the partition on which resides the OS.

The chain loader also mounts initrd, an initial ramdisk
to be used as the initial root device during kernel boot

Afterwards, the system runs /linuxrc with PID 1.

the system instead loads into memory initramfs, a cpio compressed image,
and unpacks it into an instance of tmpfs inside RAM. 

The kernel then executes /init from within the image.





	export LIBBLKID_DEBUG=all
	export LIBMOUNT_DEBUG=all
	export LIBFDISK_DEBUG=all
	export LIBSMARTCOLS_DEBUG=all

sfdisk -T			# List of partition types and their names

0x82	Linux swap
0x83	Linux
0x85	Linux extended
0x8e	Linux LVM





/etc/lvm/lvm.conf

>> Logical Volume Management (LVM)
>> partition type 0x8E (Linux LVM)

>> LVM uses the Linux device mapper feature (/dev/mapper)
>> A Volume Group is divided into small fixed-size chunks called Physical Extents
>> Physical Extents are mapped one-to-one to Logical Extents.
>> Logical Extents are grouped into Logical Volumes, on which filesystems are created.



■ Physical volume (PV)  A PV is a partition or a disk drive initialized to be used by LVM.
■ Physical extent (PE)  A PE is a small uniform segment of disk space. PVs are split into PEs.
■ Volume group (VG)  A VG is a storage pool, made of one or more PVs.
■ Logical extent (LE)  Every PE is associated with an LE, and these PEs can be combined into a logical volume.
■ Logical volume (LV)  An LV is a part of a VG and is made of LEs. An LV can be formatted with a filesystem and then mounted on the directory of your choice.




pvdisplay --columns
pvdisplay --maps



pvcreate /dev/sdc4 /dev/sde
config	___________ ## The same as lvmconfig(8) below.
devtypes __________ ## Display the recognised built-in block device types.
dumpconfig ________ ## The same as lvmconfig(8) below.
formats	 __________ ## Display recognised metadata formats.
fullreport ________ ## Report information about PVs, PV segments, VGs,  LVs  and  LV  segments, all at once.
help ______________ ## Display the help text.
lastlog	 __________ ## Display  log report of last command run in LVM shell if command log reporting is enabled.

lvpoll ____________ ## Complete lvmpolld operations (Internal command).
pvdata ____________ ## Not implemented in LVM2.
segtypes __________ ## Display recognised Logical Volume segment types.
systemid __________ ## Display any system ID currently set on this host.
tags ______________ ## Display any tags defined on this host.
version	___________ ## Display version information.




pvchange __________ ## Change attributes of a Physical Volume.
pvck ___ __________ ## Check Physical Volume metadata.
pvcreate __________ ## Initialize a disk or partition for use by LVM.
pvdisplay _________ ## Display attributes of a Physical Volume.
pvmove	 __________ ## Move Physical Extents.
pvremove __________ ## Remove a Physical Volume.
pvresize __________ ## Resize a disk or partition in use by LVM2.
pvs	_______________ ## Report information about Physical Volumes.
pvscan ____________ ## Scan all disks for Physical Volumes.
vgcfgbackup _______ ## Backup Volume Group descriptor area.
vgcfgrestore ______ ## Restore Volume Group descriptor area.
vgchange __________ ## Change attributes of a Volume Group.
vgck ______________ ## Check Volume Group metadata.
vgconvert _________ ## Convert Volume Group metadata format.
vgcreate __________ ## Create a Volume Group.
vgdisplay _________ ## Display attributes of Volume Groups.
vgexport __________ ## Make volume Groups unknown to the system.
vgextend __________ ## Add Physical Volumes to a Volume Group.
vgimport __________ ## Make exported Volume Groups known to the system.
vgimportclone _____ ## Import and rename duplicated Volume Group

vgmerge	 __________ ## Merge two Volume Groups.
vgmknodes _________ ## Recreate Volume Group directory and Logical Volume special files
vgreduce __________ ## Reduce a Volume Group by removing one or more Physical Volumes.
vgremove __________ ## Remove a Volume Group.
vgrename __________ ## Rename a Volume Group.
vgs _______________ ## Report information about Volume Groups.
vgscan ____________ ## Scan all disks for Volume Groups and rebuild caches.
vgsplit	___________ ## Split  a Volume Group into two, moving any logical volumes from one
					## Volume Group to another by moving entire Physical Volumes.

lvchange ______________ ## Change attributes of a Logical Volume.
lvconvert _____________ ## Convert a Logical Volume from linear to mirror or snapshot.
lvcreate ______________ ## Create a Logical Volume in an existing Volume Group.
lvdisplay _____________ ## Display attributes of a Logical Volume.
lvextend ______________ ## Extend the size of a Logical Volume.
lvmchange _____________ ## Change attributes of the Logical Volume Manager.
lvmconfig _____________ ## Display the configuration information after loading lvm.conf(5) and any other configuration files.
lvmdiskscan	 __________ ## Scan for all devices visible to LVM2.
lvmdump _______________ ## Create lvm2 information dumps for diagnostic purposes.
lvreduce ______________ ## Reduce the size of a Logical Volume.
lvremove ______________ ## Remove a Logical Volume.
lvrename ______________ ## Rename a Logical Volume.
lvresize ______________ ## Resize a Logical Volume.
lvs ___________________ ## Report information about Logical Volumes.
lvscan ________________ ## Scan (all disks) for Logical Volumes.






lspcmcia
lshal
lshw



kill




Signal     Value     Action   Comment
──────────────────────────────────────────────────────────────────────
SIGHUP        1       Term    Hangup detected on controlling terminal or death of controlling process
SIGINT        2       Term    Interrupt from keyboard
SIGQUIT       3       Core    Quit from keyboard
SIGILL        4       Core    Illegal Instruction
SIGABRT       6       Core    Abort signal from abort(3)
SIGFPE        8       Core    Floating point exception
SIGKILL       9       Term    Kill signal
SIGSEGV      11       Core    Invalid memory reference
SIGPIPE      13       Term    Broken pipe: write to pipe with no readers
SIGALRM      14       Term    Timer signal from alarm(2)
SIGTERM      15       Term    Termination signal
SIGUSR1   30,10,16    Term    User-defined signal 1
SIGUSR2   31,12,17    Term    User-defined signal 2
SIGCHLD   20,17,18    Ign     Child stopped or terminated
SIGCONT   19,18,25    Cont    Continue if stopped
SIGSTOP   17,19,23    Stop    Stop process
SIGTSTP   18,20,24    Stop    Stop typed at terminal
SIGTTIN   21,21,26    Stop    Terminal input for background process
SIGTTOU   22,22,27    Stop    Terminal output for background process




 1) SIGHUP		# HUP  (hang up)
 2) SIGINT		# INT  (interrupt)
 3) SIGQUIT		# QUIT (quit)
 9) SIGKILL		# KILL (non­catchable, non­ignorable kill)
15) SIGTERM		# TERM (software termination signal)




1 or SIGHUP				# terminates interactive prog. and causes many daemons to reread their config
9 or SIGKILL			# causes the process to exit without performing routine shutdown tasks
15 or SIGTERM (default)	# causes process to exit but allows it ot close open files


skill −STOP <Usr>		# stop all of that users processes, this will cause his screen to freeze
skill −CONT <Usr>		# tell that all processes may continue as before.



================================================
				niceness
================================================
     -20                 -         19
Higher Priority               Lower Priority
================================================


		renice
===============================
	idle			Realtime
	 20					0
===============================






nice -n -5 $CMD		## Start a command with a niceness of -5. 
					## If niceness is omitted, a default value of 10 is used
renice -5 			## Change the niceness of a running command to -5

kill -l 	## List all available signal names
kill -l 1 	## Print the name of signal number 1
kill ‐INFO 


/ect/apt/apt.conf

apt-get  				# 
apt-get ­-d | ­­--download-­only	# Downloads package files but doesn’t install
apt-get ­-f | ­­--fix­broken		# Attempts to fix a system on which dependencies are unsatisfied
apt-get ­-m | ­­--ignore­-missing	# Ignores all package files that cant be retrieved
­apt-get ­-q | --quiet			# Omits some progress indicator information.
­apt-get ­-s |­­ --simulate			# Performs a simulation of the action without actually modifying, installing, or removing files.
­apt-get ­-y | ­­--assume­-yes 		# Produces a “yes” response to any yes/no prompt installation scripts.
apt-get -b 						# Compiles a source package after retrieving it.



--differences

apt-cache gencaches					# creates APTs package cache.
apt-cache showpkg					# showpkg displays information about the packages listed on the command line. R
apt-cache stats						# displays some statistics about the cache. 
apt-cache showsrc					# displays all the source package records that match the given package names. 
apt-cache dump						# shows a short listing of every package in the cache. It is primarily for debugging.
apt-cache unmet						# displays a summary of all unmet dependencies in the package cache.
apt-cache dumpavail >"$avail"
apt-cache showpkg
apt-cache search
apt-cache depends					# shows a listing of each dependency a package has and all the possible other packages that can fulfill that dependency.
apt-cache showpkg librpmsign3


apt-cache rdepends					# shows a listing of each reverse dependency a package has.
apt-cache --all-names				# pkgnames print all names, including virtual packages and missing dependencies.
apt-cache --recurse					# Make depends and rdepends recursive so that all packages mentioned are printed once.
apt-cache --installed
apt-cache --generate




The Ext2 file system does not use journaling



/etc/dpkg/dpkg.cfg.d/[0-9a-zA-Z_-]*		##  fragment files (since dpkg 1.15.4).

/etc/dpkg/dpkg.cfg			##  file with default options.
/var/log/dpkg.log			##  Default log file (see /etc/dpkg/dpkg.cfg(5) and option --log).
/var/lib/dpkg/available		##  List of available packages.
/var/lib/dpkg/status		##  Statuses  of  available  packages.


dpkg -l	| --list <pattern>	# Lists all installed packages whose names match pattern
dpkg -I	| --info			#  display information about an uninstalled package file
dpkg -p	| --print­avail		# or ­­ display information about an installed package.
dpkg --list
­dpkg -L | --­­listfiles		# Lists the installed files associated with a package
dpkg --contents			# display contents of .deb
dpkg --configure		# configure .deb
dpkg -S					# Search
­dpkg -S <pattern> | --­­search <pattern>		# Locates the package(s) that own the file(s) specified by pattern
dpkg -X						# extract
­dpkg -C | ­--­audit			# Searches for partially installed packages and suggests what to do with them
dpkg --­­root=<dir>			# modifies the linux system using a root directory located at dir 
­dpkg -B | --­­auto­deconfigure ­ 	# used with ­r ­ disables packages that rely on one that is being removed
­dpkg -G ­ 						# used with ­i ­ Doesn’t install the package if a newer version of the same package is already installed.
dpkg -­E | --­­skip­same­version		# used with ­i ­ Doesn’t install the package if the same version of the package is already installed.

dpkg -L apt | grep '^/usr/bin'

dpkg --get-selections		## Get list of package selections, and write it to stdout.











dpkg-query --load-avail

## list all of the packages installed on the system, sorted by size
dpkg-query –W --showformat='${Installed-Size} ${Package}\n' | sort -n


## list all of the orphaned libraries on your system sorted by their size

deborphan -z | sort -n


deborphan | xargs apt-get -y—purge remove		## remove all orphans from your system




less /var/lib/dpkg/available			## search the listing of packages yourself:
dpkg --print-avail elvis vim | less		## see the entries in /var/lib/dpkg/available of two packages:

config.cache			# stores config from ./configure command in source code

aptitude show


apt-get -s install			# apt-get --simulate
apt-get dselect-upgrade

dpkg-reconfigure


dselect				# ncurses debian based package manager




for i in /var/lib/apt/lists/*_{Release,Packages,Sources}; do :>$i;
touch -t 198103190000.00 $i; done
# apt-get check
# dpkg --clear-avail

apt-cache gencaches
# sync-available


/etc/inittab
# /etc/inittab − init daemon configuration file
#
# Default runlevel
id:1:initdefault:
#
# System initialization
si:S:sysinit:/etc/init.d/rc S
#
# Runlevel scripts
r0:0:wait:/etc/init.d/rc 0
r1:1:respawn:/bin/sh
r2:2:wait:/etc/init.d/rc 2
r3:3:wait:/etc/init.d/rc 3
r4:4:wait:/etc/init.d/rc 4
r5:5:wait:/etc/init.d/rc 5
r6:6:wait:/etc/init.d/rc 6







xz --robot --info-memory
xz --robot --list





--compress


grub-mkimage

grub-mkdevicemap

grub-mkconfig


==========================================
grub-mkconfig -o /home/faggot/grub.cfg
==========================================
Generating grub configuration file ...
Found background image: wallpaper.png
Found linux image: /boot/vmlinuz-4.3.3-parrot-amd64
Found initrd image: /boot/initrd.img-4.3.3-parrot-amd64
done
==========================================================



man grub-fstest | cut -c8-100 | tee grub-fstest.txt


man grub-installed | cut -c8-100 | tee grub-fstest.txt


>> To prevent system from booting hold down SHIFT
>> Kernel must reside below the 1024th cylinder



lilo -R				# sets lilo auto boot on next boot only








man pages are "flat" documents, meaning single files.
info uses hypertext (like web pages) to help organize docs


1 Executable programs or shell commands
2 System calls (functions provided by the kernel)
3 Library calls (functions within program libraries)
4 Special files
5 File formats and conventions
6 Games
7 Miscellaneous
8 System administration commands (usually only for root)
9 Kernel routines


==================================
|| Dir 	||   Section Name
__________________________________
|| man1 ||  (1) User Commands
|| man2 ||  (2) System Calls
|| man3 ||  (3) Subroutines
|| man4 ||  (4) Devices
|| man5 ||  (5) File Formats
|| man6 ||  (6) Games
|| man7 ||  (7) Miscellaneous
|| man8 ||  (8) Sys. Admin
|| manl ||  (l) Local
==================================

apropos


man −f <cmd>	## This will list details associated with the command
man -w			## show location of man pages
man -a			## show all man pages for command
man -wa
man -d mkfifo	## use the debug (-d) option to man to watch as it constructs a manpath



/etc/manpath.config						## man-db configuration file.
/var/cache/man/index.(bt|db|dir|pag)	## An FHS compliant global index database cache.
/usr/man/index.(bt|db|dir|pag)			## A traditional global index database cache.



info --index-search=		## 
info --output=$FILE		## 
info --subnodes			## 

info -w				## print physical	##
info --where		## location of		##
info --location		## Info file.		##



info emacs buffers				## start at buffers node within emacs manual
info --show-options emacs		## start at node with emacs' command line options

info --subnodes -o out.txt emacs	## dump entire manual to out.txt




echo "## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + ##"
echo "## ======================================================================================================= ##"
echo -e "\t\t || /usr/share/man 	|| 		## Directories contain manual pages ||"
echo "## ======================================================================================================= ##"
echo "## ------------------------------------------------------------------------------------------------------- ##"
echo "## /usr/share/man/<locale>/man[1-9]		## These directories contain manual pages for 
echo "## 										## the specific locale in source code form.
echo "## ------------------------------------------------------------------------------------------------------- ##"
echo "## ======================================================================================================= ##"
echo "## + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + ##"
echo
echo "## ======================================================================================================= ##"
echo -e "\t\t || /usr/local/info 	|| 		## Info pages associated with locally installed programs.
echo "## ======================================================================================================= ##"
echo -e "\t\t || /usr/local/man 	|| 		## Man pages associated with locally installed programs.
echo "## ======================================================================================================= ##"
echo -e "\t\t || /usr/share/info	||		## Info pages go here.
echo "## ======================================================================================================= ##"
echo -e "\t\t || /usr/share/locale	||		## Locale information goes here.
echo "## ======================================================================================================= ##"
echo -e "\t\t || /usr/share/man		||		## Manual pages subdirectories arranged by sections.
echo "## ======================================================================================================= ##"
echo -e "\t\t || /var/log			||		## Miscellaneous log files.
echo "## ======================================================================================================= ##"
echo -e "\t\t || /var/opt			||		## Variable data for /opt.
echo "## ======================================================================================================= ##"
echo -e "\t\t || /var/mail			||		## Users' mailboxes.  Replaces /var/spool/mail.
echo "## ======================================================================================================= ##"







## ==================================== ##
## 				Protocols: 
## ==================================== ##
X Window System Protocol
The X Font Service Protocol
X Display Manager Control Protocol


## ==================================== ##
## 				Fonts:  
## ==================================== ##
bdftopcf
mkfontdir
mkfontscale
xfs
xlsfonts
xfontsel
xfd


## ==================================== ##
## 				Keyboards: 
## ==================================== ##
xkeyboard-config



## ==================================== ##
## 				Security: 
## ==================================== ##
Xsecurity
xauth
Xau
xdm
xhost
xfwp

## ==================================== ##
## 			Starting the server: 
## ==================================== ##
startx
xdm
xinit


## ==================================== ##
## 	Controlling the server once started: 
## ==================================== ##
xset
xsetroot
xhost
xinput
xrandr

## ==================================== ##
## 		Server-specific man pages: 
## ==================================== ##
Xorg
Xdmx
Xephyr
Xnest
Xvfb
Xquartz
XWin

extract the entry for the current display, copy it to another machine, and merge it into
the users authority file on the remote machine:
xauth extract - $DISPLAY | ssh otherhost xauth merge -


contacts the server :0 to create an authorization using the MIT-MAGIC-COOKIE-1 protocol.
xauth generate :0 .


echo "grabbing the screen resolution..."
xdpyinfo | awk '/dimensions:/ {print $2}'			# "width x height"
echo ""
xrandr -q				# 



## X provides mechanism for implementing many access control systems.  
## There Are Five Mechanisms:

## Host Access					## Simple host-based access control.
## MIT-MAGIC-COOKIE-1			## Shared plain-text "cookies".
## XDM-AUTHORIZATION-1			## Secure DES based private-keys.
## SUN-DES-1					## Based on Sun's secure rpc system.
## Server Interpreted			## Server-dependent methods of access control





Configuring XDM
The X Display manager is a program which authenticates, authorizes and manages sessions for an X server.



XDM should be configured to
listen for XDMCP requests.

/etc/X11/xdm/xdm−config

! The following three resources  set up display :0 as the console.
## ------------------------------------------------------------------------------------------------- ##
	!DisplayManager._0.setup:		/etc/X11/xdm/Xsetup_0
## ------------------------------------------------------------------------------------------------- ##
	!DisplayManager._0.startup:		/etc/X11/xdm/GiveConsole
## ------------------------------------------------------------------------------------------------- ##
	!DisplayManager._0.reset:		/etc/X11/xdm/TakeConsole
## ------------------------------------------------------------------------------------------------- ##



echo -e "\t\t Comment out the line which sets the "
echo -e "\t\t RequestPort for the display manager to :0."

## ------------------------------------------------------------------------------------------------- ##
	!DisplayManager.requestPort:	0
## ------------------------------------------------------------------------------------------------- ##




/etc/Xn.hosts                 Initial access control list for display number n

/tmp/.X11-unix/Xn             Unix domain socket for display number n
/usr/adm/Xnmsgs               Error log file for display number n if run from init
/usr/lib/X11/xdm/xdm-errors   Default error log file if the server is run from xdm


xfwp.
/usr/adm/Xnmsgs
/etc/Xn.hosts
/tmp/.X11-unix/Xn
$HOME/.Xauthority

xauth Xau xdm xhost xfwp
xset xsetroot xhost xinput xrr
Xorg Xdmx Xephyr Xnest Xvfb Xquartz XWin
editres
iceauth xfs fsinfo fslsfonts fstobdf
xset xsetroot xstdcmap  xmodmap
xwininfo  xlsclients xdpyinfo xlsatoms  xprop
xwd xwud  xmag x11perf bdftopcf 
xfs fsinfo fslsfonts fstobdf
Xserver rgb mkfontdir
xclipboard
xkbcomp setxkbmap xkbprint xkbbell xkbevd xkbvleds  xkbwatch xkill
Xau





xrdb $HOME/.Xresources

xmodmap -e "keysym BackSpace = Delete"
mkfontdir /usr/local/lib/X11/otherfonts
xset fp+ /usr/local/lib/X11/otherfonts
xmodmap $HOME/.keymap.km
xsetroot -solid 'rgbi:.8/.8/.8'
xset b 100 400 c 50 s 1800 r on
xset q
twm
xmag

xclock -geometry 48x48-0+0 -bg blue -fg white

xeyes -geometry 48x48-48+0
xbiff -update 20

xlsfonts '*helvetica*'

glxinfo | grep rendering
glxinfo | grep ""
glxinfo | grep "Video memory"
Vendor
Unified memory
version string


"Video memory"
xwininfo -root
xdpyinfo -display joesworkstation:0
xhost -joesworkstation
xrefresh
xwd |xwud
bitmap companylogo.bm 32x32
xcalc -bg blue -fg magenta
xterm -geometry 80x66-0-0 -name myxterm $*


$XDG_DATA_HOME/xorg/Xorg.n.log


Xorg
xdmx
xephyr
xnest
xkbwatch
xkill
xlogo
xlsatoms
xlsclients
xlsfonts
xmag
xmh
xmodmap
xprop
xrdb
xrefresh
xrx
xset
xsetroot
xsm
xstdcmap
xterm
xwd
xwininfo
xwud
xserver
xorg
xdmx
xephyr
xnest
xquartz
xvfb
xvnc
xWin




xrdb -query				## query resources

xrdb -symbols			## show preprocessor symbols


appres  XTerm

appres  XTerm  myxterm
appres  XTerm  -name  


appres  XTerm.VT100  xterm.vt100  -1			## list the resources matching the xterm vt100 widget



-all
-variable


-notopbox -bothshown


-pointer

-prop
-map




setenv DISPLAY myws:0
DISPLAY=myws:0; export DISPLAY



xeyes -display joesws:0 -geometry 1000x1000+0+0
rsh big xterm -display myws:0 -ls </dev/null &

           


echo "Hello" | write jdoe		# Write a message to the terminal of user jdoe (must be logged in)
write jdoe						# Write interactively a message to the terminal of user jdoe (must be logged in)
echo "Hello" | wall 			# Write a message to the terminal of all logged in users













systemd.mount
btrfs
cryptsetup@.service
systemd-efi-boot-generator
systemd-fstab-generator


http://www.freedesktop.org/wiki/Specifications/DiscoverablePartitionsSpec/




audit2allow
audit2why
libaudit.conf
systemd-update-utmp.service
yasat
pam_selinux

se_apt-get (8)     
se_aptitude (8)    
se_dpkg (8)        
se_dpkg-reconfigure
se_dselect (8)     
se_synaptic (8)    
setcifsacl (1)       - Userspace helper to alter an ACL in a security descriptor for Common Internet File System (CIFS)
setfiles (8)         - set SELinux file security contexts.
skipfish (1)         - web application security scanner
snmpkey (1p)         - Create SNMPv3 security keys for the Net::SNMP module
sudoers (5)          - default sudo security policy plugin
getcifsacl
fixfiles
chcat
chcon
pam-auth-update
pam_env.conf





dh_installpam
runcon
hardening-check
matchpathcon
openvas-nvt-sync
greenbone-nvt-sync
gsad

ICEAUTHORITY
XAUTHORITY
XMODIFIERS
XENVIRONMENT


pax11publish  utility  can be used to dump or
       manipulate the PulseAudio server credentials





## ============================================================================================ ##
xprop -root WM_NAME						## Display the name of the root window
xprop -root | grep ^PULSE_				## 
xprop -name xclock WM_HINTS				## Display the window manager hints for the clock: 
xprop -root -len 100 CUT_BUFFER0		## Display the start of the cut buffer
xprop -font fixed POINT_SIZE			## Display the point size of the fixed font
xprop -id 0x200007						## Display all the properties of window # 0x200007
## ========================================================================================================= ##
xprop -root -format MY_ATOM_NAME 8s -set MY_ATOM_NAME "my_value"		## set a simple string property
																		## 
## ========================================================================================================== ##













xprop -name xclock WM_HINTS

xprop -id 0x200007

xprop -root -format MY_ATOM_NAME 8s -set MY_ATOM_NAME  "my_value"


glx
xdriinfo


/usr/share/X11/app-defaults/.


xrdb -merge $HOME/.Xresources





## In the configuration File: xorg.conf
## [?] Which section is concerned with fonts?
B. the Files section






/usr/lib/xorg 
/usr/include/xorg



/usr/share/X11/xkb/rules/xorg.lst


echo "[+]=====================================================================[+]"
echo -e "\t\t [+] The section names are:
echo "[+]=====================================================================[+]"
Files          File pathnames
ServerFlags    Server flags
Module         Dynamic module loading
Extensions     Extension enabling
InputDevice    Input device description
InputClass     Input class description
OutputClass    Output class description
Device         Graphics device description
VideoAdaptor   Xv video adaptor description
Monitor        Monitor description
Modes          Video modes descriptions
Screen         Screen configuration
ServerLayout   Overall layout
DRI DRI-specific configuration
Vendor         Vendor-specific configuration
echo "[+]=====================================================================[+]"


/etc/X11/<cmdline>
/usr/etc/X11/<cmdline>
/etc/X11/$XORGCONFIG
/usr/etc/X11/$XORGCONFIG
/etc/X11/xorg.conf
/etc/xorg.conf
/usr/etc/X11/xorg.conf.<hostname>
/usr/etc/X11/xorg.conf
/usr/lib/X11/xorg.conf.<hostname>
/usr/lib/X11/xorg.conf


/usr/bin/X11 
/usr/lib/X11 
/etc/X11 
/usr/include/X11 
/usr/share/X11


(iptables -L | sed '/^\*filter/,/^COMMIT/d')







dbus-daemon - Message bus daemon 
D-Bus is first a library that provides one-to-one communication between any two applications

There are two standard message bus instances: 

the systemwide message bus (installed on many systems as the "messagebus" init service)

and the 
per-user-login-session message bus (started each time a user logs in).

dbus-daemon is used for both of these instances, 
but with a different configuration file.


--config-file=/usr/share/dbus-1/system.conf

--config-file=/usr/share/dbus-1/session.conf

{The systemwide daemon} -- is largely used for broadcasting system events, 
such as changes to the printer queue, or
       adding/removing devices
The per-session daemon is used for various interprocess communication among desktop applications (however, it
       is not tied to X or the GUI in any way).

SIGHUP will cause the D-Bus daemon to PARTIALLY reload its configuration file and to flush its user/group
       information caches. S


--introspect
--systemd-activation

DBUS_VERBOSE=1 dbus-daemon --session --print-address

dbus-monitor                       Monitor messages going through a D-Bus message bus
dbus-monitor --session             Monitor session messages (default)
dbus-monitor --system              Monitor system messages


udevadm monitor											## udevmonitor Show all kernel uevents and udev messages

udevadm info --attribute-walk --name=/dev/sda			## Print all attributes of device /dev/sda in udev rules key format

udevadm --devpath=/class/block/sda

udevadm
           /sys/class/block/sda
udevadm --name=sda
udevadm /dev/sda


udevadm settle






/run      Dynamic, non-persistent application runtime date
/var      Dynamic configuration data, such as FTP and www






The  variable environ points to an array of pointers to strings called the "environment".





/usr/src/linux/.config		## Kernel configuration file





dmesg | grep "[hs]d[a-z]"		## show all hard disks found by the kernel during boot





lspci | grep -i usb			## shows the usb controllers on the system

usbmgr						## handles loading/unloading of hotplug devices




lsusb -tv
lsusb -s 06:1


## ============================= ##
USB || 1.0 || 12mbps	|| 127 Devices	|| UHCI OHCI ||
USB || 2.0 || 480mbps	|| EHCI controllers are 
USB || 3.0 || 4.8Gb[s]
## ============================= ##

Human Interface Device (HID)
Input devices (mice, keyboards, etc.)






usb hub can support 7 devices
root hub supports up to 127 devices in total


### ========================== ###
###### Data Measurements: #######
### ========================== ###
There are 8 bits per byte
Bytes Per Second (Bps)
Megabytes Per Second (MBps)
Gigabits Per Second (Gbps)
## ========================== ##




PCI device drivers call pci_register_driver() during their
initialization with a pointer to a structure describing the driver

A PCI Express Port is a logical PCI-PCI Bridge structure. There
are two types of PCI Express Port: the Root Port and the Switch
Port. The Root Port originates a PCI Express link from a PCI Express
Root Complex and the Switch Port connects PCI Express links to
internal logical PCI buses.



#########################################################################################
lspci -mm		# Produce machine-readable output (single -m for an obsolete format)
lspci -t		# Show bus tree
lspci -k		# Show kernel drivers handling each device
#########################################################################################
lspci -x		# Show hex-dump of the standard part of the config space
lspci -xxx		# Show hex-dump of the whole config space (dangerous; root only)
lspci -xxxx		# Show hex-dump of the 4096-byte extended config space (root only)
lspci -b		# Bus-centric view (addresses and IRQs as seen by the bus)
lspci -D		# Always show domain numbers
#########################################################################################
Resolving of device IDs to names:
#########################################################################################
lspci -n		# Show numeric IDs
lspci -nn		# Show both textual and numeric IDs (names & numbers)
lspci -q		# Query the PCI ID database for unknown IDs via DNS
lspci -qq		# As above, but re-query locally cached entries
lspci -Q		# Query the PCI ID database for all IDs via DNS
#########################################################################################


lsdev










#######################################################
Load settings from all system configuration files.
#######################################################
cat /run/sysctl.d/*.conf
cat /etc/sysctl.d/*.conf
cat /usr/local/lib/sysctl.d/*.conf
cat /usr/lib/sysctl.d/*.conf
cat /lib/sysctl.d/*.conf
cat /etc/sysctl.conf
#######################################################
/sbin/sysctl -a
/sbin/sysctl -n kernel.hostname
/sbin/sysctl -w kernel.domainname="example.com"
/sbin/sysctl -p /etc/sysctl.conf					# loads setting from /etc/sysctl.conf and modifies kernel parameters at runtime
/sbin/sysctl -a --pattern forward
/sbin/sysctl -a --pattern forward$
/sbin/sysctl -a --pattern 'net.ipv4.conf.(eth|wlan)0.arp'
/sbin/sysctl --system --pattern '^net.ipv6'
#######################################################
sysctl fs.file-max
sysctl fs.file-max=102400
cat /etc/sysctl.conf


cat /proc/sys/net/ipv4/ip_forward  # Check IP forward 0=off, 1=on


edit /etc/sysctl.conf with:
net.ipv4.ip_forward = 1


icmp_ignore_bogus_error_responses







/etc/lilo.conf
/sbin/lilo














shopt -p			# print each shell option with an indication of its status
shopt -s			# set
shopt -u			# unset


shopt -u autocd
shopt -u cdable_vars
shopt -u cdspell
shopt -u checkhash
shopt -u checkjobs
shopt -s checkwinsize
shopt -s cmdhist
shopt -u compat31
shopt -u compat32
shopt -u compat40
shopt -u compat41
shopt -u compat42
shopt -u compat43
shopt -s complete_fullquote
shopt -u direxpand
shopt -u dirspell
shopt -u dotglob
shopt -u execfail
shopt -s expand_aliases
shopt -u extdebug
shopt -s extglob
shopt -s extquote
shopt -u failglob
shopt -s force_fignore
shopt -u globasciiranges
shopt -u globstar
shopt -u gnu_errfmt
shopt -s histappend
shopt -u histreedit
shopt -u histverify
shopt -u hostcomplete
shopt -u huponexit
shopt -u inherit_errexit
shopt -s interactive_comments
shopt -u lastpipe
shopt -u lithist
shopt -u login_shell
shopt -u mailwarn
shopt -u no_empty_cmd_completion
shopt -u nocaseglob
shopt -u nocasematch
shopt -u nullglob
shopt -s progcomp
shopt -s promptvars
shopt -u restricted_shell
shopt -u shift_verbose
shopt -s sourcepath
shopt -u xpg_echo















set | grep $USER                   # List the current environment


whatis grep                        # Display a short info on the command or word 
whereis java                       # Search path and standard directories for word 
setenv varname value               # Set env. variable varname to value (csh/tcsh) 
export varname="value"             # set env. variable varname to value (sh/ksh/bash) 
MYVAR=`date`
MYVAR=$(date)

echo ${MYVAR,,}			# Print a variable (string) in lowercase
echo ${MYVAR:+message}
echo ${MYVAR:-message} If variable exists and is not null, print its value, otherwise print a message

set ${MYVAR:=value}			Set a variable, if it is not already set
MYVAR=${MYVAR:-value}		

MYVAR=$((MYVAR+1))
((MYVAR=MYVAR+1))
((MYVAR+=1))
((MYVAR++))
let "MYVAR=MYVAR+1"
let "MYVAR+=1"
let MYVAR++
MYVAR=`expr $MYVAR + 1` Increment a numeric variable



`${name[0]}'


${+name}		## If name is the name of a set parameter `1' is  substituted,
				## otherwise `0' is substituted. 	


watch=('^(pws|barts)')

>>| 
>>! 		## file is created if it does not exist


{varid}>&-

{myfd}>&-			## used to close a file descriptor opened


date >foo | cat						## writes the date to the file `foo', and also pipes it to cat.

sort <f{oo,ubar}




{ cat file } >file >file2			## multios are spawned after the cat process is forked from the parent shell
									## so the parent shell does not wait for the multios to finish writing data.





%<string<
%>string>
%[xstring]
`%8<..<%/'
`print   -P "%<\\\\<<..."'


%~     As %d and %/, but if the current working  directory


`!!:1'			## always refers to the first word of the previous command,
`!!$'			## always refers to the last word of the previous command.


`^foo^bar'
`!!:s^foo^bar^'


!?str[?]

 %      The word matched by (the most recent) ?str search



`x-$'
`<(list)'
`>(list)'
`=(list)'




paste <(cut -f1 file1) <(cut -f3 file2) | tee >(process1) >(process2) >/dev/null

       cuts  fields  1 and 3 from the files file1 and file2 respectively,
       pastes the  results  together,  and  sends  it  to  the  processes
       process1 and process2.




$(<arg) which				## treats arg as a file name and replaces it with the file's contents.


(mycmd =(myoutput)) &!		## as  the  forked  subshell will wait for the command to finish then remove the temporary file.



{ paste <(cut -f1 file1) <(cut -f3 file2) } > >(process)


The temporary file created by the process substitution will be deleted when the function exits.



paste <(cut -f1 file1) <(cut -f3 file2) |
              tee >(process1) >(process2) >/dev/null




[[ ( -f foo || -f bar ) && $report = y* ]] && print File exists




! exp						## true if exp is false.



exp1 && exp2				## true if exp1 and exp2 are both true.
string != pattern			## true if string does not match pattern.

string =~ regexp			## true  if  string matches the regular expression regexp.



if [ -z "$PS1" ]; then
  exit
fi







export                 PATH=/usr/local/bin:/usr/bin:/bin:/usr/lo‐
cal/games:/sbin:/usr/sbin:/usr/games:/usr/share/games

apt-config dump




apt-get dselect-upgrade



dpkg --print-architecture
dpkg --print-foreign-architectures


 /usr/share/lintian/checks
           Scripts that check aspects of a package.

       /usr/share/lintian/collection
           Scripts that collect information about a package and store it for use by the check scripts.

       /usr/share/lintian/data
           Supporting data used by Lintian checks and for output formatting.

       /usr/share/lintian/lib
           Utility scripts used by the other lintian scripts.


Lintian looks for its configuration file in the following locations:

       ·   The argument given to --cfg

       ·   $LINTIAN_CFG

       ·   $XDG_CONFIG_HOME/lintian/lintianrc

       ·   $HOME/.lintianrc

           Deprecated in Lintian/2.5.12 and newer (use the XDG based variant above)

       ·   XGD_DIR/lintian/lintianrc

           Where XGD_DIR is a directories listed in $XDG_CONFIG_DIRS (or /etc/xdg if $XDG_CONFIG_DIRS is unset).

       ·   /etc/lintianrc




dpkg-deb -b || --build <.deb>    	 ## Build a deb package.
dpkg-deb -c || --contents <.deb>     ## List contents of a deb package.
dpkg-deb -e || --control <.deb>      ## Extract control-information from a package.
dpkg-deb -x || --extract <.deb>      ## Extract the files contained by package.
dpkg-deb -X || --vextract <.deb>     ## Extract and display the filenames contained by a package.
dpkg-deb -f || --field  <.deb>       ## Display control field(s) of a package.
dpkg-deb --ctrl-tarfile <.deb>       ## Output the control tar-file contained in a Debian package.
dpkg-deb --fsys-tarfile <.deb>       ## Output the filesystem tar-file contained by a Debian package.
dpkg-deb -I || --info <.deb>         ## Show information about a package.




dpkg-query 

dpkg-query -l || --list <.deb>           ## List packages matching given pattern.
dpkg-query -s || --status <.deb>                 ## Report status of specified package.
dpkg-query -L || --listfiles <.deb>              ## List files installed to your system from package-name.
dpkg-query -S || --search      ## Search for a filename from installed packages.
dpkg-query -p || --print-avail <name>            ## Display details about package-name, as found in



dpkg-query --show --showformat='${Package} '



/var/lib/dpkg/available		# Users of APT-based frontends should use apt-cache show package-name instead.
/var/cache/debconf/config.dat



dpkg-depcheck, dpkg-genbuilddeps
debuild:
dpkg-buildpackage


lintian,

debsign:
debrsign
debcheckout
cvs-debuild
cowpoke:


dh_builddeb
dh_installdeb










debuild-pbuilder







dscextract:


dscverify


The /etc/bashrc and ~/.bashrc files are used to configure non-login shell sessions,


When a login shell is run, the bash shell program searches for
configuration files in the following order: 
~/.bash_profile
~/.bash_login
~/.profile





uname -s       # Kernel Name
uname -m       # Machine Name
uname –r		# Kernel Release
uname -p		# return information about your CPU
uname -i		# Hardware platform information
uname -o		# returns the OS name





tzselect
tzconfig						## Set the timezone, stored in /etc/timezone
dpkg-reconfigure tzdata

echo "en_US ISO-8859-1" >> /etc/locale.gen
locale-gen
cp /usr/share/zoneinfo/UTC /etc/localtime


IDE drive partition limit: 63
SCSI drive partition limit: 15

MBR holds the partition table and bootstrap code
at the first 512kb of the disks
first sector of the disks


/etc/inittab:						# directs boot process after kernel has loaded
id:runlevel:action:process





partition types:

Primary - only 4 can exists
Extended - only 1 can exist. and is a container for logical partitions
Logical


Logical partitions are numbered 5 and up 
and they reside in an extended partition
and extended partitions have a number between 1 and 4







LBA (Logical Block Adressing)


sndconfig           # used to reconfigure sound drivers





single user mode:
1/s/S


hotplug
usbmgr





Both the :exit and :wq commands will save any changes to the
current file and then close the vi editor.


The d$ command deletes from the insertion point to the end of the line.
The text is saved in a memory buffer.




a hard link, the link file and the target file share the same inode.





The LC_CTYPE environment variable specifies the default character
type and encoding for your Linux system.




Stage 2 presents a graphical menu on the screen that allows the user to
select the kernel image that should be loaded.



The /etc/inittab file is used to determine what happens when a user
presses CTRL - ALT - DEL .


The init q command will tell init that changes have been made to
/etc/inittab and that it needs to re-read its configuration.



Linux distributions that use System V init scripts store them in the
/etc/rc.d/init.d directory.

#####################################################################################################
shutdown -f			# skip fsck on next reboot
shutdown -F         # force fsck on next reboot
shutdown -k         # send warning of impending shutdown, but dont shutdown
shutdown -t			# wait X seconds before shutting down
shutdown −h now "Warning system malfunction, self−destruct imminent"
shutdown −r now "Warning system rebooting, all files will be destroyed"
+m – m minutes in the future
–P – powers off 
#####################################################################################################



dpkg-scanpackages




Globally Unique Identifier (GUID) Partition Table (GPT)


#####################################################################################################
?		# Matched at most once.
*		# The preceding item will be matched zero or more times.
+		# The preceding item will be matched one or more times.
{n}		# The preceding item is matched exactly n times.
{n,}	# The preceding item is matched n or more times.
{,m}	# The preceding item is matched at most m times.  This is a GNU extension.
{n,m}	# The preceding item is matched at least n times, but not more than m times..*	    # match zero or more characters 
[\^$.|?*+()                          # special characters any other will match themselves 
\                                    # escapes special characters and treat as literal 
*                                    # repeat the previous item zero or more times 
.                                    # single character except line break characters 
.*                                   # match zero or more characters 
^                                    # match at the start of a line/string 
$                                    # match at the end of a line/string 
.$                                   # match a single character at the end of line/string 
^ $                                  # match line with a single space 
^[A‐Z]                               # match any line beginning with any char from A to Z 

#### ================== Comparison operators: ======================= ####
 ||^ $|| 					  	   ||
 ||^[A‐Z]|| 					   ||
 || ? || 	   ||
 || + ||    ||
 ||  {n}|| 			   ||
 || {n,}|| 				  	   ||
 || {,m}|| 		       ||
 ||{n,m}|| 					   ||
 || ===================================================================||
####														  		  ####

echo "||  ||"
echo "[+]=====================================================================================[+]"
echo "|| <command>; ||"				## command separator
echo "|| (.) ||"				## execute commands in subshell
echo "|| {.} ||"			## execute commands in current shell
echo "|| ## ||"				## Comment section out of the code
echo "||$var||"				## Define Variable
echo "|| & ||"				## execute in the background
echo "||‘ ‘||"				## quote all characters in a string
echo "||" "||"				## similar to ' ‘ but allow substitution
echo "                               # 
                               # 
#                               # comments
$var                               # variable
&                               # 
                               # 
                               # quote all characters in a string
“                               # as ‘ but allow substitution
echo "[+]=====================================================================================[+]"

Summarize the structure of regular expressions:
Regular expressions are strings that describe other strings.

Explain the purpose of pipes. Pipes tie programs together by feeding the standard output
from the fi rst program into the second program’s standard input.


==========================================================================================
 Range Expression:		a[2-4]z	==>	a2z,a3z,a4z
 Single Character:			a.z	==> a2z,abz,aqz
 Start Line:				^bc ==> abc,bbc,dbc
 End Line:					ab$ ==>	abc,abe,ab9		
 Repetition operator: 		ab* ==> ab0,ab2			## denotes zero or more occurances
					 		ab+ ==> ab1,ab2
					 		ab? ==> ab1				## zero or one match

The vertical bar	 	  ( | ) ==> car|truck		## Multiple Possible Strings




grep eth[01] /etc/*
grep -E “(twain\.example\.com|bronto\.pangaea\.edu).*127” /etc/*
==========================================================================================


$0 		the name of the script, 
$1 		first parameter to the script, 
$2 		second parameter



#### ================== Comparison operators: ======================= ####
 || =~ || Matching regular expression. [regex]					  	   ||
 || >| || Send output (overwrite) reguardless of shell’s noclobber	   ||
 || !~ || Not matching regular expression. [regex]					   ||
 ||  = || Equal to. [number, size, percent, string, string list]	   ||
 || != || Not equal to. [number, size, percent, string, string_list]   ||
 || >= || Greater than or equal to. [number, size, percent]			   ||
 ||  > || Greater than. [number, size, percent]					  	   ||
 || <= || Less than or equal to. [number, size, percent]		       ||
 || <  || Less than. [number, size, percent]						   ||
 || ===================================================================||
####														  		  ####

egrep ’(yes|no)’ ‘cat list‘
egrep ’(yes|no)’ $(cat list)
egrep ’(yes|no)’ $(< list)

cp {*.doc,*.pdf} ~


$?			# return code from last program
$IFS		# Internal File Separator
IFS=’ chars ’	## Input field separators; default is space, tab, and newline.


PROMPT_COMMAND= command
PS1= string
PS2= string
PS3= string
PS4= string

If set, Bash executes this command each time before printing the
primar y prompt.
Primar y prompt string; default is $ .
Secondar y prompt (used in multiline commands); default is > .
Pr ompt string in select loops; default is #? .
Pr ompt string for execution trace ( bash -x or set -x ); default
is + .


 || cmd1 ; cmd2	|| 			   ||
 ||{ cmd1 ; cmd2 ; } || 			   ||
 ||  || 			   ||
 ||  || 			   ||
 ||  || 			   ||
 || 



( cmd1 ; cmd2 )
cmd1 | cmd2
cmd1 ‘ cmd2 ‘
cmd1 $( cmd2 )
cmd $(( expression ))




Command sequence; execute multiple cmds on the same line.
Execute commands as a group in the current shell.
Execute commands as a group in a subshell.
Pipe; use output from cmd1 as input to cmd2.
Command substitution; use cmd2 output as arguments to cmd1.
POSIX shell command substitution; nesting is allowed.
POSIX shell arithmetic substitution. Use the result of expression as argument to cmd.
#####################################################################################################
___________________________________________
• [:upper:] || uppercase letters
• [:lower:] || lowercase letters
• [:alpha:] || alphabetic (letters) meaning upper+lower (both uppercase and lowercase letters)
• [:digit:] || numbers in decimal, 0 to 9
• [:alnum:] || alphanumeric meaning alpha+digits (any uppercase or lowercase letters or any decimal digits)
• [:space:] || whitespace meaning spaces, tabs, newlines and similar
• [:graph:] || graphically printable characters excluding space
• [:print:] || printable characters including space
• [:punct:] || punctuation characters meaning graphical characters minus alpha and digits
• [:cntrl:] || control characters meaning non−printable characters
• [:xdigit:]|| characters that are hexadecimal digits.
=========================================================================================================

#####################################################################################################
cat -n                          Numbering lines
cat -b                          Numbering non-blank lines
wc -c                           Counting chars
wc -w                           Counting words
wc -l                           Counting lines
head                            Printing the first lines
tail                            Printing the last lines
=========================================================================================================

nl -v1 poop.txt
nl -l1 poop.txt
nl -i2 poop.txt
nl -s. poop.txt
nl -s. -w7 poop.txt
nl -s'.) ' poop.txt

=========================================================================================================

=========================================================================================================
uniq		## outputs file without duplicate lines from input file
expand -t 8		## set tabs every 8 columns
join file1 file2
uniq        ## Make duplicate lines unique
uniq -d     ## Print duplicated lines of input
uniq -u     ## Remove all duplicated lines
uniq -D     ## print all duplicate lines
uniq -c		## --count prefix lines by the number of occurrences
=========================================================================================================
To print only lines that never repeat in the input, use the -u option:
sort file | uniq -u

To print only lines that do repeat in the input, use the -d option:
sort file | uniq -d



#####################################################################################################



echo {1..9} | xargs -n3

1 2 3
4 5 6
7 8 9



find / -type f | xargs -n 1 grep -H linux		## grep a long list of files, one by one, for the word “linux”:


touch file{1..9}.jpg
touch file{1..9}.txt









cp myfile.{txt,bak}

[!kxw]              # Matches any character except k, x, or w





vi Editor

Command mode
Ex mode
Insert mode

Vi yank (term) 	yank is used for referrencing copy in Vi 



             ^
             k              Hint:  The h key is at the left and moves left.
       < h       l >               The l key is at the right and moves right.
             j                     The j key looks like a down arrow.
             v
----------------------------
| k (up)    j (down)     |
----------------------------
| h (left)  l (right)    |
----------------------------


Press |<ESC>| To place you in Normal mode
Press | :wq | To save a file and exit.
Press |  A  | Append text.
Press | dd  | Delete current line
Press | dw  | To delete a word.


?<word>	|| Searches backward for the word goodbye.

$	|| Move to end of line
3dd	|| Deletes (d) three lines (3d), beginning at the current line.
3dw	|| Deletes (d) the next three words (3w).
ZZ	|| Save the current changes to the fi le and exit from vi.


:w		|| Save the current file but continue editing.
:!pwd	|| Current directory
:!date	|| Current date and time


Ctrl+f	|| Page ahead, one page at a time.
Ctrl+b	|| Page back, one page at a time.
Ctrl+d	|| Page ahead one-half page at a time.
Ctrl+u	|| Page back one-half page at a time.


yy	|| Copy current line
yyp	|| Duplicate current line
G	|| Move to end of file
1G	|| Move to beginning of file i.e. to line 1

Press |  x  | To delete the character under the cursor.
Press |  i  | To insert text.
Press | :q! | To trash all changes.

Press | dd  | To delete a line
Press | 2dd | To delete 2 lines
Press | 7l  | To move curser left 7 characters
Press | ZZ  | To Exit Saving Changes
Press | d$  | To deletes from the insertion point to the end of the line.
Press |  o  | To open text
Press |  G  | To go to a line
Press | 1G  | Move to the first line of the file
Press | yy  | Copy line (word) after cursor
Press |  P  | Paste after cursor
Press |  u  | Undo last modification
Press |  U  | Undo all changes to current line
Press |   | To 
Press |   | To 
Press |   | To 
Press |   | To 

n       Search for next instance of string
N       Search for previous instance of string
{       Move a paragraph back
}       Move a paragraph forward
       
nG       Move to the n th line of the file
G       Move to the last line of the file
:%s/OLD/NEW/g       Search and replace every occurrence
dd (dw)       Cut current line (word)
D       Cut to the end of the line
x       Delete (cut) character
 (yw)       
P       Paste after cursor
u       Undo last modification
U       Undo all changes to current line

l, inserts text @ beginning of current line
a, inserts text after the curser



Ctrl+U moves up half a screen
Ctrl+D moves down half a screen
Ctrl+F moves down almost a full screen
Ctrl+E scrolls down 1 line @ a time
Ctrl+Y scrolls up 1 line @ a time





i   type inserted text   <ESC>         insert before the cursor
A   type appended text   <ESC>         append after the line



Press | :q! | to discard all changes to the file since the last save and exit the editor.









## ============================================================================= ##
top

m			# 
## ============================================================================= ##
top –p pid		# to monitor specific process, can specify up to for PID
top –n iter		# top displays certain number of updates (iterations) and stops
top –b 			# batch mode, top doesn't use the normal screen– update cmds
## ============================================================================= ##

top –bi -n 5 -d 1 > file1		## -b (batch) 
								## -n option, with its argument, indicates five iterations
								## -i eliminates idle processes
								## -d option indicates a one-second interval
## ============================================================================= ##
		top when running cmds
## ============================================================================= ##
r	# changes priority with this cmd, asks for PID number
s 	# displays update rate
P	# sort by CPU usages
s	# update rate
M	# sort by memory usage
## ============================================================================= ##








## ============================================================================= ##
Globally Unique Identifier (GUID) Partition Table (GPT)
gdisk 
gdisk -l


gdisk --list
gdisk --machine

parted print devices
parted print free
parted print list
parted print all
## ============================================================================= ##




## ============================================================================= ##
mkswap 

mkswap -p		## Specify the page size (in bytes) to use.
mkswap -L		## Specify a label for the device,
mkswap -c		## Check the device (if it is a block device) for bad blocks before creating the swap  area.
mkswap -U		## specify the uuid

mkswap -L label /dev/sda

## ============================================================================= ##






mkswap /dev/hda5
Setting up swapspace version 1, size = 139792384 bytes






touch -m		## change only the modification time
touch -a		## change only the access time
touch -d		## parse STRING and use it instead of current time
touch -r		## use files times instead of current time


export		## sets environmental variable to be loaded into system
exec		## run external program that you can specify











mkdir /tmp/poo || echo "oops"      # the || is an OR  logical operator
"!$"                               # last arguement of previous commands
$PS1                               # bash prompt variable















## =================================================== ##
#!/bin/sh
################################################################################
## first convert each sequence of punctuation and blank characters to single  ##
## newline.  That puts each “word” on a line by itself.  Next it maps		  ##
## all uppercase characters to lower case, and finally it runs ‘uniq’		  ##
## with the ‘-d’ option to print out only the words that were repeated.		  ##
################################################################################

          cat -- "$@" \
            | tr -s '[:punct:][:blank:]' '[\n*]' \
            | tr '[:upper:]' '[:lower:]' \
            | uniq -d

## =================================================== ##









2>             # direct standard error to a file


newaliases					# Forces the mail server to read the /etc/aliases or /etc/mail/aliases file after it is changed










## ============================================================================= ##
lsof -c bash             # open files in bash
lsof -i					 # list all open net connections
lsof -a -c bash -u root	 # open files by bash as root user
## ============================================================================= ##




## =====================================================================
netstat -in						## Stat of interfaces using numeric hosts
netstat -i --numeric-host		## 
## =====================================================================
netstat -st						## Statistics of the tcp protocol
netstat ‐nat					## show all connections with IPs
## ============================================================================= ##
netstat --fib					## display Forwarding Information Base (default)
netstat --cache					## display routing cache instead of FIB
netstat --context				## display SELinux security context for sockets







unix  2      [ ]         DGRAM                    19217    /run/user/134/systemd/notify
unix  2      [ ]         DGRAM                    19490    /run/user/1000/systemd/notify
unix  3      [ ]         DGRAM                    9800     /run/systemd/notify
unix  2      [ ]         DGRAM                    9802     /run/systemd/cgroups-agent
unix  18     [ ]         DGRAM                    11126    /run/systemd/journal/dev-log
unix  7      [ ]         DGRAM                    11133    /run/systemd/journal/socket
unix  2      [ ]         DGRAM                    9957     /run/systemd/journal/syslog
unix  2      [ ]         DGRAM                    15941    /var/spool/postfix/dev/log









ar xv
tar zxvf





xf86config
XF86setup







## ============================================================================= ##
OHCI - open host controller interface
UHCI - universal host controller interfaces
EHCI - enhanced host controller interfaces
## ============================================================================= ##








lpc status
lprm
/etc/cron.deny






/etc/ssh/_known_hosts





echo "## ============================================================================== ##"
echo -e "\t\t\t[+] 



e2fsck
fsck.ext3


## ============================================================================= ##

file -L "${path}" | grep -q 'dynamically linked'

ldd /usr/bin/init | grep libwrap
ldd /usr/sbin/xinetd
ldd $file | grep -c libwrap


echo "verify if xinetd includes a TCP wrapper"


strings /sbin/portmap | egrep "hosts.deny|hosts.allow|libwrap"
strings /usr/sbin/rpc.rquotad | egrep "hosts.deny|hosts.allow|libwrap"
ldd /usr/sbin/rpc.rquotad | grep libwrap

echo "## ============================================================================== ##"
echo -e "\t\t[+] check if xinetd is enabled and running"
chkconfig --list xinetd


echo "check status of xinetd"


/etc/init.d/xinetd status


echo "## ============================================================================== ##"
echo -e "\t\t[+] check which Unix services are active and controlled by xinetd"
chkconfig --list | awk '/xinetd based services/,/""/'
echo "## ============================================================================== ##"
echo -e "\t\t[+] list of only active services for which xinetd monitors the ports"
chkconfig --list | awk '/xinetd based services/,/""/' | grep -v off


which rpm | xargs ldd -v

## ============================================================================= ##


objdump -p /path/to/program | grep NEEDED




















/sbin/init			# started at boot time by the sysV init


systemd unit=rescue.target


udev /dev devtmpfs


|| ESC-l ||	Move cursor right one character.
|| ESC-h ||	Move cursor left one character.
|| ESC-w ||	Move cursor right one word.
|| ESC-b ||	Move cursor left one word.
|| ESC-0 ||	Move cursor to start of line.
|| ESC-$ ||	Move cursor to end of line.


ESC-x ... Delete char under cursor.
 ctrl-BACKSPACE   ESC-BACKSPACE ........... Delete word to left of cursor.
 ctrl-DELETE .... ESC-DELETE .... ESC-X ... Delete word under cursor.


Esc+U	## converts word curser is currently hovering overs first letter to capital



___________________________________
||Action|| Keyboard shortcut ||
==================================
|| DEL  ||  Scroll backward one screenful.
|| SPC  ||  Scroll forward one screenful.
|| Home ||  Go to the beginning of this node.
|| End  ||  Go to the end of this node.
=====================================================
|| TAB  || Skip to the next hypertext link.
|| RET  || Follow the hypertext link under the cursor.
=====================================================
|| l ||  Go back to the last node seen in this window.
=====================================================
##########################################################################

⌘

__________________________________
|| Action || Keyboard shortcut ||
==================================
|| Ctrl+Alt <-	|| Move to workspace left
|| Ctrl+Alt ->	|| Move to workspace right
=====================================================
|| Super+A || Show the list of applications.
|| Super+Page Up ||	Switch between workspaces
|| Super+Page Down || Switch previous workstation
|| Super+Page Up	|| above to workspace above
|| Super+Page Down	|| Move to workspace below
=====================================================
|| Alt+F6 || Cycle through windows in the same application. Hold down the || Alt key and press F6 until the window you want is highlighted, then release || Alt. This is similar to the || Alt+` feature.
|| Alt+Esc || Cycle through all open windows on a workspace.
=====================================================
##########################################################################

__________________________________
|| Action || Keyboard shortcut ||
==================================
|| Super+L   || Lock screen
|| Super+M   || Show the message tray
|| Super+N   || Focus the active notification
|| Super+A   || Show all applications
|| Super+F10 || Open the application menu
===============================================
|| Ctrl+Alt+Delete || Log out
===============================================
|| Ctrl+Alt+Tab || Give keyboard focus to the top bar.
				|| In the Activities overview,
===============================================

__________________________________
|| Action || Keyboard shortcut ||
==================================
|| Shift+Ctrl+T || New Tab
|| Shift+Ctrl+N || New Window
|| Shift+Ctrl+W || Close Tab
|| Shift+Ctrl+Q || Close Window
========================================================
|| Ctrl++ || Zoom In
|| Ctrl+- || Zoom Out
|| Ctrl+0 || Normal Size
========================================================


__________________________________
|| Action || Keyboard shortcut ||
==================================
|| Ctrl+Page Up 	|| Switch to Previous Tab
|| Ctrl+Page Down 	|| Switch to Next Tab
|| Shift+Ctrl+Up 	|| Scroll up by one line
|| Shift+Ctrl+Down 	|| Scroll down by one line
=====================================================
|| Shift+Ctrl+Page Up 	|| Move Tab to the Left
|| Shift+Ctrl+Page Down ||	Move Tab to the Right
=====================================================




__________________________________
|| Action || Keyboard shortcut ||
==================================
|| Ctrl+W || Erase a word
|| Ctrl+U || Erase a line
|| Ctrl+A || Move to the start of the line
|| Ctrl+E || Move to the end of the line
|| Ctrl+B || Move back one character
|| Alt+B  || Move back one word
|| Ctrl+F || Move forward one character
|| Alt+F  || Move forward one word
=====================================================
|| Ctrl+u || Delete from the cursor to the beginning of the line.
|| Ctrl+K || Delete from the cursor to the end of the line.
|| Ctrl+W || Delete from the cursor to the start of the word.
=====================================================================
|| Esc+Del 		 || Delete previous word
|| Esc+Backspace || Delete previous word
=====================================================================
|| Ctrl+Y || Pastes text from the clipboard.
|| Ctrl+L || Clear the screen leaving the current line at the top of the screen.
|| Ctrl+R || Reverse incremental search of history
|| Alt+P  || Reverse non-incremental search of history
=====================================================================
|| Ctrl+Alt+Shift+R || Start and end screencast recording.
=====================================================================
|| Alt+F2	|| Show the run command prompt
|| Alt+F1	|| Show the activities overview
|| Alt+F10	|| Toggle maximization state
=====================================================================



||  ||	
||  ||	
||  ||	
||  ||	

||  ||	
||  ||	
||  ||	
||  ||	
||  ||	
||  ||	
||  ||	
||  ||	





## ============================================================================= ##
Ctrl + P - previous line
Ctrl + K - kill to end of line
Ctrl + Y - paste (yank) text
## ============================================================================= ##
CTRL + A - Start of the line, and 
CTRL + E - End of the line.
CTRL + K - Cut or delete what is currently in front of the cursor.
CTRL + Y - Paste the last thing you deleted
CTRL + W - cut or delete the entire line that has being typed.
## ============================================================================= ##
Ctrl + C – halts the current command
Ctrl + Z – stops the current command, resume with fg in the foreground or bg in the background
Ctrl + D – log out of current session, similar to exit
Ctrl + W – erases one word in the current line
Ctrl + U – erases the whole line
Ctrl + R – type to bring up a recent command
## ============================================================================= ##
Ctrl + R - Backwards search
Ctrl + S - Searches Forwards
Ctrl + G - terminates a search
Ctrl + A - moves curser to start
Ctrl + E - moves curser to the end
Ctrl + B - 
Ctrl + F - moves one character
Ctrl + D - Deletes character
Ctrl + K - deletes text from curser to end
Ctrl + X - Deletes text from cursor the beginning of line
Ctrl + L - Clear terminal
Ctrl + U - Deletes the lines
## ============================================================================= ##
Ctrl + A - moves curser to start
Ctrl + E - moves curser to the end
Ctrl + L - Clear terminal
## ============================================================================= ##




		   Emacs Standard bindings
   ___________________________________________
	 [+] "C-@"  || set-mark				|| 
	 [+] "C-A"  || beginning-of-line	|| 
	 [+] "C-B"  || backward-char		|| 
	 [+] "C-D"  || delete-char			|| 
	 [+] "C-E"  || end-of-line			|| 
	 [+] "C-F"  || forward-char			|| 
	 [+] "C-G"  || abort				|| 
	 [+] "C-H"  || backward-delete-char	|| 
	 [+] "C-I"  || complete				|| 
	 [+] "C-J"  || accept-line			|| 
	 [+] "C-K"  || kill-line			|| 
	 [+] "C-L"  || clear-screen			|| 
	 [+] "C-M"  || accept-line			|| 
	 [+] "C-N"  || next-history			|| 
	 [+] "C-P"  || previous-history		|| 
	 [+] "C-Q"  || quoted-insert		|| 
	 [+] "C-R"  || reverse-search-hist  || 
	 [+] "C-S"  || forward-search-hist  || 
	 [+] "C-T"  || transpose-chars		|| 
	 [+] "C-U"  || unix-line-discard	|| 
	 [+] "C-V"  || quoted-insert		|| 
	 [+] "C-W"  || unix-word-rubout		|| 
	 [+] "C-Y"  || yank					|| 
	 [+] "C-]"  || character-search		|| 
	 [+] "C-_"  || undo					|| 
  ================================================
	 [+] "0" to "9" || self-insert			|| 
	 [+] ":" to "~"	|| self-insert			|| 
	 [+] "C-?"  	|| backward-delete-char	||
  ================================================




  ________________________________________________

 ~-~--~-~-~-~- Emacs Meta bindings ~-~--~-~-~-~-~-~-
  ________________________________________________
	 [+] "M-C-G"  || abort					|| 
	 [+] "M-C-H"  || backward-kill-word		|| 
	 [+] "M-C-I"  || tab-insert				|| 
	 [+] "M-C-J"  || vi-editing-mode		|| 
	 [+] "M-C-M"  || vi-editing-mode		|| 
	 [+] "M-C-R"  || revert-line			|| 
	 [+] "M-C-Y"  || yank-nth-arg			|| 
	 [+] "M-C-["  || complete				|| 
	 [+] "M-C-]"  || backward-char-search	|| 
	 [+] "M-space"|| set-mark				|| 
	 [+] "M-#"    || insert-comment			|| 
	 [+] "M-&"    || tilde-expand			|| 
	 [+] "M-*"    || insert-completions		|| 
	 [+] "M--"    || digit-argument			||
	 [+] "M-."    || yank-last-arg			|| 
	 [+] "M-0"    || digit-argument			|| 
	 [+] "M-1"    || digit-argument			|| 
	 [+] "M-2"    || digit-argument			|| 
	 [+] "M-3"    || digit-argument			|| 
	 [+] "M-4"    || digit-argument			|| 
	 [+] "M-5"    || digit-argument			|| 
	 [+] "M-6"    || digit-argument			|| 
	 [+] "M-7"    || digit-argument			|| 
	 [+] "M-8"    || digit-argument			|| 
	 [+] "M-9"    || digit-argument			|| 
	 [+] "M-<"    || beginning-of-history	|| 
	 [+] "M-="    || possible-completions	|| 
	 [+] "M->"    || end-of-history			|| 
	 [+] "M-?"    || possible-completions	|| llL,
	 [+] "M-B"    || backward-word			||/~/
	 [+] "M-C"    || capitalize-word		||~/
	 [+] "M-D"   /~/ kill-word				/~/ 
	 [+] "M-F"  /~/  forward-word		   /~/| 
	 [+] "M-L"  \~\  downcase-word		   \~\/, 
				 \~\________________________\~\ =======================
	 [+] "M-N"   /!/ non-incremental-forward-search-history		|| 
	 [+]_"M-P"-~{&} non-incremental-reverse-search-history		|| 
	  <<~-~-~-~-~\!\~_~_~_~_~_~_~___________ /~/=======================
	 [+] "M-R"   /~/)| revert-line		 	/~/| ,;->
	 [+] "M-T"  /~/) | transpose-words		|\ _~_.->
	 [+] "M-U" /~/) || upcase-word			||	   
	 [+] "M-Y"(~/)  || yank-pop				||
			  V!V
  ===============================================
	 [+] "M-\"  || delete-horizontal-space	|| 
	 [+] "M-~"  || tilde-expand				|| 
	 [+] "M-C-?"|| backward-kill-word		|| 
	 [+] "M-_"  || yank-last-arg			||
  ===============================================



  =======================================================
             Emacs Control-X bindings
  =======================================================
	 [+] "C-XC-G"   || abort						|| 
	 [+] "C-XC-R"   || re-read-init-file			|| 
	 [+] "C-XC-U"   || undo							|| 
	 [+] "C-XC-X"   || exchange-point-and-mark		|| 
	 [+] "C-X("		|| start-kbd-macro				|| 
	 [+] "C-X)"		|| end-kbd-macro				|| 
	 [+] "C-XE"		|| call-last-kbd-macro			|| 
	 [+] "C-XC-?"   || backward-kill-line			||
  =======================================================

  			   ____________________
   		 ______| VI Mode bindings |______
           | VI Insert Mode functions |
  =================================================
	 [+] "C-D"  || vi-eof-maybe				|| 
	 [+] "C-H"  || backward-delete-char		|| 
	 [+] "C-I"  || complete					|| 
	 [+] "C-J"  || accept-line				|| 
	 [+] "C-M"  || accept-line				|| 
	 [+] "C-R"  || reverse-search-history	|| 
	 [+] "C-S"  || forward-search-history	|| 
	 [+] "C-T"  || transpose-chars			|| 
	 [+] "C-U"  || unix-line-discard		|| 
	 [+] "C-V"  || quoted-insert			|| 
	 [+] "C-W"  || unix-word-rubout			||
	 [+] "C-Y"  || yank						|| 
	 [+] "C-["  || vi-movement-mode			|| 
	 [+] "C-_"  || undo						|| 
	 [+] " "-"~"|| self-insert				|| 
	 [+] "C-?"  || backward-delete-char		||
  ===============================================


             VI Command Mode functions
   __________________________________________
	 [+] "C-D"  || vi-eof-maybe			|| 
	 [+] "C-E"  || emacs-editing-mode	|| 
	 [+] "C-G"  || abort				|| 
	 [+] "C-H"  || backward-char		|| 
	 [+] "C-J"  || accept-line			|| 
	 [+] "C-K"  || kill-line			|| 
	 [+] "C-L"  || clear-screen			|| 
	 [+] "C-M"  || accept-line			|| 
	 [+] "C-N"  || next-history			|| 
	 [+] "C-P"  || previous-history		|| 
	 [+] "C-Q"  || quoted-insert		|| 
	 [+] "C-R"  || reverse-search-hist  || 
	 [+] "C-S"  || forward-search-hist  || 
	 [+] "C-T"  || transpose-chars		|| 
	 [+] "C-U"  || unix-line-discard	|| 
	 [+] "C-V"  || quoted-insert		|| 
	 [+] "C-W"  || unix-word-rubout		|| 
	 [+] "C-Y"  || yank					|| 
	 [+] "C-_"  || vi-undo				|| 
	 [+] " "  	|| forward-char			|| 
	 [+] "#"  	|| insert-comment		|| 
	 [+] "$"	|| end-of-line			|| 
	 [+] "%"	|| vi-match				|| 
	 [+] "&"	|| vi-tilde-expand		||
  ===========================================
	 [+] "*"  || vi-complete		|| 
	 [+] "+"  || next-history		|| 
	 [+] ","  || vi-char-search		|| 
	 [+] "-"  || previous-history	|| 
	 [+] "."  || vi-redo			|| 
	 [+] "/"  || vi-search			|| 
	 [+] "0"  || beginning-of-line	|| 
	 [+] 1->9 || vi-arg-digit		|| 
	 [+] ";"  || vi-char-search		|| 
	 [+] "="  || vi-complete		|| 
	 [+] "?"  || vi-search			|| 
	 [+] "A"  || vi-append-eol		|| 
	 [+] "B"  || vi-prev-word		|| 
	 [+] "C"  || vi-change-to		|| 
	 [+] "D"  || vi-delete-to		|| 
	 [+] "E"  || vi-end-word		|| 
	 [+] "F"  || vi-char-search		|| 
	 [+] "G"  || vi-fetch-history	|| 
	 [+] "I"  || vi-insert-beg		|| 
	 [+] "N"  || vi-search-again	|| 
	 [+] "P"  || vi-put				|| 
	 [+] "R"  || vi-replace			|| 
	 [+] "S"  || vi-subst			|| 
	 [+] "T"  || vi-char-search		|| 
	 [+] "U"  || revert-line		|| 
	 [+] "W"  || vi-next-word		|| 
	 [+] "X"  || backward-del-char  || 
	 [+] "Y"  || vi-yank-to			||
	 [+] "\"  || vi-complete		|| 
	 [+] "^"  || vi-first-print		|| 
	 [+] "_"  || vi-yank-arg		|| 
	 [+] "`"  || vi-goto-mark		|| 
	 [+] "a"  || vi-append-mode		|| 
	 [+] "b"  || vi-prev-word		|| 
	 [+] "c"  || vi-change-to		|| 
	 [+] "d"  || vi-delete-to		|| 
	 [+] "e"  || vi-end-word		|| 
	 [+] "f"  || vi-char-search		|| 
	 [+] "h"  || backward-char		|| 
	 [+] "i"  || vi-insertion-mode	|| 
	 [+] "j"  || next-history		|| 
	 [+] "k"  || prev-history		|| 
	 [+] "l"  || forward-char		|| 
	 [+] "m"  || vi-set-mark		|| 
	 [+] "n"  || vi-search-again	|| 
	 [+] "p"  || vi-put				|| 
	 [+] "r"  || vi-change-char		|| 
	 [+] "s"  || vi-subst			|| 
	 [+] "t"  || vi-char-search		|| 
	 [+] "u"  || vi-undo			|| 
	 [+] "w"  || vi-next-word		|| 
	 [+] "x"  || vi-delete			|| 
	 [+] "y"  || vi-yank-to			|| 
	 [+] "|"  || vi-column			|| 
	 [+] "~"  || vi-change-case		||
   =======================================





=================================
 |!|	Killing and Yanking |!|
_|!|_______________________ |!|_______________________________________________________________________________________________________________-1
 [+] kill-line			 	|_| (C-k)   ||	## Kill the text from point to the end of the line.
 [+] backward-kill-line	    |(C-x Rubout)|	## Kill backward to the beginning of the line.
 [+] unix-line-discard		|| (C-u)   ||	## Kill backward from point to the beginning of the line.  The killed text is saved on the kill-ring.
 [+] kill-whole-line		||		   ||	## Kill all characters on the current line, no matter where point is.
 [+] kill-word			  	|| (M-d)   ||	## Kill from point the end of the current word, or if between words, to the end of the next word.  Word  boundaries  are the same as those used by forward-word.
 [+] backward-kill-word	    |(M-Rubout)||	## Kill the word behind point.  Word boundaries are the same as those used by backward-word.
 [+] unix-word-rubout	  	|| (C-w)   ||	## Kill the word behind point, using white space as a word boundary.  The killed text is saved on the kill-ring.
 [+] unix-filename-rubout	||		   || 	## Kill  the  word  behind  point, using white space and the slash character as the word boundaries.  The killed text isaved on the kill-ring.
 [+] delete-horizontal-space|| (M-\)   ||	## Delete all spaces and tabs around point.
 [+] kill-region			||		   ||	## Kill the text between the point and mark	(saved cursor position).  This text is referred to as the region.
 [+] copy-region-as-kill	||		   ||	## Copy the text in the region to the kill buffer.
 [+] copy-backward-word		||		   ||	## Copy the word before point to the kill buffer.  The word boundaries are the same as backward-word.
 [+] copy-forward-word		||		   ||	## Copy the word following point to the kill buffer.  The word boundaries are the same as forward-word.
 [+] yank					|| (C-y)   ||	## Yank the top of the kill ring into the buffer at point.
 [+] yank-pop				|| (M-y)   ||	## Rotate the kill ring, and yank the new top.  Only works following yank or yank-pop.
 [+] possible-completions	|| (M-?)   ||	## List  the  possible  completions  of the text before point.
 [+] insert-completions		|| (M-*)   ||	## Insert all completions of the text before point that would have been generated by possible-completions.
 [+] dump-functions			||		   ||	## Print all of the functions and their key bindings to the readline output stream.
 [+] dump-variables			||		   ||	## Print  all  of  the settable variables and their values to the readline output stream.
 [+] dump-macros			||		   ||	## Print all of the readline key sequences bound to macros and the strings they output.
======================================================================================================================================================














## ============================================================================= ##
df --print-type --total --inodes --si --human-readable --all
## ============================================================================= ##
df -B			# df --block-size=
df -H			# df --si
df -t			# df --type=
df -T			# df --print-type
df -k			# df --block-size=1K
## ============================================================================= ##


du --apparent-size --block-size=1

du -k . |xdu", "sudo du -k -x / |xdu

sort all
of the directories on your system by how much space they are using:

du -cb / | sort -n		## sort programs, then dir by space consumed
 

## ============================================================================= ##
du --exclude='*.o'
du -ks * | sort -n -r			## Sort everything by size in kilobytes
du -cs /home/* | sort -nr		## Show summary, sort results largest to smallest disk
du -csh /home/*					## human-readable output
du -Ss /etc				## but not in subdirectories beneath it:
du -csh				## du --total --summarize --human-readable
du -sh * 			## du --human-readable --summarize
## ============================================================================= ##
du -k || --block-size=1K		## equivalent to '--apparent-size --block-size=1K'
du -m || --block-size=1M		## equivalent to '--apparent-size --block-size=1M'
du -S || --separate-dirs		## for directories do not include size of subdirectories
du -P || --no-dereference		## dont follow any symbolic links (this is the default)
du -b || --bytes				## equivalent to '--apparent-size --block-size=1'
du -D || --dereference-args		## dereference only symlinks that are listed on the command line
## ============================================================================= ##





ls --directory				# ls -d



lsof /var/lib/mysql/mysqld.pid               # List all processes which are using a specific file







dbus-monitor "type='signal',sender='org.gnome.TypingMonitor',interface='org.gnome.TypingMonitor'"








initctl status start-ttys
cat /etc/init/start-ttys.conf
initctl list
ls -al /etc/rc.d/rc?.d/






mount ‐t tmpfs ‐osize=64m tmpfs /memdisk 		# Create a memory file system


echo "## ======================================================= ##"
echo -e "\t\t[+] Linux with losetup Method 1"
echo "## ======================================================= ##"


echo "## =========================================== ##"
echo -e "\t\t[+] Creating a loop img Method..."
echo "## =========================================== ##"
dd if=/dev/zero of=/usr/vdisk.img bs=1024k count=1024



#####################################################################################
mkfs.ext3 /usr/vdisk.img				# make a ext3 loop in dev
mount ‐o loop /usr/vdisk.img /mnt		# mount loop in directory
umount /mnt; rm /usr/vdisk.img			# Cleanup unmount and remove
#####################################################################################

echo "## =========================================== ##"
echo -e "\t\t[+] Linux with losetup Method 2"
echo "## =========================================== ##"


dd if=/dev/urandom of=/usr/vdisk.img bs=1024k count=1024		# Creates the loop img 




#####################################################################################
losetup /dev/loop0 /usr/vdisk.img	# Creates and associates /dev/loop0 
mkfs.ext3 /dev/loop0 				# make a ext3 loop in dev
mount /dev/loop0 /mnt 			# mount loop on mnt
losetup ‐a                      # Check used loops 
umount /mnt 					# unmount loop
losetup ‐d /dev/loop0           # Detach 
rm /usr/vdisk.img				# remove loop image
#####################################################################################





echo "## ============================================================================== ##"
echo -e "\t\t[+] create a 750-MB swap
file.

dd if=/dev/zero of=swapfile bs=1M count=750

mkswap swapfile				## formats that file with the swap filesystem

swapon swapfile				## starts using the file for swap.








mkdir –p source/KNOPPIX2
root@ttyp1[hda1]# cp –a /KNOPPIX2/* source/KNOPPIX2






echo "## ============================================================================== ##"
echo -e "\t\t[+] AuFS [Hack #1] to merge these
two directories to a third source/UNIONFS directory we will create and then
use it instead of source/KNOPPIX when we chroot:


mkdir –p source/UNIONFS
root@ttyp1[hda1]# mount –t aufs –o dirs=source/KNOPPIX=rw:source/KNOPPIX2=rw
source/UNIONFS source/UNIONFS



cp /etc/dhcpc/resolv.conf source/KNOPPIX/etc/
dhcpc/resolv.conf
cp: overwrite `source/KNOPPIX/etc/dhcpc/resolv.conf'? y




mount –-bind /proc source/KNOPPIX/proc
root@ttyp1[hda1]# chroot source/KNOPPIX



Now you are in a chrooted environment. Any command that you run will
run as though source/KNOPPIX is the root directory.

chroot source/UNIONFS





______________________________________________________________________________
 || >> xfsprogs - XFS is a high performance journaling filesystem which    || 
 ||  -->> originated n the SGI IRIX platform extended attributes, variable ||
 ||  -->>  block sizes, is extent based, makes extensive use of Btrees (Dir||
 ||  -->> extents, free space) to aid both performance and scalability.	   ||
===============================================================================



================================================================================================================================
xfsdump -v trace -f /dev/tape /						## Dump the root filesystem with tracing activated for all subsystems:	
================================================================================================================================
xfsdump -v drive=debug,media=debug -f /dev/tape /	## To enable debug-level tracing for drive and media operations:
================================================================================================================================
xfsdump -v trace,drive=debug -f /dev/tape /			##	To enable tracing for all subsystems, and debug level tracing for drive operations only:	
================================================================================================================================
xfsdump -e -v excluded_files=debug -f /dev/tape /	##	To list files that will be excluded from the dump:	
================================================================================================================================

================================================================================================================================
xfs_check /dev/hda1
================================================================================================================================
xfs_repair /dev/hda1
================================================================================================================================





mkfs.xfs –q /dev/sdb1		## Create an XFS filesystem on /dev/sdb1:

xfs_info /dev/sdb1		## Query the filesystem for information:

xfs_admin -u /dev/vda1		## UUID associated with the noted LV:


xfs_check
xfs_repair



blkid


probes for vfat, ext3 and ext4 filesystems
blkid --probe --match-types vfat,ext3,ext4 /dev/sda1


probes for all filesystem and other (e.g. swap) formats
blkid --probe --usages filesystem,other /dev/sda1



/dev/disk/by-{label,uuid,partuuid,partlabel}/









blkstat -v -i list

blkstat -v -f list



partx --show /dev/sda
lsblk --fs

lsblk --nodeps /dev/sda


--list 
--raw 
--ascii 

Output  info  about  device  owner,  group  and   mode
--perms
-o NAME,SIZE,OWNER,GROUP,MODE


--output-all

Print full device paths
--paths


--topology






findfs UUID=d40acb36-5f32-4832-bf1a-80c67833a618		## the UUID to find the /dev/ reference:

ls -l /dev/disk/by-uuid



findmnt --fstab -t nfs			## Prints all NFS filesystems defined in /etc/fstab.
findmnt --fstab /mnt/foo		## Prints  all  /etc/fstab  filesystems  where  the  mountpoint directory is /mnt/foo.  I mounts where /mnt/foo is a source.
findmnt --fstab --evaluate		## Prints all /etc/fstab filesystems and converts LABEL= and UUID= tags to the real devic

findmnt --fstab --target /mnt/foo		## Prints all /etc/fstab filesystems where the mountpoint directory is /mnt/foo.

findmnt -n --raw --evaluate --output=target LABEL=/boot		## Prints only the mountpoint where the filesystem with label "/boot" is mounted.



lvs -o devices
cat /etc/crypttab
cryptsetup status


mount -t ecryptfs /home/faggot/Secret /home/faggot/Secret
mount | grep /home/johndoe/Secret






mkfs -t ext2 -L rootfs -cv /dev/hda3




dumpe2fs -h /dev/sda1		# Display filesystems superblock information (e.g. number of mounts, last checks, UUID)

dumpe2fs -b /dev/sda1		# Display blocks that are marked as bad in the filesystem


dumpe2fs /dev/sda1 | grep -i superblock		# Display locations of superblock (primary and backup) of filesystem
dumpe2fs /dev/hda2 | grep superblock




#####################################################################################################
fsck -N				# dont execute, just show what could be done
fsck -As			# Check and repair serially all filesystems listed in /etc/fstab
fsck -f /dev/sda1	# Force a filesystem check on /dev/sda1 even if it thinks is not necessary

fsck -fv /dev/sda1	# Force another check, this time with verbose output:
fsck -y /dev/sda1	# During filesystem repair, do not ask questions and assume that the answer is always yes

fsck -b 32768 /dev/hda2						## Pass in one of the backup superblocks as an option to fsck:
mount sb=32768 /dev/hda2 /mnt				## If you still have problems, try passing the backup superblock into mount explicitly:





#####################################################################################################


#####################################################################################################
fsck.ext2 -c /dev/sda1		# Check a ext2 filesystem, running the badblocks command
e2fsck -c /dev/sda1			# mark all bad blocks and add them to the bad block inode to prevent 
							# them from being allocated to files or directories
#####################################################################################################
e2fsck -p		## Automatic repair (no questions)
e2fsck -n		## Make no changes to the filesystem
e2fsck -y		## Assume "yes" to all questions
e2fsck -c		## Check for bad blocks and add them to the badblock list
e2fsck -f		## Force checking even if filesystem is marked clean
e2fsck -v		## Be verbose

e2fsck -b superblock			## Use alternative superblock
e2fsck -B blocksize				## Force blocksize when looking for superblock
e2fsck -j external_journal		## Set location of the external journal
e2fsck -l bad_blocks_file		## Add to badblocks list
e2fsck -L bad_blocks_file		## Set badblocks list

create a QCOW2 image file instead of a normal, or raw image file

e2image -Q /dev/hda1 hda1.qcow2			## This will only send the metadata information, 
bzip2 -z hda1.qcow2					## without any data blocks. 




the filenames in the directory blocks can still reveal information about the contents of the filesystem.
If you wish to keep it confidential us -s option:
the -s option will prevent analysis of problems related to hash-tree indexed directories.
This will cause e2image to scramble directory entries 
zero out any unused portions of the directory blocks before writing the image file.



convert a qcow2 image into a raw image with:
e2image -r hda1.qcow2 hda1.raw


dumpe2fs /dev/mapper/ | grep UUID

mount -t debugfs none /sys/kernel/debug

debugfs device 				# Interactive ext2/ext3/ext4 filesystem debugger
debugfs -w /dev/sda1 		# Debug /dev/sda1 in read-write mode







--all
--attributes
--capabilities
--health
--scan
--xall
--info
smartctl -a "/dev/mapper/*"
smartctl -a "/dev/sd[a-z]"
smartctl -a "/dev/sd[a-z]"
smartctl -a /dev/sda		# Print SMART information for drive /dev/sda
smartctl -s off /dev/sda	# Disable SMART monitoring and log collection for drive /dev/sda
smartctl -t long /dev/sda	# Begin an extended SMART self-test on drive /dev/sda

tune2fs -j /dev/sda			# convert ext2 to ext3 FS
tune2fs -C 4 /dev/sda1		# Set the mount count of the filesystem to 4
tune2fs -c 20 /dev/sda1		# Set the filesystem to be checked by fsck after 20 mounts
tune2fs -c 2 /dev/sda1
tune2fs -i 15d /dev/sda1	# Set the filesystem to be checked by fsck each 15 days

tune2fs -L localdata /dev/hda2		##  give the disk a human-readable label


tune2fs ‐l /dev/sdXY | grep "Default mount options:"
tune2fs ‐o acl /dev/sdXY



tune2fs -l /dev/sda1		# List the contents of the superblock on /dev/sda1:
tune2fs -o acl /dev/sda1

tune2fs -O sparse_super /dev/hda1
tune2fs -O dir_index /dev/hda1			## use hashed b-trees to speed up directory lookups:


tune2fs -j -J size=512 /dev/hda1				## create a journal of size 512MB:
mke2fs -O journal_dev /dev/hdb2				## create a journal file on a different device
tune2fs -j -J device=/dev/hdb2 /dev/hda1	## use external device for journaling


reiserfsck --check /dev/hda1
reiserfsck --fix-fixable /dev/hda1


if reiserfsck reports fatal corruptions and exits with a status of 2
attempt to rebuild the entire filesystem

reiserfsck --rebuild-tree /dev/hda1


-Q [^]usrquota


echo "## ==================================================================== ##"
echo "## ===================== Generate a new UUID ========================== ##"
echo "## ==================================================================== ##"
uuidgen

echo "## ==================================================================== ##"
echo "## ========== Then assign it to the new disk with tunefs: ============= ##"
echo "## ==================================================================== ##"
tune2fs -U 79fb806d-4350-4b8c-8bc3-f3bb0c6b56f2 /dev/sdc1		


echo "## ==================================================================== ##"
echo "## ===================== Now mount the new disk: ====================== ##"
echo "## ==================================================================== ##"
mount -U 79fb806d-4350-4b8c-8bc3-f3bb0c6b56f2 /mnt/clonedisk







## ================================================================================ ##
tune2fs -l /dev/mapper/parrot--vg-root | grep "mount options"
## ------------------------------------------------- ##
mount -o acl /dev/sda1 /home/faggot/file
tune2fs -l /dev/sda1 | grep "mount options"
grep vg_ /etc/fstab
grep vg_ /etc/mtab
## ------------------------------------------------- ##

## =========================================================================================== ##

mkisofs -r -o cdrom.img data/ Create a CD-ROM image from the contents of the target directory.
## =========================================================================================== ##






echo "## ============================================================================== ##"
echo -e "\t\t[+] 
pidstat -C "fox|bird" -r -p ALL




echo "## ============================================================================== ##"
echo -e "\t\t[+] 
pidstat -r -p 1643 2 5
              Display  five  reports  of  page faults and memory
              statistics for PID 1643 at two second intervals.









## ================================================================================ ##
ctrl + a then d               # detach
ctrl + a then c
Ctrl­+a c										## create an new window (terminal)
Ctrl+­a Ctrl­+n				 					## switch to the next or previous 
Ctrl­+a Ctrl­+p									## window in the list, by number.
Ctrl + a, Then Press ?                       # To see all commands or parameters on screen.
Ctrl + a, Then Press d                       # Detach/Exit from a screen session
Ctrl + a, Then Press Shift + k               # Kill a screen session
Ctrl + a, Then Press c                       # How to create multiple screen window/tab in a screen session
Ctrl + a, Then Press n                       # How to move to next screen window/tab in a screen session
Ctrl + a, Then Press p                         # How to move to previous screen window/tab in a screen session
Ctrl + a, Then Press                          # How to goto n the screen window/tab
Ctrl + a, Then Press Shift +                          # How to list name of all screen windows/tabs and select from there
Ctrl + a, Then Press 0 -9                         # How to switch to screen window/tab 0 - 9
Ctrl + a, Then Ctrl + a again                         # How to Toggle to the window/tab displayed previously
Ctrl + a, Then Press Shift + a                         # How to change the name of screen window/tab
Ctrl + a, Then Press Shift + c                         # How to clear a screen window/tab
Ctrl + a, Then Press \                       # How to Kill all windows and terminate screen
Ctrl + a, Then Press x                       # How to lock a screen session
Ctrl + a, Then Press Shift + h               # How to log a screen session
Ctrl + a, Then Press Shift + s               # Split the Window Horizontally
Ctrl + a, Then Press Shift + \               # Vertically<
Ctrl + a, Then Press Tab                     # Switch between spilted windows
Ctrl + a, Then Type :focus                   # * Here :focus is a command
Ctrl + a, Then Press 0-9                     # In the spited window use following command to open existing session
Ctrl + a, Then Press n or p
Ctrl + a, Then Press Shift + ''
Ctrl + a, Then Type :resize 25               # Resize a splitted window/region
Ctrl + a, Then Type :remove                  # Remove current splitted window/region
Ctrl + a, Then Press Shift + x
Ctrl + a, Then Type :only                    # Remove all spiltted windows/regions except the current one.
Ctrl + a, Then Press Shift +q
Ctrl + a, Then Type :sessionname new_session_name
*Here :sessionname is a command
## ================================================================================ ##

## ================================================================================ ##
					## How to rename an existing session
screen -ls			## 
ls -laR /var/run/screen/                     # To see all screen sessions on a specific machine

screen -L			## You will find screenlog.0 file in your home directory

screen -D -R     	## If a session is running, then reattach. If necessary detach and logout remotely first. If it was not running create it and notify the user.

screen -x			## Howto Attach to a not detached screen session.

screen -L			## tells screen to turn on automatic output logging for the windows.
screen -r			## [pid.tty.host]
screen -r			## sessionowner/[pid.tty.host]
screen -m			## causes  screen  to  ignore  the  $STY  environment variable.
screen -s			## sets the default shell to the program
screen -S			## Identifies the Name of the attached screen session
screen -t			## sets the title for the default shell
screen -X			## Send  the  specified  command to a running screen session.
screen -4			## Resolve hostnames only to IPv4 addresses
## ================================================================================ ##
screen -r <SessID>				## Reattach to a screen session
screen -S <SessName>			## How to create new screen session and specify a meaningful name for the session.
screen -x old_session_name		## 
screen -r session_id> 			## 
screen -p <tab_num_or_name>		## reattach to a specific window/tab in a screen session
## ================================================================================ ##

C-a H	  ||===(log)===|| Begins/ends logging of the current window to the file "screenlog.n".
		  ||		   ||
C-a i	  ||		   ||
C-a C-i	  ||==(info)===|| Show info about this window.
		  ||		   ||
C-a k	  ||		   || 
C-a C-k	  ||==(kill)===|| Destroy current window.
		  ||___________||
C-a l	  ||\_________/|| 
C-a C-l   ||(redisplay)|| Fully refresh current window.
		  ||		   ||
C-a L	  ||==(login)==|| Toggle  this windows login slot

## ================================================================================ ##
C-a C-c     (screen)      Create a new window with a shell and switch to that window.
C-a C       (clear)       Clear the screen.
C-a C-d     (detach)      Detach screen from this terminal
## ================================================================================ ##


## ================================================================================ ##
/etc/screenrc                     screen initialization commands
$SCREENRC
$HOME/.screenrc                   Read in after /etc/screenrc
$SCREENDIR/S-<login>
/var/run/screen/S-<login>         Socket directories (default)
/usr/tmp/screens/S-<login>        Alternate socket directories.
<socket directory>/.termcap       Written by the "termcap" output function
/usr/tmp/screens/screen-exchange  or
/tmp/screen-exchange              screen interprocess communication buffer
hardcopy.[0-9]                    Screen images created by the hardcopy function
screenlog.[0-9]                   Output log files created by the log function
/usr/lib/terminfo/?/*             or
/etc/termcap                      Terminal capability databases
/var/run/utmp                     Login records
$LOCKPRG                          Program that locks a terminal.
## ================================================================================ ##





lslocks

## ================================================================================ ##
## ======= Insert at header of shell script to lock the shell within a =========== ##
## ==== local-lock-file and itll automatically lock itself on the first run ====== ##
## ================================================================================ ##
[ "${FLOCKER}" != "$0" ] && exec env FLOCKER="$0" flock -en  "$0"  "$0"  "$@" || :


flock /tmp -c cat		## Set exclusive lock to directory /tmp



Files in /etc/udev/rules.d/ are parsed in lexical order

match keys are conditions used to identify the device which the rule is acting upon. When all match keys in a rule correspond to
the device being handled, then the rule is applied and the actions of the assignment keys are invoked. Every rule
should consist of at least one match key and at least one assignment key.


ERNEL=="hdb", NAME="my_spare_disk"
The above rule includes one match key (KERNEL) and one assignment key (NAME).

match key is related to its value through
the equality operator (==), whereas the assignment key is related to its value through the assignment operator
(=).


KERNEL - match against the kernel name for the device
SUBSYSTEM - match against the subsystem of the device
DRIVER - match against the name of the driver backing the device

NAME - the name that shall be used for the device node
SYMLINK - a list of symbolic links which act as alternative names for the device node


ls -al /etc/udev/rules.d/*.rules
ls -al /lib/udev/rules.d/*.rules



##################################################################################################
## ## ## ## ## ## ## ## ## ## ## ## ## ## Part 2 LX0-104 ## ## ## ## ## ## ## ## ## ## ## ## ## ## 
##################################################################################################


logd daemon manages logging of kernel messages.


logger -p auth.info "Message" Send a message to syslogd with the specified facility and priority




journalctl /usr/bin/dbus-daemon

journalctl /dev/sda

journalctl -k -b -1

journalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=28097 + _SYSTEMD_UNIT=dbus.service
journalctl _SYSTEMD_UNIT=avahi-daemon.service _SYSTEMD_UNIT=dbus.service
journalctl _SYSTEMD_UNIT=avahi-daemon.service _PID=28097
journalctl _SYSTEMD_UNIT=avahi-daemon.service



journalctl -k | grep "IN=.*OUT=.*" | less			# view all packets that were logged since the machine was last booted:





/etc/rsyslog.conf
/etc/rsyslog.d/*.conf
/var/log/journal
systemd-journald.service	



facility		## type of program or tool that generated the message to be logged 	
Priority		## importance of this message;

Action			## file, remote computer, or other location that’s to accept the message.

The facility and priority are often referred to collectively as the selector.

Valid codes for the priority are debug , info , notice , warning , warn , error , err , crit ,
alert , emerg , and panic .


Exclamation Mark (!)		## messages below crit priority to be logged.
equal sign ( = )			## describes what to do with messages of that specific priority only.
*
refers to all priorities.
semicolon ( ; )				## used to separate multiple selectors as a whole.
commas (,)					## used to separate multiple facilities within a single selector
			## 
			## 
			## 
			## 
			## 
			## 
			## 
(@)							## log data to the specified system
/dev/console				## display data on the screen
asterisk ( * ) means all logged-in users













logrotate

open curly brace ( { ). They end in a close curly brace ( } ).

dateext option			## causes the rotated log file to obtain a date code instead, as in messages-20130210

compresscmd bzip2		## Use bzip2 . 
compressoptions			## enables you to pass options to the compression command

create option 			## create a new log fi le
copytruncate option 	## copy the old log file to a new name and then clear all the data out of the original fi le.


daily				## Tell the system to rotate the log
weekly				## fi les at the specifi ed intervals.
monthly				## 

size 100k			## k, M, G (kilobytes, megabytes, gigabytes)


rotate 2		## for the /var/log/messages file, logrotate will maintain /var/
				## log/messages.1 and /var/log/messages.2 in addition to the active /var/log/messages fi le.

prerotate and postrotate


grep eth0 /var/log/*





echo "## ============================================================================== ##"
echo -e "\t\t\t[+] Syslog-ng :"
echo "## ============================================================================== ##"








/etc/syslog-ng/syslog-ng.conf


#
# Enable rsyslog for all run levels
#
/sbin/chkconfig --level 0123456 rsyslog on



syslog-ng-ctl verbose --set=on
--control=<socket>

trace verbose

syslog-ng-ctl stats
/sbin/syslog-ng-ctl



#
# Start rsyslog if not currently running
#
/sbin/service rsyslog start















       ┌────────────────────────────┬──────────────────────────────────────────────┐
       │Name                        │ Description                                  │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │internal()                  │ Messages generated internally in syslog-ng.  │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │file()                      │ Opens the specified file and reads messages. │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │pipe(), fifo                │ Opens the specified named pipe and reads     │
       │                            │ messages.                                    │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │pacct()                     │ Reads messages from the process accounting   │
       │                            │ logs on Linux.                               │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │program()                   │ Opens the specified application and reads    │
       │                            │ messages from its standard output.           │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │sun-stream(), sun-streams() │ Opens the specified STREAMS device on        │
       │                            │ Solaris systems and reads incoming messages. │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │syslog()                    │ Listens for incoming messages using the new  │
       │                            │ IETF-standard syslog protocol.               │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │system()                    │ Automatically detects which platform         │
       │                            │ syslog-ng OSE is running on, and collects    │
       │                            │ the native log messages of that platform.    │
       ├────────────────────────────┼──────────────────────────────────────────────┤

       ├────────────────────────────┼──────────────────────────────────────────────┤
       │tcp(), tcp6()               │ Listens on the specified TCP port for        │
       │                            │ incoming messages using the BSD-syslog       │
       │                            │ protocol over IPv4 and IPv6 networks,        │
       │                            │ respectively.                                │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │udp(), udp6()               │ Listens on the specified UDP port for        │
       │                            │ incoming messages using the BSD-syslog       │
       │                            │ protocol over IPv4 and IPv6 networks,        │
       │                            │ respectively.                                │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │unix-dgram()                │ Opens the specified unix socket in           │
       │                            │ SOCK_DGRAM mode and listens for incoming     │
       │                            │ messages.                                    │
       ├────────────────────────────┼──────────────────────────────────────────────┤
       │unix-stream()               │ Opens the specified unix socket in           │
       │                            │ SOCK_STREAM mode and listens for incoming    │
       │                            │ messages.                                    │
       └────────────────────────────┴──────────────────────────────────────────────┘

       Table 2. Destination drivers available in syslog-ng
       ┌─────────────────┬──────────────────────────────────────────────┐
       │Name             │ Description                                  │
       ├─────────────────┼──────────────────────────────────────────────┤
       │file()           │ Writes messages to the specified file.       │
       ├─────────────────┼──────────────────────────────────────────────┤
       │fifo(), pipe()   │ Writes messages to the specified named pipe. │
       ├─────────────────┼──────────────────────────────────────────────┤
       ├─────────────────┼──────────────────────────────────────────────┤
       │program()        │ Forks and launches the specified program,    │
       │                 │ and sends messages to its standard input.    │
       ├─────────────────┼──────────────────────────────────────────────┤
       │sql()            │ Sends messages into an SQL database. In      │
       │                 │ addition to the standard syslog-ng packages, │
       │                 │ the sql() destination requires               │
       │                 │ database-specific packages to be installed.  │
       │                 │ Refer to the section appropriate for your    │
       │                 │ platform in ???.                             │
       ├─────────────────┼──────────────────────────────────────────────┤
       │syslog()         │ Sends messages to the specified remote host  │
       │                 │ using the IETF-syslog protocol. The IETF     │
       │                 │ standard supports message transport using    │
       │                 │ the UDP, TCP, and TLS networking protocols.  │
       ├─────────────────┼──────────────────────────────────────────────┤
       │tcp() and tcp6() │ Sends messages to the specified TCP port of  │
       │                 │ a remote host using the BSD-syslog protocol  │
       │                 │ over IPv4 and IPv6, respectively.            │
       ├─────────────────┼──────────────────────────────────────────────┤
       │udp() and udp6() │ Sends messages to the specified UDP port of  │
       │                 │ a remote host using the BSD-syslog protocol  │
       │                 │ over IPv4 and IPv6, respectively.            │
       ├─────────────────┼──────────────────────────────────────────────┤
       │unix-dgram()     │ Sends messages to the specified unix socket  │
       │                 │ in SOCK_DGRAM style (BSD).                   │
       ├─────────────────┼──────────────────────────────────────────────┤
       │unix-stream()    │ Sends messages to the specified unix socket  │
       │                 │ in SOCK_STREAM style (Linux).                │
       ├─────────────────┼──────────────────────────────────────────────┤
       │usertty()        │ Sends messages to the terminal of the        │
       │                 │ specified user, if the user is logged in.    │
       └─────────────────┴──────────────────────────────────────────────┘




Filter functions available in syslog-ng OSE
       ┌──────────────────────┬─────────────────────────────────────────────┐
       │Name                  │ Description                                 │
       ├──────────────────────┼─────────────────────────────────────────────┤
       │facility()            │ Filter messages based on the sending        │
       │                      │ facility.                                   │
       ├──────────────────────┼─────────────────────────────────────────────┤
       │filter()              │ Call another filter function.               │
       ├──────────────────────┼─────────────────────────────────────────────┤
       │host()                │ Filter messages based on the sending host.  │
       ├──────────────────────┼─────────────────────────────────────────────┤
       │level() or priority() │ Filter messages based on their priority.    │
       ├──────────────────────┼─────────────────────────────────────────────┤
       │match()               │ Use a regular expression to filter messages │
       │                      │ based on a specified header or content      │
       │                      │ field.                                      │
       ├──────────────────────┼─────────────────────────────────────────────┤
       │message()             │ Use a regular expression to filter messages │
       │                      │ based their content.                        │
       ├──────────────────────┼─────────────────────────────────────────────┤
       │netmask()             │ Filter messages based on the IP address of  │
       │                      │ the sending host.                           │
       ├──────────────────────┼─────────────────────────────────────────────┤
       │program()             │ Filter messages based on the sending        │
       │                      │ application.                                │
       ├──────────────────────┼─────────────────────────────────────────────┤
       │source()              │ Select messages of the specified syslog-ng  │
       │                      │ OSE source statement.                       │
       ├──────────────────────┼─────────────────────────────────────────────┤
       │tags()                │ Select messages having the specified tag.   │
       └──────────────────────┴─────────────────────────────────────────────┘





log statement sends all messages arriving to the localhost to a remote server.

           source s_localhost { tcp(ip(127.0.0.1) port(1999) ); };
           destination d_tcp { tcp("10.1.2.3" port(1999); localport(999)); };
           log { source(s_localhost); destination(d_tcp); };










################################################################
# First some standard logfiles. Log by facility.
################################################################
auth,authpriv.*					/var/log/auth.log
auth;auth-priv.debug;auth-priv.!=emerg		/var/log/auth
auth.emerg						/dev/console
*.*;auth,authpriv.none			-/var/log/syslog
#cron.*							/var/log/cron.log
daemon.*						-/var/log/daemon.log
kern.*							-/var/log/kern.log
lpr.*							-/var/log/lpr.log
mail.*							-/var/log/mail.log
user.*							-/var/log/user.log
####################################################
# Logging for the mail system. Split it up so that
# it is easy to write scripts to parse these files.
####################################################
mail.info						-/var/log/mail.info
mail.warning					-/var/log/mail.warn
mail.err						/var/log/mail.err
####################################################
# Logging for INN news system
####################################################
news.crit						/var/log/news/news.crit
news.err						/var/log/news/news.err
news.notice						-/var/log/news/news.notice
############################################################
# Some 'catch-all' logfiles.
############################################################
*.=debug;\
auth,authpriv.none;\	
news.none;mail.none				-/var/log/debug
*.=info;*.=notice;*.=warning;\
auth,authpriv.none;\
cron,daemon.none;\
mail,news.none					-/var/log/messages
############################################################
# Emergencies are sent to everybody logged in.
############################################################
*.emerg							*
#####################################################################
# I like to have messages displayed on the console, but only on a
# virtual console I usually leave idle.
#####################################################################
#daemon,mail.*;\
#news.=crit;news.=err;news.=notice;\
#*.=debug;*.=info;\
#*.=notice;*.=warning				/dev/tty8
#####################################################################
# The named pipe /dev/xconsole is for the 'xconsole' utility.
# use it, you must invoke 'xconsole' with the '-file' option:
#
#	$ xconsole -file /dev/xconsole [...]
#
# NOTE: adjust the list below, or you'll go crazy if you have a
# reasonably busy site..
#####################################################################
daemon.*;mail.*;\
news.err;\
*.=debug;*.=info;\
*.=notice;*.=warning				|/dev/xconsole
######################################################################












#!/bin/bash
for f in
{auth,authpriv,cron,daemon,kern,lpr,mail,mark,news,syslog,user,uucp,local0,local1, ➥
local2,local3,local4,local5,local6,local7}
	do
		for p in {debug,info,notice,warning,err,crit,alert,emerg}
	do
		logger -p $f.$p "Test syslog messages from facility $f with priority $p"
	done
	done
exit 0



tail -f /tmp/logfile | logger -p daemon.info













##################################################################################################
## ## ## ## ## ## ## ## ## ## ## ## ## ## NTP  ## ## ## ## ## ## ## ## ## ## ## ## ## ## 
##################################################################################################



Coordinated Universal Time (UTC)
Greenwich Mean Time (GMT)
Network Time Protocol (NTP)

hardware clock, maintains the time while the computer is turned off.


When you boot
Linux, it reads the hardware clock and sets the software clock to the value it retrieves.

/usr/share/zoneinfo
/etc/timezone
/etc/localtime
tzname (3)           - initialize time conversion information
tzset (3)            - initialize time conversion information

hwclock --show


--systohc		## Set the Hardware Clock Based on the Software Clock
--hctosys		## Set the Hardware Clock Based on the Hardware Clock
--utc




atomic clocks or radio
receivers that pull their times from broadcast time signals based on atomic clocks.


/var/lib/ntp
ntp.drift			## information about the software clock’s inaccuracies and so can be used to correct for them.


http://pool.ntp.org
0.pool.ntp.org
north-america.pool.ntp.org


/etc/ntp.conf
server clock.example.com
server ntp.pangaea.edu
server time.luna.edu


LOCAL(0)		## Last-resort reference source of the computer’s own clock.


refid column		## Server to which each system is synchronized
st column 			## Stratum of the server


restrict default ignore line in ntp.conf . This line tells the server to ignore all
incoming NTP requests.


ntpdate clock.example.com


TZ=":Pacific/Auckland"

TZDIR
/usr/share/zoneinfo/












## ======================================================================================= ##
     MUA          --->        MTA            --->        MTA
(Mail User Agent) ---> (Mail Transfer Agent) ---> (Mail Transfer Agent)
mailclient sender ---> SMTP server of sender --->    remote host
## ======================================================================================= ##



/etc/mail.rc                     system initialization file

mailq
sendmail -bp

newaliases
sendmail -I


mail user@foo.com < file



postqueue(1), mail queue control


useradd -u 501 -g mail -s /sbin/nologin -d /dev/null sendmail
define(`confRUN_AS_USER',`sendmail')

useradd -m -d /home/<user> -g <usergroup> -G <usergroup1>,<usergroup2> -s /bin/tcsh <user>

-k skeleton-dir
-g default-group


reserve at least the fi rst 100 user and group IDs (0–99) for system
use.
UID 2 and GID 2 may be the daemon account and group, 
UID 8 and GID 12 the mail account and group


fi rst normal user account is usually assigned a UID of 500 or (more often) 1000.
the second user you create is UID 1001, the third is 1002

The limit is 65,536 users with the 2.2.x kernels and more than 4.2 billion
with the 2.4.x and later kernels




groups root


chage -l poozer
chage --mindays 3 --maxdays 17 --warndays 7 poozer





smbpasswd -x sally to delete the sally account from Samba’s database.





/etc/yp.conf			# NIS binding config




## ======================================================================================= ##

localectl status
localectl list-locales

localectl setlocale LANG="en_US.utf8" LC_CTYPE="en_US"
localectl setlocale en_US.UTF-8 

X core fonts are managed directly by X

Font servers integrate with the X core fonts but run as separate programs and
may optionally deliver fonts to multiple computers on a network.

Xft fonts bypass the
X core font system to provide client-side fonts in a way that supports modern features such
as font smoothing.


       $ mkdir -p $HOME/.locale
       $ I18NPATH=./wrk/ localedef -f UTF-8 -i fi_SE $HOME/.locale/fi_SE.UTF-8
       $ LOCPATH=$HOME/.locale LC_ALL=fi_SE.UTF-8 date
       $ echo "export LOCPATH=\$HOME/.locale" >> $HOME/.bashrc
       $ echo "export LANG=fi_SE.UTF-8" >> $HOME/.bashrc


## ======================================================================================= ##

XkbRules	files of rules to be used for keyboard mapping composition
XkbModel
name of the model of your keyboard type
XkbLayout
layout(s) you intend to use
XkbVariant
variant(s) of the layout you intend to use
XkbOptions
extra xkb configuration options

setxkbmap (1)        - set the keyboard using the X Keyboard Extension
/usr/share/X11/xkb/rules

echo "grabbing the screen resolution..."
xdpyinfo | awk '/dimensions:/ {print $2}'			# "width x height"
echo ""
xrandr -q				# 

xset fp+ /your/font/directory


xset fp+ /usr/local/fonts		# Dynamically add the new installed fonts in /usr/local/fonts to the X

mkfontdir


xsel Manipulate the X selection (primary, secondary, and clipboard)
xsel -b < file Put the contents of a file in the X clipboard
xsel -b -a < file2 Append the contents of a file to the X clipboard
xsel -b -o Output onscreen the contents of the X clipboard


/usr/share/X11/xkb


# /etc/X11/Xsession
# 
# global Xsession file -- used by display managers and xinit (startx)
# 



# 
# /etc/X11/Xsession.options - contains a set of flags that determine some of the behavior of the Xsession
# 

allow-failsafe
allow-user-resources
allow-user-xsession
use-ssh-agent
use-session-dbus




setxkbmap us -print | xkbcomp - $DISPLAY

DISPLAYMANAGER=/bin/xdm


/etc/X11/xdm/xdm-config 		# The “DisplayManager.requestPort” 

/etc/X11/xinit/xinitrc			# global xinitrc file, used by all X sessions started by xinit (startx)
/etc/x11/xdm/Xresources			# Display Manager greeting screen
/etc/x11/xdm/xdm-config



    dbus-update-activation-environment --verbose --systemd --all
if [ -n "$STARTSSH" ]; then
  STARTUP="$SSHAGENT $SSHAGENTARGS ${TMPDIR:+env TMPDIR=$TMPDIR} $STARTUP"
fi

QT_ACCESSIBILITY=1
QT_LINUX_ACCESSIBILITY_ALWAYS_ON=1

export QT_ACCESSIBILITY QT_LINUX_ACCESSIBILITY_ALWAYS_ON

if [ -x "/usr/bin/dbus-update-activation-environment" ]; then
        dbus-update-activation-environment --verbose --systemd QT_ACCESSIBILITY QT_LINUX_ACCESSIBILITY_ALWAYS_ON





${GNUPGHOME=$HOME/.gnupg}

GPGAGENT=/usr/bin/gpg-agent

if grep -qs '^[[:space:]]*use-agent' "$GNUPGHOME/gpg.conf" "$GNUPGHOME/options" &&
   test -x $GPGAGENT; then


   GPG_AGENT_INFO="${GNUPGHOME}/S.gpg-agent:0:1"
   export GPG_AGENT_INFO
   if grep -qs '^[[:space:]]*enable-ssh-support' "${GNUPGHOME}/gpg-agent.conf"; then
       SSH_AUTH_SOCK="${GNUPGHOME}/S.gpg-agent.ssh"
       export SSH_AUTH_SOCK
   fi

fi





XFree86 -configure 				# (for XFree86)
Xorg -configure

xf86cfg or 

xorgcfg


xorgconfig

xdpyinfo
xdpyinfo | awk '/dimensions:/ {print $2}'
setxkbmap us -print | xkbcomp - $DISPLAY
xdpyinfo -queryExtensions
xdpyinfo -h
xdpyinfo -ext all >> xdpyinfo.txt


/etc/X11/xdm/Xsetup			# set up the X Display Manager as the default display manager.

|| xf86config ||   Generate an XF86Config file
|| xf86cfg 	  ||	Graphical configuration tool for XFree86 4.0
|| x86info ||	Displays diagnostic info for CPU cache configuration, and CPU speedtest 


______________________________________________________________________________________
|| XFree86 ||	uses a configuration file called XF86Config for its initial setup. ||
=====================================================================================


________________________________________________________________________
|| xdm ||	Runs XDMCP (X Display Manager Control Protocol)			||
||	   ||	--> registers login sessions to the system utmp file 	||
========================================================================



________________________________________________________________________________________
 || >> XFree86 - An interface that communicates between video cards,  				|| 
 ||  -->> displays, and the graphical desktop; provides windowing infrastructure 	||
 ||  -->> and an interface for programming graphical applications.					||
=======================================================================================

_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
=======================================================================

_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
 ||  -->> 	||
 ||  -->> 	||
=======================================================================

||  ||	
||  ||	
||  ||	



 

=======================================================================

_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
 ||  -->> 	||
 ||  -->> 	||
=======================================================================

_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
=======================================================================

_______________________________________________________________________
 || >> 		|| 
 ||  -->> 	||
 ||  -->> 	||
 ||  -->> 	||
=======================================================================

 
___________________________________________________
|| xdpyinfo ||	display information utility for X
===================================================




||  ||	
___________________________________________________________
|| xhost 	||		server access control program for X ||
===========================================================

_____________________________________________________________________
|| xinitrc 	||	script which is used to configure your X Window
||			||	-->> System session or to start a window manager
=====================================================================

_____________________________________________________________________
||  ||	
=====================================================================
_____________________________________________________________________
||  ||	
=====================================================================
_____________________________________________________________________
||  ||	
=====================================================================
_____________________________________________________________________
||  ||	
=====================================================================
_____________________________________________________________________
||  ||	
=====================================================================
_____________________________________________________________________
||  ||	
=====================================================================
_____________________________________________________________________
||  ||	
=====================================================================
_____________________________________________________________________
||  ||	
=====================================================================
_____________________________________________________________________
||  ||	
=====================================================================
_____________________________________________________________________
||  ||	
=====================================================================



========================================
				#####################
xf86config		## Configure the 
XF86Setup		## X11 Server
				#####################
========================================







startx > xinit > xinitrc > Xclients
/etc/X11/xdm/Xsetup
/etc/X11/gdm/Init/Default

/etc/X11/xinit/xinitrc
$HOME/.xinitrc clients to run after X server started
/etc/X11/fs/config configure X11 font path (font server).

XFree86 -configure XFreee86 auto configuration (Plug-n-Play),
generate a template named “XF86Config.new”	

xvidtune adjust X server origin and size.
xmodmap
xhost server access control program for X.
xsetroot root window parameter setting utility for X.
xlsfonts server font list displayer for X.
xset ser preference utility for X.

/etc/X11/xdm/xdm-config		## XDM’s main confi guration fi le

0 to 177

DisplayManager.requestPort: 0


chooser — a display of local systems that accept XDMCP connections



-configdir

ModulePath "path"

/usr/lib/xorg/modules		## sets  the  search  path for loadable Xorg server modules.


XkbDir "path"		## sets the base directory for keyboard layout files.  
/usr/share/X11/xkb	## The default keyboard layout file directory



/etc/x11/xdm/Xaccess		## Control inbound requests from remote hosts

/etc/x11/xdm/Xresources		## environment variables but apply only to X-based programs.


/etc/x11/xdm/Xservers		Association of X displays with local X server software, or with X terminals via XDMCP
/etc/x11/xdm/Xsession		Script launched by xdm after login
/etc/x11/xdm/Xsetup_0 		Script launched before the graphical login screen
/etc/x11/xdm/xdm-config		Association of all xdm configuration files


/etc/X11/xorg.conf.d			## Server configuration directory.
/etc/X11/xorg.conf.d-4			## Server configuration directory.
/etc/xorg.conf.d				## Server configuration directory.
/usr/etc/xorg.conf.d			## Server configuration directory.
/usr/lib/X11/xorg.conf.d		## Server configuration directory.

/var/log/Xorg.n.log    			## Server log file for display n.
/usr/share/fonts/X11/∗ 			## Fonts.
/usr/share/X11/XErrorDB			## Client error message database.
/usr/lib/X11/app-defaults/∗		## Client resource specifications.
/etc/Xn.hosts					## itial access control list for display n.
etc/X11/xorg.conf				## Server configuration file.
etc/X11/xorg.conf-4				## Server configuration file.
etc/xorg.conf					## Server configuration file.
usr/etc/xorg.conf				## Server configuration file.
usr/lib/X11/xorg.conf			## Server configuration file.




xhost [+]name.faggot.edu	 added to the list allowed to connect to the X server.


/etc/X11/kdm
/etc/kde/kdm 
/usr/lib/kde4/libexec/
[Xdmcp] section


/etc/X11/gdm
/etc/gdm




alias startx="startx -- -nolisten tcp"

xdm -udpPort 0



/etc/X11/xdm/Xservers: 
    :0 local /usr/X11R6/bin/X ‐nolisten tcp 
    Closes TCP port 6000. 


/etc/rc.d/rc.4: 
    exec /usr/X11R6/bin/xdm ‐nodaemon ‐udpPort 0 
    Closes UDP port 177. 


/etc/X11/fs/config: 
    use‐syslog = yes 
    no‐listen = tcp 
    Closes TCP port 7100. 





set the enable option to yes in the [xdmcp] section if you want to enable remote logins.


xhost +poozer						## tells poop to accept for display in its X server data that originates on poozer .
export DISPLAY=poozer:0.0.		## tells poop to use poozer for the display of X programs.
setenv DISPLAY poozer:0.0.


xhost -zeus on apollo . This tightens security so that a miscreant on zeus won’t be
able to modify your display on apollo .


xhost -			## Access is restricted to only those on the list (i.e., access control is turned on).
xhost +			## Access  is  granted to everyone, even if they aren't on the list (i.e., access control is turned off).




Identifier 	<entry>				## specifies the unique name for this input class.
Driver  	<entry>				## specifies  the name  of  the  driver  to  use for this input device.
InputClass  <section>			## generic and will match any input device.
Device  	<section>			## recognise  some driver-independent entries and Options
monitor 	<section>			## may be tied to specific  outputs  of  the  video  card.







Option "Monitor-VGA" "VGA monitor"		## for a VGA output


VendorName  "vendor"		## This optional entry specifies the monitor's manufacturer.
ModelName  "model"			## This optional entry specifies the monitor's model.
	Load "dri"

ModulePath					## Directory for modules to be searched in

A “screen” represents the binding of a graphics device (Device section) and  a  monitor

ServerFlags section			## used to specify some global Xorg server options.


-modulepath paths      specify the module search path
-logfile file          specify a log file name
-configure             probe for devices and write an xorg.conf
-showopts              print available options for all installed drivers
-config file           specify a configuration file, relative to the
                       xorg.conf search path, only root can use absolute
-configdir dir         specify a configuration directory, relative to the
                       xorg.conf.d search path, only root can use absolute
-layout name           specify the ServerLayout section name
-screen name           specify the Screen section name
-keyboard name         specify the core keyboard InputDevice name
-pointer name          specify the core pointer InputDevice name
-showDefaultModulePath show the server default module path
-showDefaultLibPath    show the server default library path
-novtswitch            don't automatically switch VT at reset & exit


echo "[+]=============================================================================================[+]"
PS/2 mouse is an intelligent device and may have more than three buttons and a wheel or a roller.
bus mouse connects to a dedicated interface card in an  expansion  slot. 
serial mouse conforms to the PnP COM device specification







.xinitrc       default client script
.xserverrc     default server script



echo "[+]=====================================================================[+]"
Host Access           Simple host-based access control.
MIT-MAGIC-COOKIE-1    Shared plain-text "cookies".
XDM-AUTHORIZATION-1   Secure DES based private-keys.
SUN-DES-1             Based on Suns secure rpc system.
Server Interpreted    Server-dependent methods of access control
echo "[+]=====================================================================[+]"
XDM-AUTHORIZATION-1			## DES-based access control mechanism
XDM-AUTHORIZATION-2
echo "[+]=====================================================================[+]"
		## 
		## 
		## 
		## 
		## 
		## 
		## 

echo "[+]=====================================================================================[+]"
The most common use for xauth is to extract the entry for  the  current  display,  copy  it  
to  another machine, and merge it into the user's authority file on the remote machine:
echo "[+]=====================================================================================[+]"
xauth extract - $DISPLAY | ssh otherhost xauth merge -



echo "[+]=====================================================================================[+]"
The file from which Xlib extracts authorization data can be specified with the environment 
variable XAUTHORITY, and defaults to the file .Xauthority in the home directory.   
echo "[+]=====================================================================================[+]"

$HOME/.Xauthority			## Xdm default authority file


xfontsel
x11perf



Display Manager greeting screen Defined in:
/etc/x11/xdm/Xresources



xlogin*greeting: \
Debian GNU/Linux (CLIENTHOST)




/etc/gdm/gdm.conf			## GNOME Display manager
/etc/gdm/custom.conf		## 


/usr/share/gdm/dconf/10-desktop-base-settingsGG

G

gdmsetup



/etc/kde/kdm/kdmrc		## KDE Display Manager

/etc/gdm/custom.conf , and add a line that reads 

[security]
DisallowTCP=false 



openSUSE
ISPLAYMANAGER_XSERVER_TCP_PORT_6000_OPEN

-nolisten tcp
xwininfo				# show you the running color depth while in X?
xvidtune -show			# tune X11 server settngs

## =============================================================== ##
X -audit 1		# The default level is 1, meaning only connection rejections  are  reported.
X -audit 2		# Level 2 additionally reports all successful connections and disconnects.
X -audit 4		# Level 4 enables messages from the SECURITY extension
X -audit 0		# Level 0 turns off the audit trail. 

-nolisten  tcp
## =============================================================== ##
Xdm initializes access control for the server and also places authorization information in a file acces‐
       sible to the user.


hostname:displaynumber.screennumber

setenv DISPLAY myws:0
DISPLAY=myws:0; export DISPLAY



Sticky Keys When enabled, this option causes keyboard modifi er keys (Ctrl, Alt, and
Shift) to “stick” when pressed

Mouse Keys This option enables you to use the cursor keypad on your keyboard to emulate a mouse.

Bounce (or Debounce) Keys If a user tends to accidentally press a single key multiple times,


xkbcomp

echo "[+]====================================================[+]"
The eight primary colors can be represented as:
echo "[+]====================================================[+]"
           black                rgb:0/0/0
           red                  rgb:ffff/0/0
           green                rgb:0/ffff/0
           blue                 rgb:0/0/ffff
           yellow               rgb:ffff/ffff/0
           magenta              rgb:ffff/0/ffff
           cyan                 rgb:0/ffff/ffff
           white                rgb:ffff/ffff/ffff



###############################################################
echo "Convert a Nero .nrg file to .iso"
dd bs=1k if=imagefile.nrg of=imagefile.iso skip=300

###############################################################
echo "Convert a bin/cue image to .iso"
bchunk imagefile.bin imagefile.cue imagefile.iso

###############################################################
growisofs ‐dvd‐compat ‐Z /dev/dvd=imagefile.iso     # Burn existing iso image 
growisofs ‐dvd‐compat ‐Z /dev/dvd ‐J ‐R /p/to/data  # Burn directly
###############################################################

## ========================================================= ##
echo "Create and burn an ISO image"
dd if=/dev/hdc of=/tmp/mycd.iso bs=2048 conv=notrunc

mkisofs ‐J ‐L ‐r ‐V TITLE ‐o imagefile.iso /path/to/dir 		# Use mkisofs to create a CD/DVD image from files in a directory.

## ========================================================= ##
echo "create an ISO image is to use dd:"

dd if=/dev/cdrom of=image.iso

## ========================================================= ##
echo "create an ISO image from /dev/cdrom, use the following command:"

cat /dev/cdrom > image.iso

## ========================================================= ##
echo "write the ISO to a USB storage device, use the following command:"
## ========================================================= ##
dd if=image.iso of=/dev/sdb1 status=progress

## ========================================================= ##
echo "burn the image to the CD-ROM as follows"
## ========================================================= ##
cdrecord -v dev=/dev/cdrom image.iso

cdrecord -v dev=/dev/cdrom image.iso -speed 8
cdrecord -v dev=/dev/cdrom image.iso -multi




make a new CD-ROM ISO from the /tmp/mylivecd directory:
mkisofs -l -v -J -V "My New LiveCD" -r -b base/boot.img -c base/boot.cat -hide -rr -moved -o /tmp/mylivecd.iso /tmp/mylivecd

cdrecord speed=8 dev=0,0,0 /tmp/mylivecd.iso

mkisofs -pad -l -r -J -v -V " KNOPPIX " -no-emul-boot -boot-load-size 4 -boot-info-table -b boot/isolinux/isolinux.bin -c boot/isolinux/boot.cat -hide-rr-moved -o knoppix.iso master/




excluded the drivers directory from the tarball extraction


tar –exclude drivers –cvzf linux-2.6.19.1.tar.gz /usr/src/linux-



ln -s /media/sda1/usr/src/linux-2.6.19.1 /usr/src/linux-2.6.19.1








##################################################################################################
## ## ## ## ## ## ## ## ## ## ## ## ## ## Mail ## ## ## ## ## ## ## ## ## ## ## ## ## ## 
##################################################################################################




## =============================================================== ##
MDAs (Mail Delivery Agents)
MTAs (Mail Transfer Agents)
MUAs (Mail User Agents)
Mail Delivery Agents (MDAs)
MIME (Multipurpose Internet Mail Extensions)
Mail Submission Agent (MSA)

Post Offi ce Protocol (POP)
Internet Message Access Protocol (IMAP).
American Standard Code for Information Interchange (ASCII)
8-bit Unicode Transformation Format (UTF-8)


Server Message Block/Common Internet File System (SMB/CIFS)

Common Unix Printing System (CUPS)
BSD Line Printer Daemon (LPD)
Printer Control Language (PCL)
Dots Per Inch (dpi)
PostScript Printer Defi nition (PPD)
Internet Printing Protocol (IPP)
Local Subnets (@LOCAL)
CUPS Driver Development Kit (DDK)
Network Security Services (NSS)			## SSL/TLS implementation
Certificate Revocation List (CRL) 
Multipurpose Internet Mail Extensions (MIME)










http://localhost:631




lsof -i :631
fuser -v -n tcp 631 		## find out owner of cupsd print daemon



find / -name master                                                     |
/usr/libexec/postfix/master



/bin/ps ax |grep 1051 |grep -v grep



## =============================================================== ##


/usr/bin/cupsdconf			## KDE CUPS Server Configuration window


cupsd.conf				## Permission, authentication, and other information for the printer daemon
printers.conf			## Addresses and options for configured printers
classes.conf			## Defines local printer classes.

echo "## ============================================================================================== ##"
client.conf (5)      - client configuration file for cups (deprecated)
cupsaccept (8)       - accept/reject jobs sent to a destination
reject (8)           - accept/reject jobs sent to a destination
cupsaddsmb (8)       - export printers to samba for windows clients
cupsctl (8)          - configure cupsd.conf options
cupsdisable (8)      - stop/start printers and classes
cupsenable (8)       - stop/start printers and classes
cupsreject (8)       - accept/reject jobs sent to a destination
cupstestdsc (1)      - test conformance of postscript files (deprecated)
cupstestppd (1)      - test conformance of ppd files
lpadmin (8)          - configure cups printers and classes
echo "## ============================================================================================== ##"

Ghostscript		## converts the print job into a form that the system’s printer can actually handle.

echo "## ============================================================================================== ##"
/etc/printcap			Printer description file		
/var/spool/*			Spool directories			
/var/spool/*/minfree	Minimum free space to leave
/dev/lp*				Line printer devices
/dev/printer			Socket for local requests
/etc/hosts.equiv		Lists machine names allowed printer access
/etc/hosts.lpd			Lists machine names allowed printer access but not under same administrative control
echo "## ============================================================================================== ##"


SMTPSPort="465"		## SMTP over TLS

openssl genrsa -des3 -out server.key 1024

openssl rsa -in server.key -out server.key.open 

openssl req -new -x509 -days 3650 -key server.key.open -out server.crt 








 {■}  Requires - means that all the units listed are triggered to activate (start). 
If they fail or cannot be started, the entire unit (group of units) is deactivated.


 {■}  Wants - means that all the units listed are triggered to activate (start). If they fail or cannot be started,
no problem — the target unit continues on its merry way.
target unit is simply a grouping of other units

 {■}  service unit configuration files contain a lot of information, such as what other
services must be started, when this service can be started, which environmental fi le to
use

 {■}  unit - group consisting of a name, type, and configuration file
and is focused on a particular service or action. 

Echo "## ========================================== ##"
Echo "\Tthe Eight Systemd Units Types Are:"
Echo "## ========================================== ##"
Echo "   ■ Automount"
Echo "   ■ Device"
Echo "   ■ Mount"
Echo "   ■ Path"
Echo "   ■ Service"
Echo "   ■ Snapshot"
Echo "   ■ Socket"
Echo "   ■ Target"







systemctl show --property "Wants" multi-user.target 

systemctl show --property "Wants" multi-user.target | fmt -10 | sed 's/Wants=//g' | sort




systemctl list-units | grep .service
systemctl list-units | grep .target
systemctl list-unit-files --type=service
systemctl list-unit-files --type=target

systemctl show --property "Requires" multi-user.target


ls -l /lib/systemd/system/runlevel*.target
ls -l /etc/systemd/system/default.target

initctl list | grep start/running

systemctl show --property "WantedBy" getty.target
systemctl list-unit-files --type=service | grep -v disabled

systemctl status cups.service
cups.service - CUPS Printing Service
Loaded: loaded (/lib/systemd/system/cups.service; enabled)
Active: active (running) since Mon, 30 Apr 2015 12:36:31 -0400; 13h ago
Main PID: 1315 (cupsd)
CGroup: name=systemd:/system/cups.service
1315 /usr/sbin/cupsd -f



export TZ=:/usr/share/zoneinfo/US/Mountain




export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8




iconv --list
iconv -f iso-8859-1 -t UTF-8 umlautfile.txt > umlautfile-utf8.txt

lp (1)               - print files
lp (4)               - line printer devices
lpadmin (8)          - configure cups printers and classes
lpc (8)              - line printer control program
lpinfo (8)           - show available devices or drivers
lpmove (8)           - move a job or all jobs to a new destination
lpoptions (1)        - display or set printer options and defaults
lpq (1)              - show printer queue status
lpr (1)              - print files
lprm (1)             - cancel print jobs
lpstat (1)           - print cups status information




PPD (Adobe PostScript Printer Description)

Printing with lpr

lpr unixtoolbox.ps                 # Print on default printer 
export PRINTER=hp4600              # Change the default printer 
lpr ‐Php4500 #2 unixtoolbox.ps     # Use printer hp4500 and print 2 copies 
lpr ‐o Duplex=DuplexNoTumble		# Print duplex along the long side 
lpr ‐o PageSize=A4,Duplex=DuplexNoTumble
lpr -m <file>


lpr -# 2 <file>						## Print two copies of a document to the default printer:
lpr -P foo -o number-up=2 <file>	## Print a presentation document 2-up to a printer called "foo":



Print a double-sided legal document to a printer called "foo":
lpr -P foo -o media=legal -o sides=two-sided-long-edge <file>



cupsenable hp4000

lpq                                # Check the queue on default printer 
lpq ‐l ‐Php4500                    # Queue on printer hp4500 with verbose 

lpq +interval
lpq -a -l				## verbose reporting & Reports jobs on all printers.


lprm ‐                             # Remove all users jobs on default printer 
lprm ‐Php4500 3186                 # Remove job 3186. Find job nbr with lpq 
lpc status                         # List all available printers 
lpc status hp4500                  # Check if printer is online and queue length


lpstat -l		## 
lpstat -r   Shows whether the CUPS server is running.
lpstat -s   Shows a status summary
lpstat -d   Shows the current default destination.
lpstat 
lpstat 





lpadm –d myprint
lpadm –x myprint -d option 		## set default printer
-x option 		## delete a installed printer.

lpinfo –v 					## List supported printing protocols lp –d myprint filename
lpr –P myprint filename		## Print a file

# lpstat -p printer

http://localhost:631

/etc/cups/printers.conf
/etc/cups/classes.conf
/etc/cups/cupsd.conf 		## CUPS related configuration files

/etc/cups
/usr/lib/cups
/usr/share/cups 		## CUPS related directories


/etc/printcap
/etc/printcap.local 		## Printer capabilities data base.


cat log_file | mail -s "subject" recipient
mail -s "subject" recipient < log_file


lpr -# 5 io.ps






/etc/mail/submit.cf 		## Sendmail local mail transfer configuration file
/etc/mail/sendmail.cf 		## Sendmail MTA configuration file



/etc/mail/access.db 			## Access control file to allow or deny access to systems or users
/etc/mail/local-host-names.db 	## List of domains that must be considered as local accounts
/etc/mail/virtusertable.db 		## Map for local accounts, used to distribute incoming email
/etc/mail/mailertable.db 		## Routing table, used to dispatch emails from remote systems
/etc/mail/domaintable.db 		## Domain table, used for transitions from an old domain to a new one
/etc/mail/genericstable.db 		## Map for local accounts, used to specify a different sender for outgoing mail
/etc/mail/genericsdomain.db		## Local FQDN


/var/spool/mqueue/		## Temporary mailqueue files (where nnn is the Message ID):



					################################################
newaliases			## Update the aliases database; 
sendmail -bi 		## must be run after any change to /etc/aliases
					################################################

				################
mailq			## Examine the 
sendmail -bp	## mail queue
				################

sendmail -bt		## Run Sendmail in test mode

sendmail -q			## Force a queue run
## ==================================================================================== ##







    +---------------------------------------------------------------------------+
    |                                                                           |
    | dnl This changes sendmail to only listen on the loopback device 127.0.0.1 |
    | dnl and not on any other network devices.                                 |
    | DAEMON_OPTIONS(`Port=smtp,Addr=127.0.0.1, Name=MTA')                      |
    |                                                                           |
    |                                                                           |
    +---------------------------------------------------------------------------+




## ==================================================================================== ##




less pager commands

g Go to first line in the file
G Go to last line in the file
F Go to the end of the file, and move forward as the file grows
-N Show line numbers
-n Don't show line numbers
= Show information about the file


  e  ^E  j  ^N  CR  *  Forward  one line   (or N lines).
  y  ^Y  k  ^K  ^P  *  Backward one line   (or N lines).
  f  ^F  ^V  SPACE  *  Forward  one window (or N lines).
  b  ^B  ESC-v      *  Backward one window (or N lines).
  z                 *  Forward  one window (and set window to N).
  w                 *  Backward one window (and set window to N).
d  ^D             *  Forward  one half-window (and set half-window to N).
  u  ^U             *  Backward one half-window (and set half-window to N).
/pattern          *  Search forward for (N-th) matching line.
?pattern          *  Search backward for (N-th) matching line.	
&pattern          *  Display only matching lines



A search pattern may be preceded by one or more of:
        ^N or !  Search for NON-matching lines.
        ^E or *  Search multiple files (pass thru END OF FILE).
        ^F or @  Start search at FIRST file (for /) or last file (for ?).
        ^K       Highlight matches, but don't move (KEEP position).
        ^R       Don't use REGULAR EXPRESSIONS.















# Make 'less' behave like 'tail -f'.
less +F somelogfile

# Close shell keeping all subprocess running
disown -a && exit

















		## 
		## 
		## 
		## 
		## 
		## 
		## 
		## 
set -o		## Show the status of all Bash options

set -o 		## Enable a Bash option
set +o		## Disable a Bash option

set -x
set -o xtrace

set -o verbose
		## 
		## prevent an administrator from overwriting a file with a ">"





colored-stats
colored-completion-prefix
completion-ignore-case				## readline performs filename matching and completion in a case-insensitive fashion
mark-directories
mark-symlinked-directories
match-hidden-files
menu-complete-display-prefix

page-completions					## if on eadline uses an internal more-like pager to display a screenful of possible completions at a time.
print-completions-horizontally
visible-stats


functrace					## 


:set terse					## 


set -v
set -o verbose					## Enable printing of shell input lines as they are read
set -x
set -o xtrace					## Enable printing of command traces before execution of each command






set -o notify



set -o functrace

errtrace
posix











file=$1                                      # Assign the filename 
fname=${file%.*}                             # Get the name of the file only
fext=${file#*.}                              # Get the extension of the file 

${var:=value}
assign default value if not defined
${var:+value}
substitute value if var is non-null
${var:-value}
temporarily assign value if non-null
${var:?value}
issue error with value if var not set,
otherwise substitute value



## ======================================================================= ##
   >> test || -b || <file>		## FILE exists and is block special
## ======================================================================= ##
   >> test || -c || <file>		## FILE exists and is character special
## ======================================================================= ##
   >> test || -d || <file>		## FILE exists and is a directory
## ======================================================================= ##
   >> test || -e || <file>		## FILE exists
## ======================================================================= ##
   >> test || -f || <file>		## FILE exists and is a regular file
## ======================================================================= ##
   >> test || -g || <file>		## FILE exists and is set   >> test || -group   >> test || -ID
## ======================================================================= ##
   >> test || -G || <file>		## FILE exists and is owned by the effective group ID
## ======================================================================= ##
   >> test || -h || <file>		## FILE exists and is a symbolic link (same as    >> test || -L)
## ======================================================================= ##
   >> test || -k || <file>		## FILE exists and has its sticky bit set
## ======================================================================= ##
   >> test || -L || <file>		## FILE exists and is a symbolic link (same as    >> test || -h)
## ======================================================================= ##
   >> test || -O || <file>		## FILE exists and is owned by the effective user ID
## ======================================================================= ##
   >> test || -p || <file>		## FILE exists and is a named pipe
## ======================================================================= ##
   >> test || -r || <file>		## FILE exists and read permission is granted
## ======================================================================= ##
   >> test || -s || <file>		## FILE exists and has a size greater than zero
## ======================================================================= ##
   >> test || -S || <file>		## FILE exists and is a socket
## ======================================================================= ##
   >> test || -t || <FD>  		## file descriptor FD is opened on a terminal
## ======================================================================= ##
   >> test || -u || <file>		## FILE exists and its set   >> test || -user   >> test || -ID bit is set
## ======================================================================= ##
   >> test || -w || <file>		## FILE exists and write permission is granted
## ======================================================================= ##
   >> test || -x || <file>		## FILE exists and execute (or search) permission is granted
## ======================================================================= ##


## ================================================================================================= ##
 >> test [ ( EXPRESSION ) ]					## EXPRESSION is true
## ================================================================================================= ##
 >> test [ ! EXPRESSION ]					## EXPRESSION is false
## ================================================================================================= ##
 >> test [ STRING1 ||=|| STRING2 ]			## the strings are equal
## ================================================================================================= ##
 >> test [ STRING1 ||!=|| STRING2 ]			## the strings are not equal
## ================================================================================================= ##
 >> test [ INTEGER1 ||-eq|| INTEGER2 ]		## INTEGER1 is equal to INTEGER2
## ================================================================================================= ##
 >> test [ INTEGER1 ||-ge|| INTEGER2 ]		## INTEGER1 is greater than or equal to INTEGER2
## ================================================================================================= ##
 >> test [ INTEGER1 ||-gt|| INTEGER2 ]		## INTEGER1 is greater than INTEGER2
## ================================================================================================= ##
 >> test [ INTEGER1 ||-le|| INTEGER2 ]		## INTEGER1 is less than or equal to INTEGER2
## ================================================================================================= ##
 >> test [ INTEGER1 ||-lt|| INTEGER2 ]		## INTEGER1 is less than INTEGER2
## ================================================================================================= ##
 >> test [ FILE1 |||-ef|| FILE2 ]			## FILE1 and FILE2 have the same device and inode numbers
## ================================================================================================= ##
 >> test [ FILE1 ||-nt| FILE2 ]				## FILE1 is newer (modification date) than FILE2
## ================================================================================================= ##
 >> test [ FILE1 ||-ot| FILE2 ]				## FILE1 is older than FILE2
## ================================================================================================= ##


# 'funcname()' - function
# '$ENVVAR' - environmental variable
# '&struct_name' - name of a structure (up to two words including 'struct')
# '@parameter' - name of a parameter
# '%CONST' - name of a constant

condition1 || condition2			## True if either condition is true.


condition1 -o condition2			## True if either condition is true.


! condition							## True if condition is false.


if [ "$answer" != "y" ]				## 
if [ ! -r "$1" -o ! -f "$1" ]		## 

while [ -n "$1" ]					## 
while test $# -gt 0					## 




The != character sequence means
“not equal.” Therefore, the following if conditional is true when the value of EXITVALUE is
something other than 0:


if [ $EXITVALUE != 0 ]; then
/usr/bin/logger -t logrotate "ALERT exited abnormally with [$EXITVALUE]"


control structure processes over and over as long as a specified condition
evaluates to false?

until loop runs over and over as long as the condition is false. As
soon as the condition is true, it stops.	
while loop executes over and over until a specified
condition is no longer true









run mysql and cre-
ate a corresponding database on Knoppix:
mysql> CREATE DATABASE database;
You can then import your data with:
$ sudo mysql < database.txt
To copy all of the databases from one server to Knoppix, the procedure is
similar; export all of your databases from the remote server:
$ mysqldump --all-databases > all_databases.txt
Finally, copy all_databases.txt to Knoppix, and import it:
$ sudo mysql < all_databases.txt















## ==================================================================================== ##
## ============================ Starting From The Bottom Up =========================== ##
## ================================= the transport layer ============================== ##
## ================================== the session layer  ============================== ##
## ==================================================================================== ##






		 ________________ {MODulator/DEModulator} (Modems) _______________ 
        | which turns a normal phone connection into a network link. It  |
        | turns the stuff the computer sends into sounds, and listens to |
        | sounds coming from the other end to turn them back into stuff  |
        | for the computer.______________________________________________|


Thinwire/Coax/10base2, 
UTP (Unshielded Twisted Pair)/10baseT 
UTP/100baseT Gigabit ethernet (the name 1000baseT




internetworking - refers to connecting separate networks to build a larger one
					The Internet' is the connection of a whole pile of subnetworks.



• Twisted Pair (TP) TP cables contain multiple pairs of copper wires. Unlike coaxial
cable, where the single copper core is shielded against electromagnetic interference by
a tubular Faraday cage, in TP each pair of copper wires is twisted together in order to
negate electromagnetic interference. TP wires are typically deployed in a star topology.
For example, in a large enterprise, end stations are commonly connected via unshielded
twisted pair (UTP) (typically CAT5) to an aggregator such as an edge switch. This
means that by tapping one pair of TP wires on a switched network, you may receive
traffic relating to only one end station.



Fiber optic cables consist of thin strands of glass (or sometimes plastic) which are bundled
together in order to transmit signals across a distance. Light is transmitted into the fiber
at one end and travels along an optic fiber, reflecting constantly against the walls until it
reaches an optical receiver at the other end. The light naturally degrades during travel, and
depending on the length of the fiber optic cable, an optical regenerator may be used to
amplify the light signal in transit. 3







IP packet begins with an `IP header': at least 20 bytes long

         .-------+-------+---------------+-------------------------------.
         |Version|  IHL  |Type of Service|          Total Length         |
         |-------+-------+---------------+-------------------------------|
         |         Identification        |Flags|      Fragment Offset    |
         |---------------+---------------+-------------------------------|
         |  Time to Live |    Protocol   |         Header Checksum       |
         |---------------+---------------+-------------------------------|
         |                       Source Address                          |
         |---------------------------------------------------------------|
         |                    Destination Address                        |
         `---------------------------------------------------------------'


  The important fields are the Protocol, which indicates whether this is
  a TCP packet (number 6), a UDP packet (number 17) or something else,
  the Source IP Address, and the Destination IP Address.

  Now, if the protocol fields says this is a TCP packet, then a TCP
  header will immediately follow this IP header: the TCP header is also
  at least 20 bytes long:



		The most important fields here are the source port, and destination
		port, which says which service the packet is going to (or coming from,
		in the case of reply packets). The sequence and acknowledgement
		numbers are used to keep packets in order, and tell the other end what
		packets have been received. The ACK, SYN, RST and FIN flags (written
		downwards) are single bits which are used to negotiate the opening
		(SYN) and closing (RST or FIN) of connections.


         .-------------------------------+-------------------------------.
         |          Source Port          |       Destination Port        |
         |-------------------------------+-------------------------------|
         |                        Sequence Number                        |
         |---------------------------------------------------------------|
         |                    Acknowledgment Number                      |
         |-------------------+-+-+-+-+-+-+-------------------------------|
         |  Data |           |U|A|P|R|S|F|                               |
         | Offset| Reserved  |R|C|S|S|Y|I|            Window             |
         |       |           |G|K|H|T|N|N|                               |
         |-------+-----------+-+-+-+-+-+-+-------------------------------|
         |           Checksum            |         Urgent Pointer        |
         `---------------------------------------------------------------'


 		 Following this header comes the actual message which the application
 		 sent (the packet body). A normal packet is up to 1500 bytes: this
 		 means that the most space the data can take up is 1460 bytes (20 bytes
 		 for the IP header, and 20 for the TCP header): over 97%.








echo "## =============================================================== ##"
echo "## ================= NMap Packet Fingerprinting: ================= ##"
echo "## =============================================================== ##"
echo -e "\t\t[?] Tseq is the TCP sequenceability test"
echo -e "\t\t[?] T1 is a SYN packet with a bunch of TCP options to open port"
echo -e "\t\t[?] T2 is a NULL packet w/options to open port"
echo -e "\t\t[?] T3 is a SYN|FIN|URG|PSH packet w/options to open port"
echo -e "\t\t[?] T4 is an ACK to open port w/options"
echo -e "\t\t[?] T5 is a SYN to closed port w/options"
echo -e "\t\t[?] T6 is an ACK to closed port w/options"
echo -e "\t\t[?] T7 is a FIN|PSH|URG to a closed port w/options"
echo -e "\t\t[?] PU is a UDP packet to a closed port"






_______________________________________________________________________________________
	+ Master mode: allows the wireless NIC to work in conjunction with special-
ized driver software in order to allow the computer to act as a WAP for
other devices.

	+ Ad-hoc mode: is used when you have a wireless network setup in which
devices connect directly to each other. In this mode two wireless clients
that want to communicate with each other share the responsibilities that
a WAP would normally handle.

	+ Managed mode: is used when your wireless client connects directly to a
wireless access point (WAP). In these cases, the driver associated with
the wireless NIC relies on the WAP to manage the entire communica-
tions process.
_______________________________________________________________________________________


	A unicast packet: packet that is transmitted from one computer directly to another. The
details of how unicast functions depend upon the protocol using it.


	A broadcast packet: is one that is sent to all ports on a network segment, 
regardless of whether that port is a hub, switch, or router. Remember from the
section “Hubs” on page 8 that hubs are only capable of broadcast traffic.


	Multicast is a means of transmitting a packet from a single source to multiple
destinations simultaneously. The goal of multicast is to make this process as
simple as possible by using as little bandwidth as possible.


	Broadcast Domains: The extent to which broadcast packets travel. it is the network segment where any computer can directly transmit
to another computer without going through a router. Each broadcast domain extends until it reaches the router, broadcast packets circulate
only within this specified broadcast domain.


	Broadcast Packet: is one that is sent to every device on a particular
segment. In larger networks with multiple hubs or switches connected via
different mediums, broadcast packets transmitted from one switch reach
all the way to the ports on the other switches on the network, as they are
repeated from switch to switch.
	 

	Promiscuous mode: what allows a network interface card (NIC) to view all of the packets crossing the cabling system.
it captures everything and passes all traffic it receives to the CPU, basically ignoring the information it finds in a packet’s
Layer 2 addresses.













## ==================================================================================== ##
## ============================ Lower Layers of The OSI Model:========================= ##
## ================================= the transport layer ============================== ##
## ================================== the session layer  ============================== ##
## ==================================================================================== ##



Wireless-Specific Columns:
__________________________________________________________________________________________________________________________

	+ The Received Signal Strength Indication (RSSI): column shows the radio frequency (RF) signal strength of a
captured packet

	+ TX Rate: column shows the data rate of a captured packet

	+ Basic Service Set Identifier (BSS Id): Each WAP  has a unique identifying 
name in a network

	+ IP fragmentation: allows the protocol to break large
amounts of data into chunks that can be sent across the wire and reassembled
on the receiving system.

	+ Flow control: The generation of messages by the receiving system that
instruct the sending system to speed up or slow down its transmission of data

	+ Packet acknowledgment: The transmission of a return message from
the receiving system to the sending system to acknowledge the receipt of data

	+ Error detection: The use of codes by the sending system to verify that
the data sent wasn’t damaged during transmission

	+ Error correction: The retransmission of data that was lost or damaged
during the initial transmission

	+ Segmentation: The division of long streams of data into smaller ones for
more efficient transfer

	+ Data encryption: A function that uses cryptographic keys to protect data
transmitted across a network

	+ Data compression: A method for reducing the size of data transmitted
across a network by eliminating redundant information
________________________________________________________________________________________________________


	Data Encapsulation: Each layer in the stack is responsible for adding a header or
footer to the data being communicated, and these extra bits of information
allow the layers to communicate. For example, when the transport layer
receives data from the session layer, it adds its own header information to
that data before passing it to the next layer.

	The Protocol Data Unit (PDU): The encapsulation process creates a 
protocol data unit (PDU), which includes the data being sent and all header 
or footer information added to it. As data moves down the OSI model, the PDU 
changes and grows as header and footer information from various protocols is added to it. 
The PDU is in its final form once it reaches the physical layer, at which point
it is sent to the destination computer. The receiving computer strips the
protocol headers and footers from the PDU as the data climbs up the OSI
layers. Once the PDU reaches the top layer of the OSI model, only the
original data remains.



	Maximum Transmission Unit (MTU) of a communications protocol of a layer is the size 
(in bytes or octets) of the largest protocol data unit that the layer can pass onwards. 


## ==================================================================================== ##
802.11 (WiFi), 802.15 (Bluetooth), and 802.16 (WiMax)
signal loss 
Attenuation)

Amplitude - is indicative of the strength of the electric field of the waveform and thus the strength/intensity of the emitted signal.
Refraction			## passes through the obstacle but its path is altered.
omnidirectional antenna is a device that radiates a signal in all directions.

The frequency of a RF signal is simply how often the signal repeats or “cycles” in a given
time period, often measured as one second. Frequency is inversely related to the length
of the RF waveform, i.e., the distance an RF wave travels over a given time period (its
wavelength). The higher the frequency of a given RF signal, the shorter the wavelength
and vice versa.


AP emitting an RF signal at a frequency of 2.412 GHz will produce an RF
wavelength that, in one second, repeats itself 2,412,000,000 times. To be able to repeat
itself within the distance traveled in 1 second (electromagnetic signals are emitted at the
speed of light, which is 3 × 108 meters per second), its wavelength must be relatively
short. In this example, it is 12.437 cm. You can derive the wavelength for any given
frequency via the following formula:
Wavelength = Speed of Light * (1/Frequency)
Thus, the wavelength of an AP configured to use channel 1 operating at 2.412 GHz =
(3 × 108) * (1/(2412000000)) = 0.12437 m = 12.437 cm.

## ==================================================================================== ##


                               XXXXXXXXXXXXXXXXXX
                             XXX     Network    XXX
                               XXXXXXXXXXXXXXXXXX
                                       +
                                       |
                                       v
 +-------------+              +------------------+
 |table: filter| <---+        | table: nat       |
 |chain: INPUT |     |        | chain: PREROUTING|
 +-----+-------+     |        +--------+---------+
       |             |                 |
       v             |                 v
 [local process]     |           ****************          +--------------+
       |             +---------+ Routing decision +------> |table: filter |
       v                         ****************          |chain: FORWARD|
****************                                           +------+-------+
Routing decision                                                  |
****************                                                  |
       |                                                          |
       v                        ****************                  |
+-------------+       +------>  Routing decision  <---------------+
|table: nat   |       |         ****************
|chain: OUTPUT|       |               +
+-----+-------+       |               |
      |               |               v
      v               |      +-------------------+
+--------------+      |      | table: nat        |
|table: filter | +----+      | chain: POSTROUTING|
|chain: OUTPUT |             +--------+----------+
+--------------+                      |
                                      v
                               XXXXXXXXXXXXXXXXXX
                             XXX    Network     XXX
                               XXXXXXXXXXXXXXXXXX


## ==================================================================================== ##
## ======== BSD config uses the bridge as a firewall with network address ============= ##
## ======= translation (NAT) that protects a server and internal LAN clients ========== ##
## ==================================================================================== ##


Internet ---- router ( 62.3.3.25 ) ---- bridge (62.3.3.26 gw 62.3.3.25 / 192.168.0.1)
										  |
										  |
										  |---- WWW Server (62.3.3.27 gw 62.3.3.25)
										  |
										  |
										 LAN --- Zipowz (192.168.0.2 gw 192.168.0.1)

## ==================================================================================== ##






## ==================================================================================== ##
/usr/sbin/brctl addbr br0			# Create the interface br0
/usr/sbin/brctl addif br0 eth0		# Add the Ethernet interface to use with the bridge
/usr/sbin/brctl addif br0 eth1		# Start up the Ethernet interface
## ==================================================================================== ##

/sbin/ifconfig eth0 0.0.0.0		# Configure the bridge ethernet
/sbin/ifconfig eth1 0.0.0.0

# The bridge will be correct and invisible ( transparent firewall ).
# Its hidden in a traceroute and you keep your real gateway on the
# other computers. Now if you want you can config a gateway on your
# bridge and choose it as your new gateway for the other computers.

/sbin/ifconfig br0 62.3.3.26 netmask 255.255.255.248 broadcast 62.3.3.31
# I have added this internal IP to create my NAT
ip addr add 192.168.0.1/24 dev br0
/sbin/route add default gw 62.3.3.25


/sbin/ip route del 0.0.0.0
/sbin/ip route del default
/sbin/route del default

## ==================================================================================== ##
## =============================== Netfilter Architecture ============================= ##
## ======= translation (NAT) that protects a server and internal LAN clients ========== ##
## ==================================================================================== ##














## =========================================================================== ##
## ---------------------- The Double Nat Architecture -------------------------- ##
## =========================================================================== ##
## 
##        ASCII Art 1: Untrusted Networks:
## 
## 
##                Network 1
##                192.168.150.0 (Corporate)
## 
##               --------------/-------------------------
## 
## 
##                Network 2
##                192.168.150.0 (Untrusted Network)
## 
## =========================================================================== ##
## --------------------------------------------------------------------------- ##
## =========================================================================== ##
## 
## 
## As you can see, both subnets have overlapping
## network address ranges.
## 
##   3.  First Attempt: Single NAT
## 
## On my first try I simply used a third intermediate network which was
## routed to network 1 and connected the NAT box in-between.
## 
## 
##        ASCII Art 2: Attempt 1
## 
##                  Network 1
##                192.168.150.0 (Corp)
##                      |
##                    Router
##                      |
##                   Network 2
##                192.168.180.0 (Intermediate)
##                           |
##                  NAT BOX  |
##                  eth0 192.168.180.180
##                  eth1 192.168.150.180
##                           |
##                Network 3  |
##                192.168.150.0 (Untrusted Network)
## 
## 
## =========================================================================== ##
## --------------------------------------------------------------------------- ##
## =========================================================================== ##
## 
## Using a combination of Destination NAT mappings and a Source NAT
## remapping, this was a partial success. I could access all the stuff on
## Network 3 from any network that WASN'T network 1. Why ? Localhost
## routing policy on the NAT box.
## 
## --------------------------------------------------------------------------- ##
## The local routing policy on a normal linux system is usually:
## 
## # ------------------------------------- #
## 		o  Directly Connected Interfaces
## 
## 		o  Static Routes
## 
## 		o  Default Routes
## # ------------------------------------- #
## 
## --------------------------------------------------------------------------- ##
## In that order. So since I was directly connected to 192.168.150.0
## there was no way for the NAT box to talk to Network 1 since it was
## technically already directly connected to it, or at least it's
## doppleganger.
## --------------------------------------------------------------------------- ##
## 
## =========================================================================== ##
## --------------------------------------------------------------------------- ##
## =========================================================================== ##





## =========================================================================== ##
## --------------------------------------------------------------------------- ##
## =========================================================================== ##
## when you have a situation where you have two subnets that are the same addressing 
## that wish to communicate, it's a useful hack because it allows you to de-couple 
## them into separate address space.
## --------------------------------------------------------------------------- ##
## 
## 4.  Second Attempt: Double NAT
##        ASCII Art 3: Attempt 2
## 
## --------------------------------------------------------------------------- ##
## 
##                Network 1
##                192.168.150.0 (Corp)
##                                 |
##                Network 2        |
##                192.168.180.0 (Intermediate)
##                                        |
##                        NAT BOX 1       |
##                        eth0 192.168.180.180
##                        eth1 10.15.15.1
##                                    |
##                        NAT BOX 2   |
##                        eth0 10.15.15.2
##                        eth1 192.168.150.252
##                                        |
##                Newtwork 3              |
##                192.168.150.0 (Untrusted Network)
## 
## --------------------------------------------------------------------------- ##
##
## Yeah, like I said it's pretty satanic. So first step, host preparation.
## 
## =========================================================================== ##
## --------------------------------------------------------------------------- ##
## =========================================================================== ##
## 
## --------------------------------------------------------------------------- ##
## 	 6.  DOUBLE NAT
## 
##   6.1.  Assign alias IP addresses to the eth0 interfaces of NAT BOX 1 and 2
## 
## 
## On NAT BOX 1, create 3 new alias interfaces on eth0, e.g.
## 
## 
## -------------------------------------------------------------------------------------------------- ##
## ifconfig eth0:0 192.168.180.181 netmask 255.255.255.0
## ifconfig eth0:1 192.168.180.182 netmask 255.255.255.0
## ifconfig eth0:2 192.168.180.183 netmask 255.255.255.0
## -------------------------------------------------------------------------------------------------- ##
## 
## 
## On NAT BOX 2, create 3 new alias interfaces on eth0, e.g.
## 
## 
## -------------------------------------------------------------------------------------------------- ##
## ifconfig eth0:0 10.15.15.181 netmask 255.255.255.0
## ifconfig eth0:1 10.15.15.182 netmask 255.255.255.0
## ifconfig eth0:2 10.15.15.183 netmask 255.255.255.0
## -------------------------------------------------------------------------------------------------- ##
## 
## 
## 
## 
## 
## 
## 
## 6.2.  Create Static NAT Mappings on NAT BOX 1
## 
## On NAT BOX 1, create 3 new mappings on eth0:
## 
## -------------------------------------------------------------------------------------------------- ##
## Iptables -t nat -A PREROUTING -d 192.168.180.181 -i eth0 -j DNAT --to-destination 10.15.15.181
## Iptables -t nat -A PREROUTING -d 192.168.181.182 -i eth0 -j DNAT --to-destination 10.15.15.182
## Iptables -t nat -A PREROUTING -d 192.168.181.183 -i eth0 -j DNAT --to-destination 10.15.15.183
## -------------------------------------------------------------------------------------------------- ##
## 
## 
## 
## and 1 SOURCE NAT map:
## -------------------------------------------------------------------------------------------------- ##
## Iptables -A POSTROUTING -s 192.168.150.0/255.255.255.0 -d 10.15.15.0/255.255.255.0 -j SNAT -o eth1 --to-source 10.15.15.1
## -------------------------------------------------------------------------------------------------- ##
## 
## 
## This takes care of NAT BOX 1, and allows you to talk to NAT BOX 2.
## 
## 6.3.  Create Static NAT Mappings on NAT BOX 2
## 
## On NAT BOX 2, create 3 new mappings on eth0:
## 
## -------------------------------------------------------------------------------------------------- ##
## Iptables -t nat -A PREROUTING -d 10.15.15.181 -i eth0 -j DNAT --to-destination 192.168.150.10
## Iptables -t nat -A PREROUTING -d 10.15.15.182 -i eth0 -j DNAT --to-destination 192.168.150.11
## Iptables -t nat -A PREROUTING -d 10.15.15.183 -i eth0 -j DNAT --to-destination 192.168.150.12
## -------------------------------------------------------------------------------------------------- ##
## 
## 
## and 1 SOURCE NAT map to our target destinations:
## 
## -------------------------------------------------------------------------------------------------- ##
## Iptables -A POSTROUTING -s 10.15.15.0/24 -d 192.168.150.0/24 -j SNAT -o eth1 --to-source 192.168.150.252
## -------------------------------------------------------------------------------------------------- ##
## 
## You should now be done. Now it is possible to access 192.168.150.150
## through 152 on network 3 via the addresses 192.168.180.181-183 on
## network 2 from network 1.

## =========================================================================== ##
## --------------------------------------------------------------------------- ##
## =========================================================================== ##

























three subnetworks connected through one node:


                          o
              o           |  o--o--o
              |           |  |
              o--o--o--o--o  o
                     \       |
                      o------o
                     /       |
              o--o--o--o--o  o
              |           |  |
              o           |  o--o
                          o



Star Topology - Network Links and each node is a dot. 
Maybe each line leads into a central node like a big star


              o   o   o
               \_ | _/
                 \|/
            o-----o-----o
                _/|\_
               /  |  \
              o   o   o



  Netfilter is merely a series of hooks in various points in a protocol
  stack (at this stage, IPv4, IPv6 and DECnet). The (idealized) IPv4
  traversal diagram looks like the following:



       A Packet Traversing the Netfilter System:

          --->[1]--->[ROUTE]--->[3]--->[4]--->
                        |            ^
                        |            |
                        |         [ROUTE]
                        v            |
                       [2]          [5]
                        |            ^
                        |            |
                        v            |


  The hooks that are registered with netfilter are as follows (with the
  functions in each hook in the order that they are actually called):



          --->PRE------>[ROUTE]--->FWD---------->POST------>
              Conntrack    |       Mangle   ^    Mangle
              Mangle       |       Filter   |    NAT (Src)
              NAT (Dst)    |                |    Conntrack
              (QDisc)      |             [ROUTE]
                           v                |
                           IN Filter       OUT Conntrack
                           |  Conntrack     ^  Mangle
                           |  Mangle        |  NAT (Dst)
                           v                |  Filter


Routes can either point to a link, or a particular node which is
  connected to another network. For example, when you dial up to the
  ISP, your default route will point to the modem link, because thats
  where the entire world is.



         Rustys              ISPs 	 ~~~~~~~~~~~~
          Modem               Modem {            }
              o------------------o { The Internet }
                                    {            }
                                     ~~~~~~~~~~~~




Dial−up Architecture
You may be using a dialup service like an ISDN line. In this case you might use a third network card to
provide provide a filtered DMZ. This gives you full control over your Internet services and still separates
them from your regular network.
				 __________
	 _/\__/\_ | | _______________
	| 		 | | Firewall | (LAN) | |
   / Internet \−−−−| System |−−(HUB)−−| Workstation/s |
 	\_ _ _ _/ |__________| |_______________|
 \/ \/ \/ |
 (DMZ)
 (HUB)
  _/\__/\_ | | _______________
 | 		  | | Firewall | (LAN) | |
/ Internet \−−−−| System |−−(HUB)−−| Workstation/s |
 \_ _ _ _/ |__________| |_______________|

				## ================================== ##
				## Here is a table of network masks: ## 
				## =================================== ## 
## ____________________________________________________________________________________________
##   Short      Full                     Maximum         	 	
##   Form       Form                     Machines				Comment
## ____________________________________________________________________________________________
## || /8  ||  /255.0.0.   \\ 			|| 16,777,215 ||      Used to be called an `A-class'
## || /16 ||  /255.255.0.  \\  			|| 65,535     //     Used to be called an `B-class'
## || /17 ||  /255.255.128. \\ 			|| 32,767	 //
## || /18 ||  /255.255.192.	 ||			|| 16,383	//
## || /19 ||  /255.255.224.  ||    		|| 8,191   //
## || /20 ||  /255.255.240.  ||			|| 4,095  //
## || /21 ||  /255.255.248.   \\ 	 	|| 2,047 ||
## || /22 ||  /255.255.252.0   ||		|| 1,023 ||
## || /23 ||  /255.255.254.0   ||		|| 511	 ||
## || /24 ||  /255.255.255.0   ||		|| 255	 //        Used to be called a `C-class'
## || /25 ||  /255.255.255.128 ||		|| 127  //
## || /26 ||  /255.255.255.192 ||		|| 63  //
## || /27 ||  /255.255.255.224 ||		|| 31 ||
## || /28 ||  /255.255.255.240 ||		|| 15 ||
## || /29 ||  /255.255.255.248 ||		|| 7  ||
## || /30 ||  /255.255.255.252 || _____ || 3  || ______________________________________________
## ========================================================================================= ## 
###############################################################################################








route del default				## deletes the current default route


ifconfig eth0 <IP>                 Set IP address
ifconfig eth0 <IP> netmask <IP>    Set IP and netmask
route add default gw <IP>          Set gateway


brctl addbr br0
brctl addif br0 eth0 eth1
ifconfig br0 up








       To create ingress mirroring from port eth1 to port eth2:

              tc qdisc  add dev eth1 handle ffff: ingress
              tc filter add dev eth1 parent ffff:           \
                      matchall skip_sw                      \
                      action mirred egress mirror           \
                      dev eth2

       The first command creats an ingress qdisc with handle ffff:  on  device
       eth1  where  the  second command attaches a matchall filters on it that
       mirrors the packets to device eth2.

       To create egress mirroring from port eth1 to port eth2:

       tc qdisc add dev eth1 handle 1: root prio
       tc filter add dev eth1 parent 1:               \
               matchall skip_sw                       \
               action mirred egress mirror            \
               dev eth2














ifconfig -a | egrep -e "(^eth|drop)"












##################################################################################
dig @127.0.0.1 NS sun.com          # To test the local server 
dig @204.97.212.10 NS MX heise.de  # Query an external server 
dig AXFR @ns1.xname.org cb.vu      # Get the full zone (zone transfer) 
dig @137.65.10.1 mail.mydom.com –t MX
##################################################################################
host ‐t MX cb.vu                   # Get the mail MX entry 
host ‐t NS ‐T sun.com              # Get the NS record over a TCP connection 
host ‐a sleepyowl.net              # Get everything 
##################################################################################



#############################
	## Reverse queries ##
#############################
##################################################################################################################
dig ‐x 78.31.70.238 		# Find the name belonging to an IP address
host 78.31.70.238 			# This can be done with  dig ,  host  and  nslookup
nslookup 78.31.70.238
##################################################################################





## ==================================================================================== ##
				1-1023			privileged ports, used server-side
				1024-65535		unprivileged ports, used client-side
				1024-49151		ICANN has reserved ports for 
								special implementations.


UDP protocol sends IP packs without requiring acknowledgment of receipt of those
packets from the destination host


## ==================================================================================== ##
| 20|  |TCP|UDP|	+{FTP data transfer}
| 22|  |---|UDP|	+{Secure Shell} (SSH), secure logins, file transfers (scp, sftp)
| 23|  |TCP|UDP|	+{Telnet}
| 25|  |TCP|UDP|	+{Simple Mail Transfer Protocol} (SMTP)
| 43|  |TCP|UDP|	+{WHOIS}
| 53|  |TCP|UDP|	+{Domain Name System} (DNS)
| 67|  |TCP|UDP|	+{Bootstrap Protocol} (BOOTP) The Dynamic Host Configuration Protocol (DHCP)
| 68|  |TCP|UDP|	+{Bootstrap Protocol} (BOOTP) client; also used by Dynamic Host Configuration Protocol (DHCP)
| 69|  |---|UDP|	+{Trivial File Transfer Protocol} (TFTP)
|115|  |TCP|---|	+{Simple File Transfer Protocol}
|117|  |STD|---|	{UUCP Path Service 	Official}
|118|  |TCP|UDP|	{Structured Query Language} (SQL) Services
|123|  |TCP|UDP|	{Network Time Protocol} (NTP)
|143|  |TCP|---|	{Internet Message Access Protocol} (IMAP), 
|156|  |TCP|UDP|	{SQL Service}
|177|  |TCP|UDP|	{X Display Manager Control Protocol} (XDMCP)
|194|  |TCP|UDP|	{Internet Relay Chat} (IRC)
|220|  |TCP|UDP|	{Internet Message Access Protocol} (IMAP), version 3
|443|  |---|UDP|	{Hypertext Transfer Protocol} over TLS/SSL (HTTPS)
|465|  |TCP|---|	{Simple Mail Transfer Protocol} over TLS/SSL (SMTPS)
|513|  |TCP|---|	{rlogin} 
|514|  |---|UDP|	{Syslog}
|515|  |TCP|---|	{Line Printer Daemon (LPD), print service
|540|  |TCP|---|	{Unix-to-Unix Copy Protocol (UUCP)
|546|  |TCP|UDP|	{DHCPv6 client
|547|  |TCP|UDP|	{DHCPv6 server
|587|  |TCP|---|	{mail message submission[24] (SMTP)
|2049| |---|UDP|	{NFS Network File System
|2086| |TCP|UDP|	{GNUnet
## ==================================================================================== ##
|3306|  |TCP|UDP|	+{MySQL database system
|1433|  |TCP|UDP|	+{Microsoft SQL Server database management system (MSSQL) 
|1434|  |TCP|UDP|	+{Microsoft SQL Server database management system (MSSQL) monitor
|2638|  |TCP|UDP|	+{SQL Anywhere database server[
|3306|  |TCP|UDP|	+{MySQL database system
## ==================================================================================== ##
|6514| 	|TCP|---|	+{Syslog over TLS
|6665|  |TCP|---|	+{Internet Relay Chat (IRC)
|6669|	|TCP|---|	+{IRC SSL (Secure Internet Relay Chat)
|6697| 	|TCP|---|	+{IRC SSL (Secure Internet Relay Chat)
|8010| 	|TCP|---|	+{XMPP File transfers
|9091| 	|TCP|---|	+{Transmission (BitTorrent client) Web Interface
## ==================================================================================== ##
|8834| 						Nessus web 	Unofficial
|8835| 						Passive Vulnerability Scanner web
## ==================================================================================== ##
|2827| 		|TCP|---|	+{I2P BOB Bridge
|7655| 		|---|UDP|	+{I2P SAM Bridge Socket API 	Unofficial
|8998| 		|TCP|---|	+{I2P Monotone Repository
|8444| 		|TCP|---|	+{Bitmessage
|4444–4445| |TCP|---|	+{I2P HTTP/S proxy
|7652–7654| |TCP|---|	+{I2P anonymizing overlay network 	Unofficial
|7656–7660| |TCP|---|	+{I2P anonymizing overlay network
## ==================================================================================== ##
|8888| 		|TCP|---|	+{Freenet HTTP
## ==================================================================================== ##
|8118| 		|TCP|---|	+{Privoxy—advertisement-filtering Web proxy 	Official
|8123| 		|TCP|---|	+{Polipo Web proxy
|9001| 					+{Tor network default
|9030| 		|TCP|---|	+{Tor often used
|9050–9051| |TCP|---|	+{Tor
|9150| 		|TCP|---|	+{Tor
## ==================================================================================== ##
|9333| 	|TCP|---|	+{Litecoin
|9898| 	|TCP|---|	+{Tripwire
|11371| |TCP|UDP|	+{OpenPGP HTTP key server
|3128| 	|TCP|---|	+{Squid caching web proxy
## ==================================================================================== ##
|220|	+{ESMTP HELO Postfix
|250|	+{EHLO SMTP
|250|	+{SMTP Ok
|250|	+{To RCPT Ok
|354|	+{SMTP End data with <CR><LF>.<CR><LF>
|221|	+{SMTP QUIT Bye
## ==================================================================================== ##


||  |TCP|---|	
||  |TCP|---|	
||  |TCP|---|	
||  |TCP|---|	
||  |TCP|---|	
||  |TCP|---|	
| 69|	|---|UDP| 		Trivial File Transfer Protocol (TFTP)
||	|---|UDP| 
||	|---|UDP| 
||	|---|UDP| 
||	|---|UDP| 
||  |TCP|UDP| 
||  |TCP|UDP| 
||  |TCP|UDP| 
||  |TCP|UDP| 
||  |TCP|UDP| 
___________________________________________________________________
Layer 			Protocol
________________________________________________________
Application		+{HTTP|SMTP|FTP|Telnet}
Presentation	+{ASCII, MPEG, JPEG, MIDI
Session			+{NetBIOS, SAP, SDP, NWLink
Transport		+{TCP, UDP, SPX
Network			+{IP, ICMP, ARP, RIP, IPX
Data Link		+{Ethernet, Token Ring, FDDI, AppleTalk
## ================================================== ##


Cipher suite name
TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384_P384	AES 256 SHA
TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA*				AES 256 SHA		
TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA*				AES 128 SHA
TLS_DHE_RSA_WITH_AES_256_CBC_SHA				AES 256 SHA
TLS_DHE_RSA_WITH_AES_128_CBC_SHA				AES 128 SHA
TLS_RSA_WITH_RC4_128_SHA						RC4 128 SHA
TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA				3DES 168 SHA





  _________________    ________________________
    ||____  ____||
	||	  ||	||
		 _||_
    	 \\//
	______\/______________________________________________

   _________________    ________________________
    ||Application||		+{HTTP|SMTP|FTP|Telnet}
		  ||
		 _||_
    	 \\//
	______\/______________________________________________
	 |Presentation|	+{ASCII|MPEG|JPEG|MIDI}
		  ||
		 _||_
    	 \\//
	 _____\/_______		_______________________________
	  ||Session||		+{NetBIOS|SAP|SDP|NWLink}

		  ||
		 _||_
    	 \\//
	______\/______________________________________________
 	 |Transport|		+{TCP|UDP|SPX}

		  ||
		 _||_
    	 \\//
	______\/______________________________________________
	  |Network|			+{IP|ICMP|ARP|RIP|IPX}

		  ||
		 _||_
    	 \\//
	______\/______________________________________________
 	 |Data Link|		+{Ethernet|Token Ring|FDDI|AppleTalk}




Open Systems Interconnections (OSI) reference model:
______________________________________________________
Application (Layer 7)
Presentation (Layer 6)
Session (Layer 5)
Transport (Layer 4)
Network (Layer 3)
Data link (Layer 2)
Physical (Layer 1)
______________________________________________________





	+{The Application Layer} the topmost layer on the OSI model, provides a means
for users to actually access network resources. This is the only layer typically
seen by end users, as it provides the interface that is the base for all of their
network activities.
## ================================================================================================ ##

	+{The Presentation Layer: transforms the data it receives into a format that can be
read by the application layer. The data encoding and decoding done here
depends on the application layer protocol that is sending or receiving the
data. This layer also handles several forms of encryption and decryption used
for securing data.
## ================================================================================================ ##

	+{The Session Layer} manages the dialog, or session between two computers; it
establishes, manages, and terminates this connection among all communi-
cating devices. The session layer is also responsible for establishing whether a
connection is duplex or half-duplex and for gracefully closing a connection
between hosts, rather than dropping it abruptly.

	+{The Transport Layer} The primary purpose of the transport layer is to provide reliable 
data transport services to lower layers. Through features including flow control, segmentation
and desegmentation, and error control, the transport layer makes sure data
gets from point to point error free. Because ensuring reliable data trans-
portation can be extremely cumbersome, the OSI model devotes an entire
layer to it. The transport layer provides its services to both connection-oriented
and connectionless protocols. Firewalls and proxy servers operate at this layer.
## ================================================================================================ ##

	+{The Network Layer} is responsible for routing data between physical networks,
and it is one of the most complex OSI layers. It is responsible for the logical
addressing of network hosts (for example, through an IP address), and it also
handles packet segmentation, protocol identification, and in some cases,
error detection. Routers operate at this layer.
## ================================================================================================ ##

	+{The Data Link Layer} provides a means of transporting data across a physical
network. Its primary purpose is to provide an addressing scheme that can
be used to identify physical devices and provide error-checking features to
ensure data integrity. Bridges and switches are physical devices that operate
at this layer.
## ================================================================================================ ##

	+{The Physical Layer} at the bottom of the OSI model is the physical medium
through which network data is transferred. This layer defines the physical
and electrical nature of all hardware used, including voltages, hubs, network
adapters, repeaters, and cabling specifications. The physical layer establishes
and terminates connections, provides a means of sharing communication
resources, and converts signals from digital to analog and vice versa.
## ================================================================================================ ##


_________________________________________________________________________________
 • {The Link-Level Protocol}		| Describes how to get from one node to ||
									| another if theyre connected directly. ||
									|=======================================||______________________
									| The Network Protocol tells us how to get from one 	||
 									| point in the network to any other, going through		||
									| other links if necessary._____________________________||________
## ================================================================================================ ##





-   Filter - this is the default table. Its built-in chains are:
    :   -   Input - is for packets going to local sockets
        -   Forward - is for packets routed through the server
        -   Output - is for locally-generated packets

-   Nat - when a packet creates a new connection this is the table that is used. Its built-in chains are Prerouting, Output, and Postrouting
    :   -   Prerouting is for packets when they come in
        -   Output is for locally-generated packets before routing takes place
        -   Postrouting is for altering packets on the way out

-   Mangle - is used for special altering of packets. Its chains are Pre/Post routing, Forward, Input, and Output
    :   -   Prerouting is for incoming packets
        -   Postrouting is for packets going out
        -   Output is for locally generated packets that are being altered.
        -   Input is for packets coming directly into the server
        -   Forward is for packets being routed through the server

-   Raw - is used primarily for configuring exemptions from connection tracking. The built-in chains are Prerouting and Output.
    :   -   Prerouting is for packets that arrive by the network interface
        -   Output is for processes that are locally generated

-   Security - is used for Mandatory Access Control (MAC) rules. After the filter table, the security table is accessed next. The built-in chains are Input, Output, and Forward.
    :   -   Input pertains to packets entering the server
        -   Output is for locally-generated packets
        -   Forward is for packet passing through the server






We call this array of protocols a [protocol stack]:


		 ___________________________			 ________________________________
        [ Application: Handles Porn ]           [ Application Layer: Serves Porn ]
                     |                                          ^
                     v                                          |
		_____________________________			 _____________________________
       [ TCP: Handles Retransmission ]          [ TCP: Handles Retransmission ]
                     |                                          ^
                     v                                          |
			_____________________					  _____________________
           [ IP: Handles Routing ]                   [ IP: Handles Routing ]
																 
                     |                                          /|\
                     v                                           |
		___________________________				 ____________________________
       [ Link: Handles A Single Hop ]           [ Link: Handles A Single Hop ]
                     |                                          |
                     +------------------------------------------+


[NAT] (Network Address Translation)  NAT allows you to map an IP address into another
one on a different network segment. It can be used to make computers inside a LAN visible to
an external network such as the Internet, while disguising their true IP addresses.

The Two Types of NAT

  I divide NAT into two different types: Source NAT (SNAT) and
  Destination NAT (DNAT).

  Source NAT is when you alter the source address of the first packet:
  i.e. you are changing where the connection is coming from.  Source NAT
  is always done post-routing, just before the packet goes out onto the
  wire. Masquerading is a specialized form of SNAT.

  Destination NAT is when you alter the destination address of the first
  packet: i.e. you are changing where the connection is going to.
  Destination NAT is always done before routing, when the packet first
  comes off the wire. Port forwarding, load sharing, and transparent
  proxying are all forms of DNAT.






             _____                                     _____
            /     \                                   /     \
          PREROUTING -->[Routing ]----------------->POSTROUTING----->
            \D-NAT/     [Decision]                    \S-NAT/
                            |                            ^
                            |                            |
                            |                            |
                            |                            |
                            |                            |
                            |                            |
                            |                            |
                            --------> Local Process ------



Masquerading  Masquerading is a form of network address translation (NAT). It allows you
to provide Internet access to all of the computers on a LAN with a single public IP address.

#### ========================================================================= #####
## +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  ##
#### ========================================================================= #####
## 
## ------------------------------------------------------------------------------ ##
## $Filter 	This is the default table (if no -t option is passed).  It contains
##        	the  built-in chains INPUT (for packets coming into the box itself),
##       	FORWARD (for packets being routed through the box), and OUTPUT (for
##       	locally-generated packets).
## 
#### ========================================================================= #####
## +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  ##
#### ========================================================================= #####
## 
## ------------------------------------------------------------------------------ ##
## $Nat   This table is consulted when a packet that creates a new connection
##        is encountered.  It consists of three built-ins: PREROUTING (for
##        altering packets as soon as they come in), OUTPUT (for altering
##        locally-generated packets before routing), and POSTROUTING (for
##        altering packets as they are about to go out).
## 
#### ========================================================================= #####
## +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  ##
#### ========================================================================= #####
## 
## ------------------------------------------------------------------------------ ##
## $Mangle	It had two built-in chains: PREROUTING (for altering incoming
##        	packets before routing) and OUTPUT (for altering locally-generated
##        	packets before routing).  Recently three other built-in
##        	chains are added: INPUT (for packets coming into the box
##        	itself), FORWARD (for altering packets being routed through the
##        	box), and POSTROUTING (for altering packets as they are about to go
##        	out).
## ------------------------------------------------------------------------------ ##
## 
#### ========================================================================= #####
## +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  ##
#### ========================================================================= #####
## 
## ------------------------------------------------------------------------------ ##
##       ...iface...                              ...iface...
##          |                                        ^
##          v                                        |
## -mangle,NAT-               -mangle,filter-   -mangle,NAT--
## |PREROUTING|-->[Routing]-->|FORWARD      |-->|POSTROUTING|
## ------------    |    ^     ---------------   -------------
##                 |    |                           ^
##                 |    +--if NATed------------+    |
##                 v                           |    |
##      -mangle,filter-                -mangle,NAT,filter-
##      |INPUT        |  +->[Routing]->|OUTPUT           |
##      ---------------  |             -------------------
##                 |     |
##                 v     |
##         ... Local Process...
## ------------------------------------------------------------------------------ ##
## ============================================================================== ##




PREROUTING chain is used
to apply rules in the nat table to packets that have not yet gone through the
routing algorithm in the kernel in order to determine the interface on which
they should be transmitted.


POSTROUTING chain is responsible for processing packets once they
have gone through the routing algorithm in the kernel and are just about to
be transmitted on the calculated physical interface. Packets processed by this
chain have passed the requirements of the OUTPUT or FORWARD chains in the
filter table







                            _____
  Incoming                 /     \         Outgoing
         -->[Routing ]--->|FORWARD|------->
            [Decision]     \_____/        ^
                 |                        |
                 v                       ____
                ___                     /    \
               /   \                 |OUTPUT|
              |INPUT|                  \____/
               \___/                      ^
                 |                        |
                  ----> Local Process ----







  So the packet path is:


                                       v    __________________________
                `INPUT'                |   /    `test'                v
               ------------------------|--/    -----------------------|----
               | Rule1                 | /|    | Rule1                |   |
               |-----------------------|/-|    |----------------------|---|
               | Rule2                 /  |    | Rule2                |   |
               |--------------------------|    -----------------------v----
               | Rule3                 /--+___________________________/
               ------------------------|---
                                       v



  User-defined chains can jump to other user-defined chains (but don't
  make loops: your packets will be dropped if they're found to be in a
  loop).






                 rate (pkt/s)
                       ^        .---.
                       |       / DoS \
                       |      /       \
          Edge of DoS -|.....:.........\.......................
           = (limit *  |    /:          \
          limit-burst) |   / :           \         .-.
                       |  /  :            \       /   \
                       | /   :             \     /     \
          End of DoS  -|/....:..............:.../.......\..../.
           = limit     |     :              :`-'         `--'
          -------------+-----+--------------+------------------> time (s)
             LOGIC =>  Match | Didn't Match |    Match








                  <--Flood 1-->           <---Flood 2--->

          Total  ^                   Line  __--      YNNN
          Packets|               Rate  __--      YNNN
                 |            mum  __--      YNNN
              10 |        Maxi __--         Y
                 |         __--            Y
                 |     __--               Y
                 | __--    YNNN
                 |-    YNNN
               5 |    Y
                 |   Y                                Key:  Y -> Matched Rule
                 |  Y                                       N -> Didn't Match Rule
                 | Y
                 |Y
               0 +-------------------------------------------------->  Time (seconds)
                  0   1   2   3   4   5   6   7   8   9  10  11  12









### Basic iptables Parameters

| Parameter             | Description                                                                              |
|:----------------------|:-----------------------------------------------------------------------------------------|
| `-p, -- protocol`     | The rule, such as TCP, UDP, etc.                                                         |
| `-s, -- source`       | Can be an address, network name, hostname, etc.                                          |
| `-d, -- destination`  | An address, hostname, network name, etc.                                                 |
| `-j, -- jump`         | Specifies the target of the rule; i.e. what to do if the packet matches.                 |
| `-g, --goto chain`    | Specifies that the processing will continue in a user specified chain.                   |
| `-i, --in-interface`  | Names the interface from where packets are received.                                     |
| `-o, --out-interface` | Name of the interface by which a packet is being sent.                                   |
| `-f, --fragment`      | The rule will only be applied to the second and further fragments of fragmented packets. |
| `-c, --set-counters`  | Enables the admin to initialize the packet and byte counters of a rule.                  |
|:----------------------|:-----------------------------------------------------------------------------------------|



### Basic iptables Options


| Option                     | Description                                                                                                      |
|:---------------------------|:-----------------------------------------------------------------------------------------------------------------|
| `-A --append`              | Will add one or more rules to the end of the selected chain.                                                     |
| `-C --check`               | Checks for a rule matching the specifications in the selected chain.                                             |
| `-D --delete`              | Deletes one or more rules from the selected chain.                                                               |
| `-F --flush`               |  The option is the equivalent to deleting all the rules one-by-one.                                              |
| `-I --insert`              | Inserts one or more rules in the selected chain as the given rule number.                                        |
| `-L --list`                | Displays are the rules in the selected chain                                                                     |
| `-n --numeric`             | Will display the IP address and post number in numeric format. By default it tries to display the hostname, etc. |
| `-N --new-chain <name>`    | Creates a new user defined chain.                                                                                |
| `-v --verbose`             | Provides more information when used with the list option.                                                        |
| `-X --delete-chain <name>` | Deletes the user-defined chain specified.                                                                        |
|:---------------------------|:-----------------------------------------------------------------------------------------------------------------|



object-file
       points  to  an  object  file that has an executable and linkable format (ELF) and contains eBPF opcodes and eBPF map defini‐
       tions. The LLVM compiler infrastructure with clang(1) as a C language front end is one project that supports  emitting  eBPF
       object files that can be passed to the eBPF classifier


Section - the name of the ELF section from the object file, where the eBPF classifier or action resides.  By  default  the  section
       name  for  the  classifier  is called "classifier"

export - 	points to a Unix domain socket file. In case the eBPF object file also contains a section named "maps" with eBPF map  speci‐
       fications,  then  the  map  file  descriptors  can  be  handed off via the Unix domain socket to an eBPF "agent" herding all
       descriptors after tc lifetime. This can be some third party application implementing the IPC  counterpart  for  the  import,
       that  uses  them  for  calling into bpf(2) system call to read out or update eBPF map data from user space, for example, for
       monitoring purposes or to push down new policies.

The cBPF bytecode is directly passed as a  text  string  in  the
       form  of ´s,c t f k,c t f k,c t f k,...´ , where s denotes the number of subsequent 4-tuples. One such 4-tuple consists of c
       t f k decimals, where c represents the cBPF opcode, t the jump true offset target, f the jump false offset target and k  the
       immediate  constant/literal.  There  are various tools that generate code in this loadable format



To enable eBPF/eBPF JIT support, depending which of the two the given
       architecture supports:

           echo 1 > /proc/sys/net/core/bpf_jit_enable

       A given restricted C file can be compiled via LLVM as:

           clang -O2 -emit-llvm -c bpf.c -o - | llc -march=bpf -filetype=obj -o bpf.o













Bridging Interfaces:



                                                                 /\
                 Ethernet           Ethernet           ATM    /-/  \
       ---------          ---------          ---------     /-/      |
       |  Box  |----------|Bridge |----------|Router |-----| Inter-  \
       ---------          ---------          ---------     \  net  ---|
                ^        ^         ^        ^               \     /
                |        |         |        |                \---/
               eth0     eth0      eth1     if0                 ^
                |        |         |        |                  |
             10.0.3.2   none/10.0.3.1      195.137.15.7    anything else
                         \         /
                          \       /
          ^                \-br0-/
          |                                      ^             ^
          |                   ^                  |             |
          |                   |                  |             |
         own                 own              foreign        hostile







A Packet Traversing the Netfilter System:

          --->[1]--->[ROUTE]--->[3]--->[4]--->
                        |            ^
                        |            |
                        |         [ROUTE]
                        v            |
                       [2]          [5]
                        |            ^
                        |            |
                        v            |



  On the left is where packets come in: having passed the simple sanity
  checks (i.e., not truncated, IP checksum OK, not a promiscuous
  receive), they are passed to the netfilter framework's
  NF_IP_PRE_ROUTING [1] hook.

  Next they enter the routing code, which decides whether the packet is
  destined for another interface, or a local process. The routing code
  may drop packets that are unroutable.

  If it's destined for the box itself, the netfilter framework is called
  again for the NF_IP_LOCAL_IN [2] hook, before being passed to the
  process (if any).

  If it's destined to pass to another interface instead, the netfilter
  framework is called for the NF_IP_FORWARD [3] hook.

  The packet then passes a final netfilter hook, the NF_IP_POST_ROUTING
  [4] hook, before being put on the wire again.

  The NF_IP_LOCAL_OUT [5] hook is called for packets that are created
  locally. Here you can see that routing occurs after this hook is
  called: in fact, the routing code is called first (to figure out the
  source IP address and some IP options): if you want to alter the
  routing, you must alter the `skb->dst' field yourself, as is done in
  the NAT code.





  The hooks that are registered with netfilter are as follows (with the
  functions in each hook in the order that they are actually called):


          --->PRE------>[ROUTE]--->FWD---------->POST------>
              Conntrack    |       Mangle   ^    Mangle
              Mangle       |       Filter   |    NAT (Src)
              NAT (Dst)    |                |    Conntrack
              (QDisc)      |             [ROUTE]
                           v                |
                           IN Filter       OUT Conntrack
                           |  Conntrack     ^  Mangle
                           |  Mangle        |  NAT (Dst)
                           v                |  Filter



























1024 to 49151 are the registered ports

49152 - 65535 are the dynamic ports


What is the highest numbered TCP /IP port?
65535


Perform a PTR DNS query on a Class C range and return FQDNs
 __________________________________________________________________________
 <{■}> Multicast	| is a means of transmitting a packet from a single |
					| source to multiple destinations simultaneously. 	|
____________________________________________________________________________
 <{■}> unicast packet	|| The packet that is transmitted from ||
						|| one computer directly to another.   ||
______________________________________________________________________________
 <{■}> 	|| is one that is sent to every device on a particular
segment.
 <{■}> 
 {+}
µ
 ¥ Æ Æ ª
¤ £ ¥ €
_________________________________________________________________________________________
 | {+} Promiscuous 	 | what allows a network interface card (NIC) to view all of the  |
 |  	  Mode 		 |	• packets crossing the cabling system. it captures everything |
 |					 |	• and passes all traffic it receives to the CPU.			  |
========================================================================================
	

 ■ Netmask 		| The {Subnetwork Mask} that defi nes which part of the IP address
				| represents the network and which the host.

■ Gateway—The IP address of the computer or device on the network that acts
as the default route.
_________________________________________________________________________________________
 |   Broadcast		|   	 |
 |    Packet		|	• 	 |
 |  	  	 		|	• 	 |
========================================================================================
_______________________________________________________________________________________
 ■ Lease time 	 | When an IP address is dynamically allocated to the DHCP		   |
				 |	• client (Linux system), that client is assigned a lease time. |
=======================================================================================

			Linux Container Life Cycle
Creating / Destroying Container (Persistent Container)


          ---------
         | STOPPED |<---------------
          ---------                 |
              |                     |
            start                   |
              |                     |
              V                     |
          ----------                |
         | STARTING |--error-       |
          ----------         |      |
              |              |      |
              V              V      |
          ---------    ----------   |
         | RUNNING |  | ABORTING |  |
          ---------    ----------   |
              |              |      |
         no process          |      |
              |              |      |
              V              |      |
          ----------         |      |
         | STOPPING |<-------       |
          ----------                |
              |                     |
               ---------------------





/etc/sysconfig/network-scripts

ifcfg-eth0


/usr/share/doc/initscripts-*

■ PEERDNS—Setting PEERDNS=no prevents DHCP from overwriting the
/etc/resolv.conf fi le.
■ DNS?—If an ifcfg fi le is being managed by NetworkManager

/etc/sysconfig/network-scripts

						  ===================================================================================
/etc/sysconfig/network		| Systemwide settings associated with your local networking can be  		 |
							| --> included in this file. Hostname variable is most commonly set in this	 |
						  ===================================================================================

						  ===================================================================================
							| 																			|
							| --> 																		|
						  ===================================================================================

						  ===================================================================================
							| 																			|
							| --> 																		|
						  ===================================================================================

						  ===================================================================================
							| 																			|
							| --> 																		|
						  ===================================================================================

						  ===================================================================================
							| 																			|
							| --> 																		|
						  ===================================================================================

						  ===================================================================================
							| 																			|
							| --> 																		|
						  ===================================================================================







Up to MAXNS (currently
              3, see <resolv.h>) name servers may be listed,



Each nameserver entry identifi es the IP address of a DNS server. The order is the order in
which the DNS servers are checked.

Another type of entry you can add to this fi le is a search entry. A search entry lets you
indicate domains to be searched when a hostname is requested by its base name instead
of its entire fully qualifi ed domain name.


						  ===================================================================================
							| 																			|
							| --> 																		|
							| ----------------------------------------------
							| ± Ping sends the {ICMP ECHO_REQUEST Datagram}														|
							| 	--> expecting a {ICMP ECHO_RESPONSE}														|
						  ===================================================================================

ping 10.0.0.2 Test if a remote host can be reached 
and measure the round-trip time to it
## -------------------------------------------------
					by sending an ICMP ECHO_REQUEST datagram and
expecting an ICMP ECHO_RESPONSE

ping -c 2 192.168.0.1




host www.google.com 192.168.0.254
# dig @192.168.0.254 www.google.com

Sometimes it’s also useful to query nameservers other than the default. This can be
done without changing the default address in resolv.conf, by using @ plus the name-
server’s IP address:
# dig @10.20.10.10 www.oreilly.com


PTR (reverse) records
PTR records
provide a way to map an IP address back
to a fully qualified domain name. 	

mail exchange (MX) record for a domain defines the server that accepts SMTP
email for that domain

 
adding new addresses or changing addresses on the server. dig can be used to validate
the presence of the PTR records:
# dig –x 208.201.239.100	



Print the route, hop by hop, packets trace to a remote host
(by sending a sequence of ICMP ECHO_REQUEST datagrams with
increasing TTL values, starting with TTL=1)
traceroute 10.0.0.3

tracepath 10.0.0.3
mtr 10.0.0.3 

time-to-live (TTL) field in the IP header, traceroute
stimulates error responses from gateways. The time-to-live field specifies the maximum number
of gateway hops until the packet should expire. That number is decremented at each gateway
hop, with the result that all packets will die at some point and stop roaming the Internet.


show all current connections without resolving hostnames and protocol names:
# netstat -an --tcp













/etc/ethers
/var/lib/misc/dnsmasq.leases
/var/db/dnsmasq.leases
/var/run/dnsmasq.pid



/etc/network/interfaces
auth eth0
iface eth0 inet dhcp



The default domain.

# Bourne Shell
           LOCALDOMAIN=example.com
           export LOCALDOMAIN

# C Shell
setenv LOCALDOMAIN example.com


use Net::DNS;

$resolver = new Net::DNS::Resolver();

# Perform a lookup, using the searchlist if appropriate.
$reply = $resolver->search( 'example.com' );

# Perform a lookup, without the searchlist
$reply = $resolver->query( 'example.com', 'MX' );

# Perform a lookup, without pre or post-processing
$reply = $resolver->send( 'example.com', 'MX', 'IN' );

# Send a prebuilt query packet
$query = new Net::DNS::Packet( ... );
$reply = $resolver->send( $packet );






# Use the default configuration
$resolver = new Net::DNS::Resolver();

# Use my own configuration file
$resolver = new Net::DNS::Resolver( config_file => '/my/dns.conf' );

# Set options in the constructor
$resolver = new Net::DNS::Resolver(
    nameservers => [ '10.1.1.128', '10.1.2.128' ],
    recurse     => 0,
    debug       => 1
    );



## If no arguments are supplied, new() returns an object having the default configuration.



domain
    The default domain.

search
    A space-separated list of domains to put in the search list.

nameserver
    A space-separated list of nameservers to query.

options
    A space-separated list of key:value items.



Explicit arguments to new() override the corresponding configuration variables.  The following arguments are supported:

nameservers
    A reference to an array of nameservers to query.

domain
    Domain name suffix to be appended to queries of unqualified names.

searchlist
    A reference to an array of domains to search for unqualified names.








Prints the resolver state on the standard output.











Performs a DNS query for the given name; the search list is not applied.  If the name does not contain any dots and
"defnames" is true, the default domain will be appended.

The record type and class can be omitted; they default to A and IN.  If the name looks like an IP address (IPv4 or IPv6),
then a query within in-addr.arpa or ip6.arpa will be performed.

Returns a "Net::DNS::Packet" object, or "undef" if no answers were found.  The reason for failure may be determined using
errorstring().







The record type and class can be omitted; they default to A and IN.  If the name looks like an IP address (IPv4 or IPv6),
then a query within in-addr.arpa or ip6.arpa will be performed.

Returns a "Net::DNS::Packet" object, or "undef" if no answers were found.  The reason for failure may be determined using
errorstring().

If you need to examine the response packet, whether it contains any answers or not, use the send() method instead.




















$resolver->nameservers( '192.0.2.1', '192.0.2.2', '2001:DB8::3' );
           $resolver->force_v4(1);
           print join ' ', $resolver->nameservers();












tail $(fgrep –l login /var/log/*)		# generate a list of files in 
										# /var/log that contain the term “login”




IPv6 address: 128-bit long, represented divided in eight 16-bit groups (4 hex digits).




        ## Neighbour Discovery Protocol (NDP)
        ## ==================================
        ## XXX we should probably try to find a way to disable all the NDP
        ##     crap, once connected to a suitable router, but so far it seems
        ##     most commercial/home routers are too crappy to understand SEND:

        ## ICMPv6 type 134 := Router Advertisement (NDP)
        ## ---------------------------------------------
        ## Routers advertise their presence together with various link and
        ## Internet parameters either periodically, or in response to a Router
        ## Solicitation message.
        ##
        ## ICMPv6 type 135 := Neighbor Solicitation (NDP)
        ## ----------------------------------------------
        ## Used by nodes to determine the Link Layer address of a neighbor, or
        ## to verify that a neighbor is still reachable via a cached Link
        ## Layer address.
        ##
        ## ICMPv6 type 136 := Neighbor Advertisement (NDP)
        ## -----------------------------------------------
        ## Used by nodes to respond to a Neighbor Solicitation message
        ##
        ## ICMPv6 type 138 := Router Renumbering
        ## ---------------------------------------------------------------------
        
        
        
        


export LD_PRELOAD=/path/to/libtorsocks.so
setenv LD_PRELOAD=/path/to/libtorsocks.so
TORSOCKS_CONF_FILE="/etc/tor/torsocks.conf"
TORSOCKS_LOG_LEVEL="3"
torsocks ssh account@sshserver.com

LD_PRELOAD=/path/to/libtorsocks.so ssh -l kalexander -p 1234 faggot.gov


reverse lookup: get the PTR record for an IPv4 address






  +--------+--------+-------------------+
  | 3 bits | 2 bits |   3 bits          |
  |  mode  |  size  | instruction class |
  +--------+--------+-------------------+
  (MSB)                             (LSB)








Which of the following describes the Linux ping packet or datagram?
ICMP packet with a payload





Network traffic is split into two classes: 
data traffic		## flowing from applications to other applications or storage (either of which can be local or out in the cloud)
control traffic 	## flowing from network controller devices (physical or virtual) to switches and routers (again physical or virtual) altering flow between the growing number of physical and virtual machines in data centers. 



overlay model encapsulates and tunnels between virtual switches over your existing physical network. 
Encapsulation is done with NVGRE, VXLAN, or similar protocols










## ================ ## ========================================== ##
## --- Interface -- ## ------------ Private flags --------------- ##
## ================ ## ========================================== ##
## 802_1Q_VLAN		## Interface is 802.1Q VLAN device.			  ##
## EBRIDGE			## Interface is Ethernet bridging device.	  ##
## SLAVE_INACTIVE	## Interface is inactive bonding slave.		  ##
## MASTER_8023AD	## Interface is 802.3ad bonding master.		  ##
## MASTER_ALB		## Interface is balanced-alb bonding master.  ##
## BONDING			## Interface is a bonding master or slave.	  ##
## SLAVE_NEEDARP	## Interface needs ARPs for validation.		  ##
## ISATAP			## Interface is RFC4214 ISATAP interface.	  ##
## ================ ## ========================================== ##
##					##											  ##








tun  devices  encapsulate  IPv4  or  IPv6 (OSI Layer 3) while tap devices encapsulate Ethernet
       802.3 (OSI Layer 2)


MTU (Maximum Transmission Units) is the maximum datagram size in bytes that  can  be  sent
       unfragmented  over a particular network path.

A bridge providing firewall capabilities




Internet ---- router (62.3.3.25) ---- bridge (62.3.3.26)
										|
										|
										|---- WWW Server (62.3.3.28 gw 62.3.3.25)
										|
										|
										|---- Mail Server (62.3.3.27 gw 62.3.3.25)



# Create the interface br0
/usr/sbin/brctl addbr br0
# Add the Ethernet interface to use with the bridge
/usr/sbin/brctl addif br0 eth0
/usr/sbin/brctl addif br0 eth1
# Start up the Ethernet interface
/sbin/ifconfig eth0 0.0.0.0
/sbin/ifconfig eth1 0.0.0.0
# Configure the bridge Ethernet
# The bridge will be correct and invisible ( transparent firewall ).
# Its hidden in a traceroute and you keep your real gateway on the
# other computers. Now if you want you can config a gateway on your
# bridge and choose it as your new gateway for the other computers.
/sbin/ifconfig br0 62.3.3.26 netmask 255.255.255.248 broadcast 62.3.3.31




PREROUTING and POSTROUTING chains in the nat table, which are
used to modify packet headers before and after an IP routing calculation is
made within the kernel.



raw  is used only for configuring packets so that they are exempt from connection tracking.
filter  is the default table, and is where all the actions typically associated with a firewall take place.
nat  is used for network address translation (e.g. port forwarding).
mangle  is used for specialized packet alterations.
security  is used for Mandatory Access Control networking rules


terminating (as built­in targets) or non­terminating (as user­defined chains)


--source ( -s )
--destination ( -d )
--protocol ( -p )
--in-interface ( -i )
--out-interface ( -o )
--state
--string
--comment
Match on a source IP address or network
Match on a destination IP address or network
Match on an IP value
Input interface (e.g., eth0)
Output interface
Match on a set of connection states
Match on a sequence of application layer data bytes
Associate up to 256 bytes of comment data with a
rule within kernel memory

touch /etc/iptables/iptables.rules

iptables-save > /etc/iptables/iptables.rules


grep "_NF_" /boot/config-4.6.0-parrot-amd64

/boot/config-`uname -r`



CONFIG_NETFILTER_XT_MATCH_GRADM





iptables -F FORWARD
iptables -P FORWARD DROP
iptables -A FORWARD -s 0.0.0.0/0.0.0.0 -d 0.0.0.0/0.0.0.0 -m state --state INVALID -j DROP
iptables -A FORWARD -m state --state ESTABLISHED,RELATED -j ACCEPT

# Some funny rules but not in a classic Iptables sorry ...
# Limit ICMP
# iptables -A FORWARD -p icmp -m limit --limit 4/s -j ACCEPT
# Match string, a good simple method to block some VIRUS very quickly
# iptables -I FORWARD -j DROP -p tcp -s 0.0.0.0/0 -m string --string "cmd.exe"
# Block all MySQL connection just to be sure
iptables -A FORWARD -p tcp -s 0/0 -d 62.3.3.0/24 --dport 3306 -j DROP
# Linux Mail Server Rules
# Allow FTP-DATA (20), FTP (21), SSH (22)
iptables -A FORWARD -p tcp -s 0.0.0.0/0 -d 62.3.3.27/32 --dport 20:22 -j ACCEPT
# Allow the Mail Server to connect to the outside
# Note: This is *not* needed for the previous connections
# (remember: stateful filtering) and could be removed.
iptables -A FORWARD -p tcp -s 62.3.3.27/32 -d 0/0 -j ACCEPT
# WWW Server Rules
# Allow HTTP ( 80 ) connections with the WWW server
iptables -A FORWARD -p tcp -s 0.0.0.0/0 -d 62.3.3.28/32 --dport 80 -j ACCEPT
# Allow HTTPS ( 443 ) connections with the WWW server
iptables -A FORWARD -p tcp -s 0.0.0.0/0 -d 62.3.3.28/32 --dport 443 -j ACCEPT
# Allow the WWW server to go out
# Note: This is *not* needed for the previous connections
# (remember: stateful filtering) and could be removed.
iptables -A FORWARD -p tcp -s 62.3.3.28/32 -d 0/0 -j ACCEPT




-m multiport --destination-ports 53 -j ACCEPT









# From bits/ioctls.h
SIOCGIFHWADDR  = 0x8927          # Get hardware address    
SIOCGIFADDR    = 0x8915          # get PA address          
SIOCGIFNETMASK = 0x891b          # get network PA mask     
SIOCGIFNAME    = 0x8910          # get iface name          
SIOCSIFLINK    = 0x8911          # set iface channel       
SIOCGIFCONF    = 0x8912          # get iface list          
SIOCGIFFLAGS   = 0x8913          # get flags               
SIOCSIFFLAGS   = 0x8914          # set flags               
SIOCGIFINDEX   = 0x8933          # name -> if_index mapping
SIOCGIFCOUNT   = 0x8938          # get number of devices


# From if.h
IFF_UP = 0x1               # Interface is up.
IFF_BROADCAST = 0x2        # Broadcast address valid.
IFF_DEBUG = 0x4            # Turn on debugging.
IFF_LOOPBACK = 0x8         # Is a loopback net.
IFF_POINTOPOINT = 0x10     # Interface is point-to-point link.
IFF_NOTRAILERS = 0x20      # Avoid use of trailers.
IFF_RUNNING = 0x40         # Resources allocated.
IFF_NOARP = 0x80           # No address resolution protocol.
IFF_PROMISC = 0x100        # Receive all packets.


















Print routing table
route ‐n                  # Linux or use "ip route" 
netstat ‐nr               # Linux, BSD and UNIX 
netstat --tcp -anp | grep ":143"
netstat -s


ethtool eth0          				    # Show the ethernet status (replaces mii‐diag) 
ethtool ‐p eth1           				# Blink the ethernet led ‐ very useful when supported 

ethtool --show-features eth0


rx on






--show-channels
--set-channels
--get-dump
--set-dump
--show-eee
--set-eee
--driver



--show-ntuple
--show-ring
--show-features
--features
--identify
--show-permaddr
--negotiate
--statistics
ethtool --phy-statistics eth0
--show-time-stamping
--show-rxfh-indir
--set-rxfh-indir
--dump-module-eeprom
--change-eeprom



--flash
ethtool --register-dump eth0 hex on		# 

ethtool --show-priv-flags devname
ethtool --set-priv-flags devname flag on|off
ethtool ‐s eth0 autoneg off 				# Disable auto negotiation 
ethtool ‐s eth0 speed 100 duplex full 		# Force 100Mbit Full duplex 


ip link show              # Display all interfaces on Linux (similar to ifconfig) 
ip link set eth0 up       # Bring device up (or down). Same as "ifconfig eth0 up" 
ip addr show              # Display all IP addresses on Linux (similar to ifconfig) 
ip neigh show             # Similar to arp ‐a 

iwgetid wlan0
iw dev wlan0 station dump

iwlist wlan0 scan List all wireless devices in range, with their quality of signal and other information
iwlist wlan0 freq Display transmission frequency settings
iwlist wlan0 rate Display transmission speed settings
iwlist wlan0 txpower Display transmission power settings
iwlist wlan0 key Display encryption settings

hcidump -i






grep SYN /var/log/messages | tail -n 1


What is the highest numbered TCP /IP port?
65535



/etc/hosts					## Mappings between IP addresses and hostnames, for name resolution
/etc/nsswitch.conf			## 
/etc/host.conf				## 
/etc/resolv.conf			## 
/etc/networks				## 
/etc/network/interfaces		## 
/etc/hostname				## 


hostnamectl set-hostname --static "mylinuxbox"




/sys/class/net		## List of all network interfaces in the system
/etc/services		## List of service TCP/UDP port numbers
/etc/protocols		## List of available protocols
/etc/ethers			## ARP mappings (i.e. MAC to IP addresses)





brctl  addbr

brctl show
brctl addif <brname> <ifname>
brctl showmacs <brname>












update-ca-certificates
v
unix_chkpwd
getent  		## displays entries from databases supported by the Name Service Switch libraries which are configured in /etc/nsswitch.conf



traceroute 8.8.8.8
tracepath 8.8.8.8
nmap 8.8.8.8
jobs
jobs -l
dig 8.8.8.8
whois 8.8.8.8

host -t ns target.com                    # Show name servers 
host -t mx target.com                    # Show mail servers
host www.target.com
host -l target.com <nameserver>          # Zone transfer

dig target.com <type>                    # a, mx, ns, soa, srv, txt, any
dig -x <target IP>                       # Pointer records
dig @nameserverIP target.com axfr        # Zone transfer
dig @nameserverIP target.com afro        # Forward zone transfer







/etc/xinetd.conf
/etc/inetd.conf
/etc/inittab




ulimit
fuser
lsof
/etc/sudoers

/etc/logrotate.conf
anacron
/etc/anacrontab
crontab
atq
arrm
tzselect
tzconfig
ISO-8859
Unicode
ntpd
Journalctl
/etc/systemd/journald.conf
/var/log/journal/
logrotate
syslog.conf
klogd
logger


sendmail
postfix
~/.forward
newaliases
exim

dig
host
ping
ping6
traceroute
traceroute6
tracepath
tracepath6
netcat





Initialize the quota.user file with  quotacheck .
# quotacheck ‐vum /home 
# chmod 644 /home/aquota.user        # To let the users check their own quota 

rw,acl,user_xattr,usrquota 1 1 

edquota -u 
edquota -p			# duplicate quotas of prototypical user specified for each user specified

quotaon
repquota -a		# all filesystems
quotacheck		# checks, writes corrections




|| lsattr ||-R ||  Recursively process directories.
|| lsattr ||-a ||  List all files, including those whose names begin with a dot.
|| lsattr ||-d ||  If listing a directory, do not list its contents, just the directory itself.


Copy the ACL of file1 and apply it to file2
getfacl file1 | setfacl --set-file=- file2 



Copy the access ACL of a directory and set it as default ACL
getfacl --access dir | setfacl -d -M- dir 





_______________________________________________________________________________________
stat ||-L || >> Follow symbolic links and report on the file they point to.			||
stat ||-f || >> Report on the filesystem containing the file, not the file itself.	||
stat ||-t || >> Terse mode: print information on a single line.						||
========================================================================================


_______________________________________________________________________________________
 || || >> 			||
 || || >> 			||
 || || >> 			||
 || || >> 			||
 || || >> 			||
 || || >> 			||
 || || >> 			||
 || || >> 			||
 || || >> 			||
========================================================================================






echo "|| 						  ||														    /|\"
echo "||-======================-+-||-+-=======================================================-{-+-}#"
echo "|| ■ Discretionary Access |~||~|   DAC is the traditional Linux security access control. {~|~}#"
echo "||	   Control (DAC) 	|~||~|  Access to an object is based upon A UID and GUID.	   {~|~}#"
echo "||-======================-(+||~|_(file permissions, such as read, write, and execute.)   {~|~}#"
echo "|| 						 \||-+-=======================================================-{~|~}#"
echo "																							\|/#"



echo "## ========================================================================================= ##"
echo -e "\t\t\t\t ■ Mandatory Access Control (MAC)"
echo "## ========================================================================================= ##"
echo
echo "## ========================================================================================= ##"
echo -e "\t ■ Objects are classifi ed by their need for data integrity and privacy."
echo "## ========================================================================================= ##"
echo -e "\t ■ Subjects are classifi ed by their data or security clearance level."
echo "## ========================================================================================= ##"
echo -e "\t ■ A subject’s access to an object is based upon the subject’s clearance level."
echo "## ========================================================================================= ##"



echo "## ========================================================================================= ##"
echo -e "\tThe owner of an object no longer can change the security settings of that object, as in"
echo -e "\tthe DAC model. All security settings and modifi cations are handled by a designated"
echo -e "\tperson or team from the security planning process. Also, MAC does not allow a program"
echo -e "\tto inherit a user’s access right to an object when the program is run by that user. This"
echo -e "\tovercomes the second weakness in the DAC model."
echo "## ========================================================================================= ##"



echo "## ================================================================================================================= ##"
echo -e "\t\t\t\t ■ Role Based Access Control (RBAC)"
echo "## ================================================================================================================= ##"
echo -e "\tAccess to an object is based upon a subject’s identity and its associated role. "
echo -e "\tEach role, not each subject, is classified by its data or security clearance level. "
echo -e "\tThus, access to objects is based upon a role’s clearance level, not the subject’s clearance level."
echo "## ================================================================================================================= ##"


echo "## ========================================================================================= ##"
pwconv 				## creates shadow from passwd and an optionally existing shadow.
echo "## ========================================================================================= ##"
pwunconv 			## creates passwd from passwd and shadow and then removes shadow.
echo "## ========================================================================================= ##"
grpconv 			## creates gshadow from group and an optionally existing gshadow.
echo "## ========================================================================================= ##"
grpunconv 			## creates group from group and gshadow and then removes gshadow.
echo "## ========================================================================================= ##"


/etc/login.defs


rwxrwxrwx (777)



echo "## ================================================================================================================= ##"
Linux-PAM is a system of libraries that handle the authentication tasks of applications (services) on the system.
echo "## ================================================================================================================= ##"

PAM modules have standard functions that provide different authentication services. These
standard functions within a PAM module can be broken down into function types, called
contexts. Contexts can also be called module interfaces or types.
echo "## ================================================================================================================= ##"


echo "## ================================================================================================================= ##"
Linux-PAM separates the tasks of authentication into four independent 
• management groups
• account management
• authentication management
• password management
• session management


echo "## ================================================================================================================= ##"
■ account - provide account verification types of service: 
• user password expiration 
• user ability to access requested service

■ authentication - authenticate a user and set up user credentials. Typically this is via some challenge-response request that
the user must satisfy: if you are who you claim to be please enter your password. Not all authentications are of this type,
there exist hardware based authentication schemes (such as the use of smart-cards and biometric devices), with suitable
modules, these may be substituted seamlessly for more standard approaches to authentication - such is the flexibility of
Linux-PAM.

■ password - this group's responsibility is the task of updating authentication mechanisms. Typically, such services are
strongly coupled to those of the auth group. Some authentication mechanisms lend themselves well to being updated with such
a function. Standard UN*X password-based access is the obvious example: please enter a replacement password.

■ Session - this group of tasks cover things that should be done prior to a service being given and after it is withdrawn.
		  Such tasks include the maintenance of audit trails and the mounting of the user's home directory. 

■ Session Management - This is important because it provides both an opening and closing 
								 hook for modules to affect the services available to a user.


ls /lib/security/pam*.so


cat /etc/pam.d/poweroff
#%PAM-1.0
auth	sufficient		pam_rootok.so
auth	required		pam_console.so
#auth	include			system-auth
account	required		pam_permit.so





/etc/security/limits.conf.




The + Means Extended Attributes, such as Access Control Lists (ACLs)
______________________________________________________________________
	-rw-rw-r--+ 



The t indicates that theres a sticky bit is set for that directory
drwxrwxr-t


the lowercase s indicates that the owner of the file also has execute permissions.
-rwsr-xr-x

allows the binary to run with the permissions of the owning group

-rwSr-xr-x



dr--------  The contents can be listed, but file attributes can't be read    
d--x------  The directory can be entered, and used in full execution paths   
dr-x------  File attributes can be read by owner
---s------  Will execute with effective User ID = to owner                   
--------s-  Will execute with effective Group ID = to group


ls -aR1 /etc/ | awk '$1 ~ /^.*w.*/' 2>/dev/null			# Anyone
ls -aR1 /etc/ | awk '$1 ~ /^..w/' 2>/dev/null			# Owner
ls -aR1 /etc/ | awk '$1 ~ /^.....w/' 2>/dev/null		# Group
ls -aR1 /etc/ | awk '$1 ~ /w.$/' 2>/dev/null			# Other 
find /etc/ -readable -type f 2>/dev/null				# Anyone
find /etc/ -readable -type f -maxdepth 1 2>/dev/null	# Anyone


l (for a symbolic link)
b (for a block device)


       Type is one or more of the following characters:

         n  not a directory
         r  regular file
         d  directory
         l  link
         c  character device
         b  block device
         f  FIFO (pipe)
         s  socket
         x  executable file
         t  tagged



||$ chmod 0710 ||     |-|rwx|--x|---|		  ||$ chmod u=|rwx|,g=x| 		||
||$ chmod 0720 ||     |-|rwx|-w-|---|		  ||$ chmod u=|rwx|,g=w			||
||$ chmod 0740 ||     |-|rwx|r--|---|		  ||$ chmod u=|rwx,g=|r			||
||$ chmod 0744 ||     |-|rwx|r--|r--|		  ||$ chmod a=|r,u+wx			||
||$ chmod 0755 ||     |-|rwx|r-x|r-x|		  ||$ chmod a=|rx,u+w			||
||$ chmod 0775 ||     |-|rwx|rwx|r-x|		  ||$ chmod a=|rwx,o-w			||
||$ chmod 0776 ||     |-|rwx|rwx|rw-|		  ||$ chmod a=|rwx,o-x			||
||$ chmod 0777 ||     |-|rwx|rwx|rwx|		  ||$ chmod a=|rwx				||
||$ chmod 2755 ||     |-|rwx|r-s|r-x|		  ||$ chmod a=|r,uo+x|,g+s,u+w	||
||$ chmod 2775 ||     |-|rwx|rws|r-x|		  ||$ chmod a=|r,uo+x,g+s,ug+w	||
||$ chmod 4420 ||     |-|r-S|-w-|---|		  ||$ chmod u=|r,u+S,g+w		||
||$ chmod 4655 ||     |-|rws|r-x|r-x|		  ||$ chmod a=|r,go+x,u+sw		||
||$ chmod 4755 ||     |-|rwS|r-x|r-x|		  ||$ chmod a=|r,go+x,u+w,g+S	||



||$ chmod 0710 ||	||$ chmod u=|rwx|,g=x| 		 ||     |-|rwx|--x|---|
||$ chmod 0720 ||	||$ chmod u=|rwx|,g=w		 ||     |-|rwx|-w-|---|
||$ chmod 0740 ||	||$ chmod u=|rwx,g=|r		 ||     |-|rwx|r--|---|
||$ chmod 0744 ||	||$ chmod a=|r,u+wx			 ||     |-|rwx|r--|r--|
||$ chmod 0755 ||	||$ chmod a=|rx,u+w			 ||     |-|rwx|r-x|r-x|
||$ chmod 0775 ||	||$ chmod a=|rwx,o-w		 ||     |-|rwx|rwx|r-x|
||$ chmod 0776 ||	||$ chmod a=|rwx,o-x		 ||     |-|rwx|rwx|rw-|
||$ chmod 0777 ||	||$ chmod a=|rwx			 ||     |-|rwx|rwx|rwx|
||$ chmod 2755 ||	||$ chmod a=|r,uo+x|,g+s,u+w ||     |-|rwx|r-s|r-x|
||$ chmod 2775 ||	||$ chmod a=|r,uo+x,g+s,ug+w ||     |-|rwx|rws|r-x|
||$ chmod 4420 ||	||$ chmod u=|r,u+S,g+w		 ||     |-|r-S|-w-|---|
||$ chmod 4655 ||	||$ chmod a=|r,go+x,u+sw	 ||     |-|rws|r-x|r-x|
||$ chmod 4755 ||	||$ chmod a=|r,go+x,u+w,g+S  ||     |-|rwS|r-x|r-x|










||	|-|---|---|---|	 ||		||$ chmod || 0000 ||	||$ chmod || ugo-a      		||				  
||	|-|--x|--x|--x|	 ||		||$ chmod || 0111 ||	||$ chmod || a=x 				||						  
||	|-|r--|---|---|	 ||		||$ chmod || 0400 ||	||$ chmod || u=r 				||  ||$ umask 277 ||      
||	|-|r--|r--|r--|	 ||		||$ chmod || 0444 ||	||$ chmod || a=r	 			||
||	|-|r-x|---|---|	 ||		||$ chmod || 0500 ||	||$ chmod || u=rx				||
||	|-|r-x|r-x|---|	 ||		||$ chmod || 0550 ||	||$ chmod || ug=rx				||
||	|-|rw-|---|---|	 ||		||$ chmod || 0600 ||	||$ chmod || u=rw 	 		  	||  ||$ umask 077 ||
||	|-|rw-|-w-|---|	 ||		||$ chmod || 0620 ||	||$ chmod || ug=w,u+r	  		||  ||$ umask 037 ||
||	|-|rw-|r--|---|  ||		||$ chmod || 0640 ||	||$ chmod || ug=r,u+w	 		||  ||$ umask 027 ||		
||	|-|rw-|r--|r--|  ||		||$ chmod || 0644 ||	||$ chmod || a=r,u+w	  		||  ||$ umask 022 ||
||	|-|rw-|r-x|r-x|  ||		||$ chmod || 0655 ||	||$ chmod || a=r,ug+x,u+w		||
||	|-|rw-|rw-|---|  ||		||$ chmod || 0660 ||  	||$ chmod || ug=rw 		 		||
||	|-|rw-|rw-|r--|  ||		||$ chmod || 0664 ||  	||$ chmod || a=r,ug+rw    		||  ||$ umask 002 ||     
||	|-|rw-|rw-|rw-|  ||		||$ chmod || 0666 ||  	||$ chmod || a=rw	 	 		||  ||$ umask 000 ||     
||	|-|rwx|---|---|	 ||		||$ chmod || 0700 ||	||$ chmod || u+rwx,go-rwx 		||	||  |-|rwx|--x|---|  ||		||$ chmod || 0710 ||		||$ chmod  || u=rwx,g=x			|| 
||  |-|rwx|-w-|---|  ||		||$ chmod || 0720 ||	||$ chmod || u=rwx,g=w			||
||  |-|rwx|r--|---|  ||		||$ chmod || 0740 ||	||$ chmod || u=rwx,g=r			||
||  |-|rwx|r--|r--|  ||		||$ chmod || 0744 ||	||$ chmod || a=r,u+wx		   ||
||  |-|rwx|r-x|r-x|  ||		||$ chmod || 0755 ||	||$ chmod || a=rx,u+w		   ||
||  |-|rwx|rwx|r-x|  ||		||$ chmod || 0775 ||	||$ chmod || a=rwx,o-w		   ||
||  |-|rwx|rwx|rw-|  ||		||$ chmod || 0776 ||	||$ chmod || a=rwx,o-x		   ||
||  |-|rwx|rwx|rwx|  ||		||$ chmod || 0777 ||	||$ chmod || a=rwx 			   || 
||  |-|rwx|r-s|r-x|  ||		||$ chmod || 2755 ||	||$ chmod || a=r,uo+x,g+s,u+w  || 
||  |-|rwx|rws|r-x|  ||		||$ chmod || 2775 ||	||$ chmod || a=r,uo+x,g+s,ug+w || 
||  |-|r-S|-w-|---|  ||		||$ chmod || 4420 ||	||$ chmod || u=r,u+S,g+w 	   || 
||  |-|rws|r-x|r-x|  ||		||$ chmod || 4655 ||	||$ chmod || a=r,go+x,u+sw 	   || 
||  |-|rwS|r-x|r-x|  ||		||$ chmod || 4755 ||	||$ chmod || a=r,go+x,u+w,g+S 	|| 


				  ________________
				   |A|	 |	 |	 |
				   |T|	 |	 |	 |
	   			   |T| O | G | O |	
				   |R| w | r | t |
			       |I| n | o | h |
				   |B| e | u | e |
			       |U| r | p | r |
				   |T|	 |	 |	 |
___________________|E|   |   |   |______________________________
				   | |   |   |   |
|$ chmod 0000      |-|---|---|---|        			  ||$ chmod ugo-a
|$ chmod 0111      |-|--x|--x|--x|        			  ||$ chmod a=x|
|$ chmod 0400      |-|r--|---|---|  ||$ umask 277     ||$ chmod u=|r 
|$ chmod 0444      |-|r--|r--|r--|        			  ||$ chmod a=|r
|$ chmod 0500      |-|r-x|---|---|        			  ||$ chmod u=|rx| 
|$ chmod 0550      |-|r-x|r-x|---|         			  ||$ chmod ug=|rx|
|$ chmod 0600      |-|rw-|---|---|  ||$ umask 077     ||$ chmod u=|rw
|$ chmod 0620      |-|rw-|-w-|---|        			  ||$ chmod ug=w,u+|r
|$ chmod 0640      |-|rw-|r--|---|  ||$ umask 027     ||$ chmod ug=|r,u+w				umask 0037
|$ chmod 0644      |-|rw-|r--|r--|  ||$ umask 022     ||$ chmod a=|r,u+w			
|$ chmod 0655      |-|rw-|r-x|r-x|        			  ||$ chmod a=|r,ug+x||,u+w
|$ chmod 0660      |-|rw-|rw-|---|        			  ||$ chmod ug=|rw
|$ chmod 0664      |-|rw-|rw-|r--|  ||$ umask 002     
|$ chmod 0666      |-|rw-|rw-|rw-|  ||$ umask 000     
|$ chmod 0700      |-|rwx|---|---|        			  ||$ chmod u+|rwx|,go-|rwx|
|$ chmod 0710      |-|rwx|--x|---|        			  ||$ chmod u=|rwx|,g=x| 
|$ chmod 0720      |-|rwx|-w-|---|        			  ||$ chmod u=|rwx|,g=w
|$ chmod 0740      |-|rwx|r--|---|        			  ||$ chmod u=|rwx,g=|r
|$ chmod 0744      |-|rwx|r--|r--|        			  ||$ chmod a=|r,u+wx
|$ chmod 0755      |-|rwx|r-x|r-x|        			  ||$ chmod a=|rx,u+w
|$ chmod 0775      |-|rwx|rwx|r-x|        			  ||$ chmod a=|rwx,o-w
|$ chmod 0776      |-|rwx|rwx|rw-|        			  ||$ chmod a=|rwx,o-x
|$ chmod 0777      |-|rwx|rwx|rwx|        			  ||$ chmod a=|rwx
|$ chmod 2755      |-|rwx|r-s|r-x|        			  ||$ chmod a=|r,uo+x|,g+s,u+w
|$ chmod 2775      |-|rwx|rws|r-x|        			  ||$ chmod a=|r,uo+x,g+s,ug+w
|$ chmod 4420      |-|r-S|-w-|---|        			  ||$ chmod u=|r,u+S,g+w
|$ chmod 4655      |-|rws|r-x|r-x|        			  ||$ chmod a=|r,go+x,u+sw
|$ chmod 4755      |-|rwS|r-x|r-x|        			  ||$ chmod a=|r,go+x,u+w,g+S
===================| |   |   |   |===========================================
				   |A|	 |	 |	 |
				   |T|	 |	 |	 |
	   			   |T| O | G | O |	
				   |R| w | r | t |
			       |I| n | o | h |
				   |B| e | u | e |
			       |U| r | p | r |
				   |T|   |	 |	 |
				   |E|   |   |   |
	               |_|___|___|___|


					|-|rws|r-x|r-x|
					|-|rwx|r-s|r-x|
					|-|rws|r-s|r-x|


| 000 |	0666 | (rw-rw-rw-) 	  

| 002 |	0664 | (rw-rw-r--) 	  
| 022 |	0644 | (rw-r--r--) 	  
| 027 |	0640 | (rw-r-----) 	  
| 077 |	0600 | (rw-------) 	  
| 277 |	0400 | (r--------) 	  


| 000 |	0666 | (rw-rw-rw-) 	  | 0777 |	(rwxrwxrwx)	|
| 002 |	0664 | (rw-rw-r--) 	  | 0775 |	(rwxrwxr-x)	|
| 022 |	0644 | (rw-r--r--) 	  | 0755 |	(rwxr-xr-x)	|
| 027 |	0640 | (rw-r-----) 	  | 0750 |	(rwxr-x---)	|
| 077 |	0600 | (rw-------) 	  | 0700 |	(rwx------)	|
| 277 |	0400 | (r--------) 	  | 0500 |	(r-x------)	|



type / owner / group / world

  _
 |T|
 |Y|
 |P|
 |E|
 \ /
  

Type is directory (d) or file (-).
read    (r)	 4
write   (w)	 2
execute (e)	 1


|| 							||								 ||								||
||==========================||===============================||=============================||
||  File Perm Attributes:	|| User (Owner) File Permissions ||	  Group File Permissions	||
||==========================||===============================||=============================||
|| - = regular file			||								 ||								||
|| b = block device file	||	r = read					 ||	r = read					||
|| c = char device file		||	w = write 					 ||	w = write				    ||	
|| d = directory			||	x = execute 				 ||	x = execute 			    ||
|| l = symbolic link		||	s = setUID and execute 		 ||	s = setGID and execute 	    ||
|| s = Unix domain socket	||	S = setUID and not execute 	 ||	S = setGID and not execute 	||
|| p = named pipe			||								 ||								||
|| 							||								 ||								||
||==========================||===============================||=============================||
|| 							||								 ||								||
|| 							||								 ||								||
|| 							||								 ||								||




chown -R 0:0 lynis
chown 0:0 ./include/functions




U

echo -e "\t<<+}========================================={+>>"
echo -e "\t\t\t{+} Read File Permissions"
echo -e "\t<<+}========================================={+>>"
echo "\t"_______________________________"
echo -e "\t\tuser: 400  | chmod u+r"
echo -e "\t\tgroup: 40  | chmod g+r"
echo -e "\t\tothers: 4  | chmod o+r"



echo -e "\t\tuser: 200  | chmod u+w
group: 20  | chmod g+w
others: 2  | chmod o+w


________________________________
|200| |user  |   |$ chmod u+w |
|-20| |group |   |$ chmod g+w |
|--2| |others|   |$ chmod o+w |
________________________________


echo -e "\t<<+}========================================={+>>"
echo -e "\t\t\t     {+} Execution File Permissions"
echo -e "\t<<+}========================================={+>>"

________________________________

echo -e "\t\t Perm  Owner       Command Execution
echo -e "\t\t |400| |user  |   |$ chmod u+x |"
echo -e "\t\t |-40| |group |   |$ chmod g+x |
echo -e "\t\t |--4| |others|   |$ chmod o+x |


echo -e "\t\t Perm     Owner   Command Execution
echo -e "\t\t |user  | |400|   |$ chmod u+x |"
echo -e "\t\t |group | |-40|   |$ chmod g+x |"
echo -e "\t\t |others| |--4|   |$ chmod o+x |"

echo -e "\t\t Perm     Owner   Command Execution
echo -e "\t\t |$ chmod u+x |   |user  | |400|"
echo -e "\t\t |$ chmod g+x |   |group | |-40|"
echo -e "\t\t |$ chmod o+x |   |others| |--4|"

echo -e "\t\tCommand Execution   Perm    _Owner__
echo -e "\t\t |$ chmod u+x |     |400|   |user  |"
echo -e "\t\t |$ chmod g+x |     |-40|   |group |"
echo -e "\t\t |$ chmod o+x |     |--4|   |others|"



________________________________

user:   |100| chmod u+x
group:  |-10| chmod g+x
others: |--1| chmod o+x
SetUID (SUID):	4000  | chmod u+s 
SetGID (SGID):	2000  | chmod g+s 
Sticky: 		1000  | chmod +t 



                     ______________
                      | |  |  |  |
                      |A|  |  |  |
				      |T|  |  |  |
                      |T|O |G |O |	
                      |R|w |r |t |
                      |I|n |o |h |
                      |B|e |u |e |
                      |U|r |p |r |
                      |T|  |  |  |
                      |E|  |  |  |
______________________| |  |  |  |___________________________
|$ chmod 0000 |______| ---------- ||$ chmod ugo-a
|$ chmod 0111 |______| ---x--x--x ||$ chmod a=x
|$ chmod 0400 |______| -r-------- ||$ chmod u=r 
|$ chmod 0444 |______| -r--r--r-- ||$ chmod a=r
|$ chmod 0500 |______| -r-x------ ||$ chmod u=rx 
|$ chmod 0550 |______| -r-xr-x--- ||$ chmod ug=rx
|$ chmod 0600 |______| -rw------- ||$ chmod u=rw
|$ chmod 0620 |______| -rw--w---- ||$ chmod ug=w,u+r
|$ chmod 0640 |______| -rw-r----- ||$ chmod ug=r,u+w				umask 0037
|$ chmod 0644 |______| -rw-r--r-- ||$ chmod a=r,u+w			
|$ chmod 0655 |______| -rw-r-xr-x ||$ chmod a=r,ug+x,u+w
|$ chmod 0660 |______| -rw-rw---- ||$ chmod ug=rw
|$ chmod 0700 |______| -rwx------ ||$ chmod u+rwx,go-rwx
|$ chmod 0710 |______| -rwx--x--- ||$ chmod u=rwx,g=x 
|$ chmod 0720 |______| -rwx-w---- ||$ chmod u=rwx,g=w
|$ chmod 0740 |______| -rwxr----- ||$ chmod u=rwx,g=r
|$ chmod 0744 |______| -rwxr--r-- ||$ chmod a=r,u+wx
|$ chmod 0755 |______| -rwxr-xr-x ||$ chmod a=rx,u+w
|$ chmod 0775 |______| -rwxrwxr-x ||$ chmod a=rwx,o-w
|$ chmod 0776 |______| -rwxrwxrw- ||$ chmod a=rwx,o-x
|$ chmod 0777 |______| -rwxrwxrwx ||$ chmod a=rwx
|$ chmod 2755 |______| -rwxr-sr-x ||$ chmod a=r,uo+x,g+s,u+w
|$ chmod 2775 |______| -rwxrwsr-x ||$ chmod a=r,uo+x,g+s,ug+w
|$ chmod 4420 |______| -r-S-w---- ||$ chmod u=r,u+S,g+w
|$ chmod 4655 |______| -rwsr-xr-x ||$ chmod a=r,go+x,u+sw
|$ chmod 4755 |______| -rwSr-xr-x ||$ chmod a=r,go+x,u+w,g+S
======================| |  |  |  |===========================================
                      |A|  |  |  |
				      |T|  |  |  |
                      |T|O |G |O |	
                      |R|w |r |t |
                      |I|n |o |h |
                      |B|e |u |e |
                      |U|r |p |r |
                      |T|  |  |  |
                      |E|  |  |  |
                      |_|__|__|__|



chmod a-w		r-xr-xr-x |


Owner types
✦ u = The user who owns it
✦ g = Other users in the file’s group
✦ o = Other users not in the file’s group
✦ a = All users

Permission actions
✦ + = Selected permissions are added to the existing permissions of each file
✦ - = Selected permissions are removed from the existing permissions of each file
✦ = = Selected permissions are assigned as the only permissions of each file

Permission types
✦ r = Read
✦ w = Write
✦ x = Execute for files or access for directories
✦ X = Execute only if the file is a directory or already has execute permission for

some user
✦ s = Sets user or group ID on execution
✦ t = Saves program text on swap device
✦ u = The permissions that the user who owns the file currently has for the file
✦ g = The permissions that other users in the file’s group have for the file
✦ o = The permissions that other users, not in the file’s group, have for the file
✦ a = All users





Directory Example:
        drwxr-xr-x  3 kevin  users         512 Sep 19 13:47 .public_html/    
        1st bit - directory?             (yes, it contains many files)       
         2nd bit - read by owner?         (yes, by kevin)                    
          3rd bit - write by owner?        (yes, by kevin)                   
           4th bit - execute by owner?      (yes, by kevin)                  
            5th bit - read by group?         (yes, by users                  
             6th bit - write by group?        (no)                           
              7th bit - execute by group?      (yes, by users)               
               8th bit - read by everyone?      (yes, by everyone)           
                9th bit - write by everyone?     (no)                        
                 10th bit - execute by everyone?  (yes, by everyone)         
                                                                             






#####################################################
	Sample umask values and their effects
#####################################################
 Umask 	 Created files 		   Chmod  Created directories
#####################################################

||$ chmod -v 0777 ||	(rwxrwxrwx)	 ||$ chmod -v 
||$ chmod -v 0775 ||	(rwxrwxr-x)  ||$ chmod -v a=rx,ug+w
||$ chmod -v 0755 ||	(rwxr-xr-x)	 ||$ chmod -v u=rwx,g=r,a=x
||$ chmod -v 0750 ||	(rwxr-x---)  ||$ chmod -v u=rwx,g=x
0741 (rwxr----x)
||$ chmod -v 0700 ||	(rwx------)  ||$ chmod -v go+rwx


||$ chmod -v 0777 ||	(rwxrwxrwx)	 ||$ chmod -v 
||$ chmod -v 0775 ||	(rwxrwxr-x)  ||$ chmod -v 
||$ chmod -v 0755 ||	(rwxr-xr-x)	 ||$ chmod -v 
||$ chmod -v 0750 ||	(rwxr-x---)  ||$ chmod -v 
||$ chmod -v 0700 ||$ chmod -v go-rwx	  ||  (rwx------)


| chmod 0700 |______| -rwx------ |  chmod go-rwx	rwx------ |
|$ chmod -v 0500 |	(r-x------)	|


| 000 |	0666 | (rw-rw-rw-) 	  

| 002 |	0664 | (rw-rw-r--) 	  
| 022 |	0644 | (rw-r--r--) 	  
| 027 |	0640 | (rw-r-----) 	  
| 077 |	0600 | (rw-------) 	  
| 277 |	0400 | (r--------) 	  


| 000 |	0666 | (rw-rw-rw-) 	  | 0777 |	(rwxrwxrwx)	|
| 002 |	0664 | (rw-rw-r--) 	  | 0775 |	(rwxrwxr-x)	|
| 022 |	0644 | (rw-r--r--) 	  | 0755 |	(rwxr-xr-x)	|
| 027 |	0640 | (rw-r-----) 	  | 0750 |	(rwxr-x---)	|
| 077 |	0600 | (rw-------) 	  | 0700 |	(rwx------)	|
| 277 |	0400 | (r--------) 	  | 0500 |	(r-x------)	|

#####################################################



  =======================================================
//	Mode 		   	Number Description					\\
===========================================================
||__________||___________________________________||_____
||	0400 	|| Allows the owner to read			 ||
||__________||___________________________________||_____
||	0200 	|| Allows the owner to writ			 ||
||__________||___________________________________||_____
||	0100 	|| Allows owner X & search in dir 	 ||
||__________||___________________________________||_____
||	0040 	|| Allows group members to read		 ||
||__________||___________________________________||_____
||	0020 	|| Allows group members to write	 ||
||__________||___________________________________||_____
||	0010 	|| Allows group mem can X & search   ||
||			||  >> through dir					 ||
||__________||___________________________________||_____
||	0004 	|| Allows anyone / world to read	 ||
||__________||___________________________________||_____
||	0002 	|| Allows anyone / world to write	 ||
||__________||___________________________________||_____
||	0001 	|| Allows Anyone to X & search in dir||
||__________||___________________________________||_____
||	1000 	|| Sets the sticky bit				 ||
||__________||___________________________________||_____
||	2000 	|| Sets the setgid bit				 ||
||__________||___________________________________||_____
||	4000 	|| Sets the setuid bit				 ||
==========================================================




ls -aR1 /etc/ | awk '$1 ~ /^.*w.*/' 2>/dev/null			# Anyone
ls -aR1 /etc/ | awk '$1 ~ /^..w/' 2>/dev/null			# Owner
ls -aR1 /etc/ | awk '$1 ~ /^.....w/' 2>/dev/null		# Group
ls -aR1 /etc/ | awk '$1 ~ /w.$/' 2>/dev/null			# Other 
find /etc/ -readable -type f 2>/dev/null				# Anyone
find /etc/ -readable -type f -maxdepth 1 2>/dev/null	# Anyone






mount -o acl /dev/sdc1 /var/





chgrp -c || --changes		## like verbose but report only when a change is made
chgrp -f || --silent --quiet		## suppress most error messages
chgrp -v || --verbose		## output a diagnostic for every file processed
chgrp -R || --recursive		## operate on files and directories recursively
chgrp -h || --no-dereference		## affect symbolic links instead of any referenced file (useful only on systems that can change the ownership of a symlink)
chgrp --dereference			## affect the referent of each symbolic link (this is the default), rather than the symbolic link itself
chgrp --no-preserve-root	## do not treat '/' specially (the default)
chgrp --preserve-root		## fail to operate recursively on '/'
chgrp --reference=RFILE		## use RFILEs group rather than specifying a GROUP value







setfacl -m u:user:permissions file Set an access ACL on a file for an user
setfacl -m g:group:permissions file Set an access ACL on a file for a group
setfacl -m m:permissions file Set the effective rights mask on a file
setfacl -m o:permissions file Set the permissions on a file for other users
setfacl -x u:user file Remove an access ACL from a file for an user
setfacl -x g:group file Remove an access ACL from a file for a group
The permissions are standard Unix permissions specified as any combination of r w x .
setfacl -m d:u:user:permissions dir
setfacl -d -m u:user:permissions dir As above, but set a default ACL instead of an access ACL.
This applies to all commands above






getfacl file1 | setfacl --set-file=- file2 Copy the ACL of file1 and apply it to file2
getfacl --access dir | setfacl -d -M- dir Copy the access ACL of a directory and set it as default ACL







su -c
determines whether or not the new shell is a login shell.

NOPASSWD option allows the
sudo command to be called from cron

SUDO_ASKPASS envi‐
                 ronment variable is set, it specifies the path to the
                 helper program

Sudo denying access to user joe, who tried to run sudo /bin/ls /tmp:
Dec 4 15:27:29 fileserv sudo: joe : user NOT in sudoers ; TTY=pts/0 ; \
PWD=/home/joe ; USER=root ; COMMAND=/bin/ls /tmp


--close-from=	
sudo will close all open
                 file descriptors other than standard input, standard
                 output and standard error when executing a command.
--login


--role=role             create SELinux security context with
                        specified role
--stdin                 read password from standard input

-other-user=user       in list mode, display privileges for user
-user=user             run command (or edit file) as specified user

--shell
--prompt=
--host=
--set-home
--preserve-env
--background
--edit
!bash in a vi session,
adam will have an interactive shell as root

sudo with the -v option, a
     user can update the cached credentials without running a command.

sudoedit


SUDO_EDITOR, VISUAL and EDITOR

           Plugin sudoers_policy sudoers.so sudoers_mode=0400






• ! or null: This account has no password.
• *: Account is disabled.
• !<encrypted password>: Account is locked.
• !!: Password has never been set.




chage -l faggot
Last password change					: Oct 07, 2016
Password expires					: never
Password inactive					: never
Account expires						: never
Minimum number of days between password change		: 17
Maximum number of days between password change		: 99999
Number of days of warning before password expires	: 17


/var/run/utmp
            the system logfile, which records user logins.

       /var/log/wtmp
            the system logfile, which records user logins and logouts.

       /etc/X11/app-defaults/XTerm
            the xterm default application resources.



## ======================================================================================= ##




           +-------------------+
           |   Authentication  |
           |       Agent       |
           +-------------------+
           | libpolkit-agent-1 |
           +-------------------+
                  ^                                  +--------+
                  |                                  | Client |
                  +--------------+                   +--------+
                                 |                        ^
                                 |                        |
          User Session           |                        |
          =======================|========================|=============
          System Context         |                        |
                                 |                        |
                                 |                    +---+
                                 V                    |
                               /------------\         |
                               | System Bus |         |
                               \------------/         |
                                 ^        ^           V
                                 |        |      +---------------------+
                  +--------------+        |      |      Mechanism      |
                  |                       |      +---------------------+
                  V                       +----> | libpolkit-gobject-1 |
          +------------------+                   +---------------------+
          | org.freedesktop. |
          |    PolicyKit1    |
          +------------------+
          |   Backends and   |
          |    Extensions    |
          +------------------+








echo -e "\t{+} inode number is a data structure that contains informa-
tion concerning a file, including its location


■ If both RAM and swap are full, and no data can be discarded or written to disk,
your system can reach an out-of-memory (OOM) condition. When that happens,
the kernel OOM killer kicks in and begins killing off processes, one by one, to
regain as much memory as the kernel needs to begin functioning properly again.


The settings that relate to how aggressively a system will swap are
referred to as swappiness.



getconf GNU_LIBPTHREAD_VERSION


$( LD_ASSUME_KERNEL=2.2.5 ldd /bin/ls | grep libc.so | \
                           awk '{print $3}' ) | egrep -i 'threads|nptl'
 
 
 $( ldd /bin/ls | grep libc.so | awk '{print $3}' ) | \
                           egrep -i 'threads|nptl'
 
 
 fcntl
 futex(7), nptl(7), sigevent


/etc/ld.so.conf				# list shared paths to cache with ldconfig
/etc/ld.so.cache

ldconfig –p				# display current cache
ldconfig –n 			# process only specified dir 
ldconfig –v				# verbouse display
ldconfig –N				# dont rebuild cache
ldconfig -X				# update the cache but not manage links
ldconfig –f				# use a new config file
ldconfig –C				# use a new cache file 
ldconfig –r				# use a new root 


ldconfig -p | grep ncurses


________________________		 ___________________________
ld.so, ld-linux.so* 	|		| dynamic linker/loader		|
________________________|_______|___________________________|
/lib/ld-linux.so.{1,2}	|		| ELF dynamic linker/loader	|
						|		|							|
## ======================================================================================== ##


					  _____________________________________________________________________+
/etc/ld.so.cache		| File containing a compiled list of directories to search for	 |
						| --> libraries and an ordered list of candidate libraries.		 |
              		  ===================================================================== 

					   ____________________________________________________________
/etc/ld.so.preload		 | File containing a whitespace-separated list of ELF 	|
						 | shared libraries to be loaded before the program.	|
              		   ============================================================= 

					 			  _____________________________________________________________________
readelf --function-relocs			| Perform  relocations  for  both  data objects and functions,  |
									| --> and report any missing objects or functions (ELF only).	|
								  =====================================================================

## =================================================================================================== ##
readelf --data-relocs			## Perform relocations and report any missing objects (ELF only).	== ##
## ==================================================================================================== ##









■ -w <file>		| 
■ -p trigger(s)—If one of these access types occurs (r=read, w=write,
x=execute, a=attribute change) to filename, then trigger an audit record.

The audit daemon will track the file
by its inode number.
auditctl -w /etc/passwd -p rwa

ausearch -f /etc/passwd


ausearch -f /etc/passwd		## review the audit logs




auditctl -l			## list of current audited fi les and their watch settings



■ auditd — The audit daemon
■ auditd.conf — Audit daemon confi guration fi le
■ autditctl — Controls the auditing system
■ audit.rules — Confi guration rules loaded at boot
■ ausearch — Searches the audit logs for specifi ed items
■ aureport — Report creator for the audit logs
■ audispd — Sends audit information to other programs




 <{■}> 
 {+}
µ
 ¥ Æ Æ ª
¤ £ ¥ €









sshd (OpenSSH Daemon)

cat ~/.ssh/authorized_keys
cat ~/.ssh/identity.pub
cat ~/.ssh/identity
cat ~/.ssh/id_rsa.pub
cat ~/.ssh/id_rsa
cat ~/.ssh/id_dsa.pub
cat ~/.ssh/id_dsa
cat /etc/ssh/ssh_config
cat /etc/ssh/sshd_config
cat /etc/ssh/ssh_host_dsa_key.pub
cat /etc/ssh/ssh_host_dsa_key
cat /etc/ssh/ssh_host_rsa_key.pub
cat /etc/ssh/ssh_host_rsa_key
cat /etc/ssh/ssh_host_key.pub
cat /etc/ssh/ssh_host_key

/etc/init.d/ssh
/etc/init/ssh.conf
/usr/sbin/sshd.
/etc/ssh/sshrc
~/.ssh/rc

port 1024		# lowest privilged port


PermitUserRC



echo -e "\t{+} Display the contents of a remote /etc/system-release {+}"
ssh joe@localhost "cat /etc/system-release"

echo "\t\t{+} use X11 forwarding to display a gedit window on your local system"
ssh -X joe@localhost "gedit newfile"
echo "## ============================================================================= ##"
echo "\t\t{+} then save a file on the remote home directory: {+}"
echo "## ============================================================================= ##"

ssh joe@localhost "cat newfile"



## ============================================================================= ##
echo "\tRecursively copy all the fi les from the /usr/share/selinux directory "
echo "\ton a remote system to the /tmp directory on your local system"
## ============================================================================= ##
scp -r joe@localhost:/usr/share/selinux /tmp

echo -e "\t{+} 
 {+}"

											## ============================================================ ##
ssh -p 2222 root@remotehost 				## SSH as root using port 2222 instead of standard port 22
ssh root@remotehost /root/mycommand 		## SExecute a command on a remote host
sftp root@remotehost 						## SFTP-like tool for secure file transfer
											## ============================================================ ##

															## ============================================================= ##
scp myfile root@remotehost:/tmp/myfile2 					## Non-interactive secure file copy.
scp root@remotehost:/tmp/myfile2 myfile 					## Can transfer files from local to remote, from remote to
scp jdoe@host1:/tmp/myfile root@host2:/root/myfile2  		## local, or between two remote hosts
															## ============================================================= ##




------------------------------------------------------------------------------------------------------ 
scp /path/to/local/file.txt user@targetIP:/path/to/share	## Local to remote 
scp discover.sh root@192.168.1.10:/opt/scripts				## Copy Files
 

scp -r user@targetIP:/path/to/share /local/share			## Remote to local
scp -r root@192.168.1.11:/root/metasploit.xml /root/		## 
------------------------------------------------------------------------------------------------------





ssh-keygen -t rsa -b 2048		## Generate interactively a 2048-bit RSA key pair; will prompt for a passphrase
ssh-keygen -t dsa				## Generate a DSA key pair
ssh-keygen -p -t rsa		 	## Change passphrase of the private key



ssh-keygen -t rsa -f ~/.ssh/id_rsa -N 'poopzies'


ssh-copy-id root@remotehost


~/.ssh/id_rsa
~/.ssh/id_rsa.pub



SSH port forwarding (aka SSH tunneling)

													## =========================================================================== ##
ssh -L 2525:mail.foo.com:25 user@mail.foo.com 		## Establish a SSH encrypted tunnel from localhost to remote
													## host mail.foo.com, redirecting traffic from local port 2525
													## to port 25 of remote host mail.foo.com.
													## =========================================================================== ##


													## =========================================================================== ##
ssh -L 2525:mail.foo.com:25 user@login.foo.com		## Establish a SSH encrypted tunnel from localhost to remote host login.foo.com.
													## Remote host login.foo.com will then forward, unencrypted,
													## all data received over the tunnel on port 2525 to remote
													## host mail.foo.com on port 25
													## =========================================================================== ##
													## 
													## 
													## 
													## 


SSH reverse forwarding (aka SSH reverse tunneling)
													## =========================================================================== ##
													## Establish a SSH encrypted reverse tunnel from remote
ssh -R 2222:localhost:22 user@login.foo.com			## host login.foo.com back to localhost, redirecting traffic
													## sent to port 2222 of remote host login.foo.com back towards local port 22.
													## =========================================================================== ##

scp file.c 
sco -r		## Recursively copy entire directories
scp -2      ## Forces scp to use protocol 2
scp -4      ## Forces scp to use IPv4 addresses only

scp -C      ## Compression enable
scp -c		## Cipher

scp -P		## port to connect to on the remote host.
scp -p		## Preserves Modification time
scp 		## 
													## 
													## 
													## 

echo "## ================================================== ##"
echo -e "\t\tConnect to Amazon EC2 with SSH/"
echo "## ================================================== ##"
ssh-keygen -b 8192					## Generate new public/private key pair
ssh-keygen -t dsa



ssh-copy-id -i .ssh/id_rsa.pub michael@tester1.example.com

ssh root@host						## Connect to host as root
ssh -p 222 root@host				## Connect to host on port 222 as root
/etc/ssh/sshd_config				## Change port that the server is listening on or allow root login
------------------------------------------------------------------------------------------------------
mv amazon.pm /root/.ssh/				## Move new Amazon private key to SSH folder
chmod 600 /root/.ssh/amazon.pem			## Change permissions of key
ssh -i amazon.pem kali@host				## Connect to Amazon EC2 as kali with key
echo "## ============================================================================================== ##"


echo "## ============================================================================================== ##"
~/.ssh/id_dsa			## (private key)
~/.ssh/id_dsa.pub		## (public key)

/root/.ssh/id_rsa
/root/.ssh/id_rsa.pub.


 ■ authorized_keys  Includes a list of public keys from remote users. Users with
public encryption keys in this file can connect to remote systems. The system users
and names are listed at the end of each public key copied to this file.

 ■ id_dsa 					Includes the local private key based on the DSA algorithm.
 ■ id_dsa.pub  				Includes the local public key for the user based on the DSA algorithm.
 ■ id_ecdsa 				Includes the local private key based on the ECDSA algorithm.
 ■ id_ecdsa.pub 		 	Includes the local public key for the user based on the ECDSA algorithm.
 ■ id_rsa  					Includes the local private key based on the RSA algorithm.
 ■ id_rsa.pub 			 	Includes the local public key for the user based on the RSA algorithm.
 ■ known_hosts 		 		Contains the public host keys from remote systems.
 ■ ssh-add	_______________ Adds private key identities to the authentication agent
 ■ ssh-copy-id ___________  A script that copies a public key to a target remote system.



~/.ssh/rc
/etc/ssh/sshrc
~/.ssh/environment
/etc/ssh/sshd_config		## SSH server daemon configuration file
/etc/ssh/ssh_config			## SSH client global configuration file
/etc/ssh/ssh_host_key 		## Host's private key (should be mode 0600)
/etc/ssh/ssh_host_key.pub		## Host's public key
/etc/ssh/shosts.equiv			## Names of trusted hosts for host-based authentication
/etc/ssh/ssh_known_hosts		## Database of host public keys that were previously accepted as legitimate

X11Forwarding yes			## Allow X11 Forwarding
ForwardX11Trusted yes		## Allow remote X11 clients to fully access the original X11 display

~/.ssh/authorized_keys
~/.ssh/authorized_keys2

echo "## ============================================================================================== ##"



requesting multiple files from a remote host
rsync -av host:file1 :file2 host:file{3,4} /dest/
rsync -av host::modname/file{1,2} host::modname/file3 /dest/
rsync -av host::modname/file1 ::modname/file{3,4}


export RSYNC_CONNECT_PROG='ssh proxyhost nc %H 873'
         rsync -av targethost1::module/src/ /dest/
         rsync -av rsync:://targethost2/module/src/ /dest/


rsync -av --rsh=ssh host::module /dest


rsync -av -e "ssh -l ssh-user" rsync-user@host::module /dest


rsync -av -M--fake-super /src/ host:/dest/

rsync -av -M --log-file=foo -M--fake-super src/ dest/

rsync -a --files-from=/tmp/foo /usr remote:/backup
rsync -a --files-from=:/path/file-list src:/ /tmp/copy

--usermap=0-99:nobody,wayne:admin,*:normal --groupmap=usr:1,1:usr
--usermap=:nobody --groupmap=*:nobody

rsync -av --remote-option=--log-file=/tmp/rlog src/ dest/

copies all .pdf files in a hierarchy, only creating the necessary destination dir
rsync -avm --del --include=’*.pdf’ -f ’hide,! */’ src/ dest


# Copy profiles if not already present
rsync -Ha --ignore-existing /etc/skel/{.acrorc,.Xdefaults,.gimp*,.gconf*,
.bashrc,.nessus*,.links,.local,.lynx*,.qt,.xine,tmp} $HOME/ 2>/dev/null
[ "$USER" = "knoppix" ] && rsync -Ha --ignore-existing
/usr/share/knoppix/profile/{.acrorc,.Xdefaults,.bashrc,.nessus*,.links,.
lynx*,.qt,.xine,tmp} $HOME/ 2>/dev/null
[ "$USER" = "knoppix" -a -f /usr/share/knoppix/profile/.fonts.cache-1 ] &&
rsync -H --ignore-existing /usr/share/knoppix/profile/.fonts.cache-1 $HOME/
2>/dev/null


sudo rsync -a /home/knoppix/
/mnt/hda1/source/KNOPPIX/etc/skel/




startkde( ){
# Play sound
playsound
if [ -z "$DONTCHANGE" ]; then
# No persistent homedir, copy everything
rsync -Ha --ignore-existing /etc/skel/{.kde*,Desktop} $HOME/ 2>/dev/null





# Play informational sound if soundcore module present
# (checking /dev/sndstat is unreliable)
OGGPLAY=/usr/bin/ogg123
PLAY=/usr/bin/wavp
[ -x "$PLAY" ] || PLAY=/usr/bin/play-sample
[ -x "$PLAY" ] || PLAY=/usr/bin/play
if [ -x "$OGGPLAY" -a -f /usr/share/sounds/shutdown.ogg ]; then
case "$(lsmod)" in *sound*) { $OGGPLAY -q -p 64 \
/usr/share/sounds/shutdown.ogg >/dev/null 2>&1 & } ; sleep 7 ;; esac
elif [ -f /usr/share/sounds/shutdown.wav -a -x "$PLAY" ]; then
	case "$(lsmod)" in *sound*) { $PLAY /usr/share/sounds/shutdown.wav \
	>/dev/null 2>&1 & } ; sleep 7 ;; esac
fi






--archive --recursive 
--backup-dir=
--dirs
--append-verify
--perms --executability 
--acls --chmod=
--xattrs
--owner                 preserve owner (super-user only)
--group                 preserve group
--fake-super
--rsh=COMMAND           specify the remote shell to use
--rsync-path=PROGRAM    specify the rsync to run on remote machine
--existing              skip creating new files on receiver
--ignore-existing       skip updating files that exist on receiver
--chown=USER:GROUP      simple username/groupname mapping
--temp-dir=DIR          create temporary files in directory DIR
--fuzzy                 find similar file for basis if no dest file
--compare-dest=DIR      also compare received files relative to DIR
--copy-dest=DIR         ... and include copies of unchanged files
--compress              compress file data during the transfer
--compress-level=NUM    explicitly set compression level
--address=ADDRESS       bind address for outgoing socket to daemon
--port=PORT             specify double-colon alternate port number
--sockopts=OPTIONS      specify custom TCP options


--stats                 give some file-transfer stats
--8-bit-output          leave high-bit chars unescaped in output
--human-readable        output numbers in a human-readable format
--progress              show progress during transfer
--out-format=FORMAT     output updates using the specified FORMAT
--log-file=FILE         log what were doing to the specified FILE
--log-file-format=FMT   log updates using the specified FMT
--password-file=FILE    read daemon-access password from FILE
--ipv4                  prefer IPv4
--ipv6                  prefer IPv6

--daemon                run as an rsync daemon
--address=ADDRESS       bind to the specified address
--bwlimit=RATE          limit socket I/O bandwidth
--config=FILE           specify alternate rsyncd.conf file
--dparam=OVERRIDE       override global daemon config parameter
--no-detach             do not detach from the parent
--port=PORT             listen on alternate port number
--log-file=FILE         override the "log file" setting
--log-file-format=FMT   override the "log format" setting
--sockopts=OPTIONS      specify custom TCP options
--verbose               increase verbosity







sftp://[user@]machine:[port]/[remote-dir]


sftp://onlyrsh.mx/linux/local
sftp://joe:password@want.compression.edu/private
sftp://joe@noncompressed.ssh.edu/private
sftp://joe@somehost.ssh.edu:2222/private

sftp [user@]host[:file ...]
sftp [user@]host[:dir[/]]
sftp -b batchfile [user@]host

sftp xe1phix@github.com:
sftp xe1phix@github:/
sftp://xe1phix@github.ssh.edu:2222/private

progress
-r 				# Recursively copy entire directories
-P 2222			# Specifies the port to connect to on the remote host.
-v		 		# Raise logging level.
-p 				# Preserves modification times, access times
sftp progress -v -o 
	RSAAuthentication \
	PubkeyAuthentication \
	StrictHostKeyChecking \
	Protocol 2 \
	Cipher rsa \
	CertificateFile \
	VerifyHostKeyDNS \




AddressFamily
BatchMode
BindAddress
CanonicalDomains
CanonicalizeFallbackLocal
CanonicalizeHostname
CanonicalizeMaxDots
CanonicalizePermittedCNAMEs
CertificateFile
ChallengeResponseAuthentication
CheckHostIP
Cipher
Ciphers
Compression
CompressionLevel
ConnectionAttempts
ConnectTimeout
ControlMaster
ControlPath
ControlPersist
GlobalKnownHostsFile
GSSAPIAuthentication
GSSAPIDelegateCredentials
HashKnownHosts
Host
HostbasedAuthentication
HostbasedKeyTypes
HostKeyAlgorithms
HostKeyAlias
HostName
IdentityFile
IdentitiesOnly
IPQoS
KbdInteractiveAuthentication
KbdInteractiveDevices
KexAlgorithms
LogLevel
MACs
NoHostAuthenticationForLocalhost
NumberOfPasswordPrompts
PasswordAuthentication
PKCS11Provider
Port
PreferredAuthentications
Protocol
ProxyCommand
PubkeyAuthentication
RekeyLimit
RhostsRSAAuthentication
RSAAuthentication
SendEnv
ServerAliveInterval
ServerAliveCountMax
StrictHostKeyChecking
TCPKeepAlive
UpdateHostKeys
UsePrivilegedPort
User
UserKnownHostsFile
VerifyHostKeyDNS


##############################################################################################################################
##############################################################################################################################





/etc/crypttab		## The encrypted logical volumes are mounted at boot time using the information from



echo "## ============================================================================================== ##"
MD5					128 bit 
RSA-MD5				128 bit 
SHA					160 bit 
RSA-SHA				160 bit 
SHA1				160 bit 
RSA-SHA1			160 bit 
DSA-SHA				160 bit 
DSA-SHA1-old		160 bit 
DSA-SHA1			160 bit 
RSA-SHA1-2			160 bit 
DSA			  		160 bit 
RIPEMD160			160 bit 
RSA-RIPEMD160		160 bit 
MD4			 		128 bit 
RSA-MD4				128 bit 
ecdsa-with-SHA1		160 bit 
RSA-SHA256 			256 bit 
RSA-SHA384 			384 bit 
RSA-SHA512 			512 bit 
RSA-SHA224 			224 bit 
SHA256 				256 bit 
SHA384 				384 bit 
SHA512 				512 bit 
SHA224 				224 bit 
whirlpool 			512 bit 
echo "## ============================================================================================== ##"


echo "## ============================================================================================== ##"
DES-CFB							 64 bit 					##  (TLS client/server mode)
DES-CBC							 64 bit 
RC2-CBC			 				128 bit
RC2-CFB			 				128 bit			##  (TLS client/server mode)
RC2-OFB							128 bit				##  (TLS client/server mode)
DES-EDE-CBC						128 bit 
DES-EDE3-CBC					192 bit 
DES-OFB 						 64 bit 				##  (TLS client/server mode)
DES-EDE-CFB						128 bit 			##  (TLS client/server mode)
DES-EDE3-CFB					192 bit 			##  (TLS client/server mode)
DES-EDE-OFB						128 bit 			##  (TLS client/server mode)
DES-EDE3-OFB					192 bit 			##  (TLS client/server mode)
DESX-CBC						192 bit 
BF-CBC							128 bit
BF-CFB							128 bit				##  (TLS client/server mode)
BF-OFB							128 bit				##  (TLS client/server mode)
RC2-40-CBC						 40 bit
CAST5-CBC						128 bit
CAST5-CFB						128 bit				##  (TLS client/server mode)
CAST5-OFB						128 bit				##  (TLS client/server mode)
RC2-64-CBC 						 64 bit
AES-128-CBC						128 bit 
AES-128-OFB						128 bit 			##  (TLS client/server mode)
AES-128-CFB						128 bit 			##  (TLS client/server mode)
AES-192-CBC						192 bit 
AES-192-OFB						192 bit 			##  (TLS client/server mode)
AES-192-CFB						192 bit 			##  (TLS client/server mode)
AES-256-CBC						256 bit 
AES-256-OFB						256 bit 			##  (TLS client/server mode)
AES-256-CFB						256 bit 			##  (TLS client/server mode)
AES-128-CFB1					128 bit 			##  (TLS client/server mode)
AES-192-CFB1					192 bit 			##  (TLS client/server mode)
AES-256-CFB1					256 bit 			##  (TLS client/server mode)
AES-128-CFB8					128 bit 			##  (TLS client/server mode)
AES-192-CFB8					192 bit 			##  (TLS client/server mode)
AES-256-CFB8					256 bit 			##  (TLS client/server mode)
DES-CFB1						 64 bit 				##  (TLS client/server mode)
DES-CFB8						 64 bit 				##  (TLS client/server mode)
DES-EDE3-CFB1					192 bit 			##  (TLS client/server mode)
DES-EDE3-CFB8					192 bit 			##  (TLS client/server mode)
CAMELLIA-128-CBC				128 bit 
CAMELLIA-192-CBC				192 bit 
CAMELLIA-256-CBC				256 bit 
CAMELLIA-128-CFB				128 bit 			##  (TLS client/server mode)
CAMELLIA-192-CFB				192 bit 			##  (TLS client/server mode)
CAMELLIA-256-CFB				256 bit 			##  (TLS client/server mode)
CAMELLIA-128-CFB1				128 bit 			##  (TLS client/server mode)
CAMELLIA-192-CFB1				192 bit 			##  (TLS client/server mode)
CAMELLIA-256-CFB1				256 bit 			##  (TLS client/server mode)
CAMELLIA-128-CFB8				128 bit 			##  (TLS client/server mode)
CAMELLIA-192-CFB8				192 bit 			##  (TLS client/server mode)
CAMELLIA-256-CFB8				256 bit 			##  (TLS client/server mode)
CAMELLIA-128-OFB				128 bit 			##  (TLS client/server mode)
CAMELLIA-192-OFB				192 bit 			##  (TLS client/server mode)
CAMELLIA-256-OFB				256 bit 			##  (TLS client/server mode)
SEED-CBC						128 bit 
SEED-OFB						128 bit 			##  (TLS client/server mode)
SEED-CFB						128 bit 			##  (TLS client/server mode)

echo "## ============================================================================================== ##"



Access Control Lists (ACL)
Pluggable Authentication Modules (PAM)
Security Enhanced Linux (SELinux)
Discretionary Access Control (DAC)
Mandatory Access Control (MAC)
Role Based Access Control (RBAC)

Digital Signature Algorithm (DSA), 
Elliptic Curve DSA (ECDSA)
{Rivest//Shamir//Adleman} (RSA)

Public-Key Cryptography Standards (PKCS)
Digital Signature Standard (DSS)
Secure Hash Signature Standard (SHS)
64-Bit Block Cipher (Blowfish)
Advanced Encryption Standard (AES)
String-to-Key (S2K)
multiprecision integer (MPI)
Elgamal (Diffie-Hellman)
Encrypted Session Key (ESK)
Internet Security Association and Key Management Protocol (ISAKMP)

echo "## ============================================================================================== ##"
El Gamal 								## Asymmetric cryptography
RSA 									## asymmetric cryptography
echo "## ============================================================================================== ##"
AES (Advanced Encryption Standard)  	## Symmetric cryptography
Blowfish 								## Symmetric cryptography	|4-Bit Block Cipher
Elliptic Curve							## symmetric cryptography
RC5 									## Symmetric cryptography
echo "## ============================================================================================== ##"


 ■ Asymmetric cryptography, also called private/public key cryptography, 
uses two keys,called a key pair. A key pair consists of a public key and a private key.

 ■ Symmetric cryptography — also called secret key or private key cryptography, 
encrypts plaintext using a single keyed cipher. 
The same key is needed in order to decrypt the data.


■ Block cipher — A cipher that breaks data into blocks before encrypting
■ Stream cipher — A cipher that encrypts the data without breaking it up


 ■ collision-free — The hashing algorithm does not output 
the same hash for two totally different inputs.


AES (Advanced Encryption Standard)


Block cipher	encrypting data in 128-, 192-, or 256-bit blocks


Block cipher, encrypting data in 64-bit blocks using the same
32-bit to 448-bit keys for encrypting/decrypting.


DES (Data Encryption Standard)

					| encrypting
					|  data in

DES		Block cipher 64-bit blocks using the same
56-bit key for encrypting/decrypting.


El Gamal
Asymmetric cryptography.

Elliptic Curve
Cryptosystems Asymmetric cryptography.

RSA Most popular asymmetric cryptography.









           Asymmetric  |  Hash  |  Symmetric
            key size   |  size  |   key size
           ------------+--------+-----------
              1024        160         80
              2048        224        112
              3072        256        128
              7680        384        192
             15360        512        256

       MD5     | 22 characters
       SHA-256 | 43 characters
       SHA-512 | 86 characters



CHV
          Card Holder Verification, commonly followed by a number
          denoting which CHV is meant. The OpenPGP card uses three CHVs:
          CHV1, CHV2, CHV3. They are often also referenced as PIN 1,
          PIN2, PIN 3. CHV3 is used as the so called Admin PIN (which is
          sometimes also called S(ecurity)O(fficer) PIN).

   PC/SC
          Personal computer/Smart Card. The standard framework for Smart
          Card access on Windows Platforms (included in Windows2000).
          There are also implementations for GNU/Linux and other Free
          OSes (i.e. pcsclite).


   CCID
          Chip Card Interface Description. The specification for the USB
          device class used for chip card readers is 11 (0x0B).


hashdeep

/etc/apt/trusted.gpg.d/
/usr/share/keyrings/debian-archive-keyring.gpg
/usr/share/keyrings/debian-archive-removed-keys.gpg



/etc/apt/trusted.gpg.d/debian-archive-squeeze-automatic.gpg
/etc/apt/trusted.gpg.d/debian-archive-squeeze-stable.gpg
/etc/apt/trusted.gpg.d/debian-archive-wheezy-automatic.gpg
/etc/apt/trusted.gpg.d/debian-archive-wheezy-stable.gpg
/usr/share/keyrings/debian-archive-keyring.gpg

/usr/share/keyrings/debian-archive-keyring.gpg
/usr/share/keyrings/debian-archive-removed-keys.gpg
/usr/share/keyrings/kali-archive-keyring.gpg
/usr/share/keyrings/parrot-keyring.gpg




echo "## ============================================================================================== ##"
~/.gnupg/pubring.gpg            # Contains your public keys and all others imported 
~/.gnupg/secring.gpg            # Can contain more than one private key 
~/.gnupg/secring.gpg			# The secret keyring.  You should backup this file.
~/.gnupg/trustdb.gpg			# The trust database
~/.gnupg/trustdb.gpg.lock		# The lock file for the trust database.
~/.gnupg/random_seed			# A file used to preserve the state of the internal random pool.
~/.gnupg/secring.gpg.lock		# The lock file for the secret keyring.
~/.gnupg/openpgp-revocs.d/		# This is the directory where gpg stores pre-generated revocation certificates. 
echo "## ============================================================================================== ##"



gnutls-cli 

seahorse-tool --import
seahorse-tool --verify

torbrowser-launcher --settings

## ============================================================================================== ##
	gpg ‐e ‐r 'Your Name' file                  # Encrypt with your public key 
## --------------------------------------------------------------------------------------- ##
	gpg ‐o file ‐d file.gpg                     # Decrypt. Use ‐o or it goes to stdout
## ============================================================================================== ##


## ======================================================================================================== ##
## -------------------------------------------------------------------------------------------------------- ##
	gpg ‐a ‐o alicekey.asc ‐‐export 'Alice'				\\## Alice exported her key in ascii file. 
## -------------------------------------------------------------------------------------------------------- ##
	gpg ‐‐send‐keys ‐‐keyserver subkeys.pgp.net KEYID	  \\## Alice put her key on a server. 
## -------------------------------------------------------------------------------------------------------- ##
	gpg ‐‐import alicekey.asc                  			 	\\## You import her key into your pubring. 
## -------------------------------------------------------------------------------------------------------- ##
	gpg ‐‐search‐keys ‐‐keyserver subkeys.pgp.net 'Alice' 	  \\## or get her key from a server. 
## -------------------------------------------------------------------------------------------------------- ##
## ======================================================================================================== ##




## ======================================================================================= ##
## --------------------------------------------------------------------------------------- ##
		gpg ‐e ‐r 'Alice' file			## Encrypt the file for Alice. 
## --------------------------------------------------------------------------------------- ##
		gpg ‐d file.gpg ‐o file			## Decrypt a file encrypted by Alice for you. 
## --------------------------------------------------------------------------------------- ##
## ======================================================================================= ##



## ======================================================================================= ##
## --------------------------------------------------------------------------------------- ##
		gpg ‐‐list‐keys							## list public keys and see the KEYIDS 
## --------------------------------------------------------------------------------------- ##
		gpg ‐‐gen‐revoke 'Your Name'			## generate revocation certificate 
## --------------------------------------------------------------------------------------- ##
		gpg ‐‐list‐secret‐keys					## list private keys 
## --------------------------------------------------------------------------------------- ##
		gpg ‐‐delete‐keys NAME					## delete a public key from local key ring 
## --------------------------------------------------------------------------------------- ##
		gpg ‐‐delete‐secret‐key NAME			## delete a secret key from local key ring 
## --------------------------------------------------------------------------------------- ##
		gpg ‐‐fingerprint KEYID					## Show the fingerprint of the key 
## --------------------------------------------------------------------------------------- ##
## ======================================================================================= ##


## ============================================================================================== ##
## ---------------------------------------------------------------------------------------------- ##
	gpg --export -o keyring_backup.gpg 					## Export your whole keyring to a file
## ---------------------------------------------------------------------------------------------- ##
	gpg --export-secret-key -a "You" -o private.key		## Export your private key to a file
## ---------------------------------------------------------------------------------------------- ##
	gpg --export-public-key -a "Alice" -o alice.pub		## Export Alice's public key to a file
## ---------------------------------------------------------------------------------------------- ##
## ============================================================================================== ##




## ============================================================================================== ##
## ---------------------------------------------------------------------------------------------- ##
		gpg --export Michael Jang > gpg.pub


## ---------------------------------------------------------------------------------------------- ##
## >> Encrypts the local keepthis.secret file
## ---------------------------------------------------------------------------------------------- ##
##	gpg --out underthe.radar --recipient 'Michael Jang' --encrypt keepthis.secret	
## ---------------------------------------------------------------------------------------------- ##
## ============================================================================================== ##





$ gpg --out keepthis.secret --decrypt underthe.radar

## ------------------------------------------------------------------------------------ ##

## ======================================================================================= ##
	• Creates a message digest (aka hash) of the message file
## --------------------------------------------------------------------------------------- ##
	• Encrypts the message digest, which creates the digital signature
## --------------------------------------------------------------------------------------- ##
	• Encrypts the message file
## --------------------------------------------------------------------------------------- ##
	• Places the encrypted contents into the fi le specifi ed by the --output option,
## ======================================================================================= ##


## ======================================================================================= ##
	The file JohnDoe.DS now contains an encrypted and digitally signed message.
## ======================================================================================= ##
## --------------------------------------------------------------------------------------- ##
	gpg --output JohnDoe.DS --sign MessageForChristine.txt
## --------------------------------------------------------------------------------------- ##
	gpg --decrypt JohnDoe.DS
## --------------------------------------------------------------------------------------- ##
## ======================================================================================= ##




gpg --armor --detach-sign mat-$VERSION.tar.xz


.bz2{,.gpgsig,.md5sum}
{,.DIGESTS.asc,.DIGESTS}

gpg --verify stage3-*.tar.bz2.DIGESTS.asc
sha1sum -c stage3*.tar.bz2.DIGESTS



## ======================================================================================= ##
/etc/security/limits.conf
ulimit -S      use the soft resource limit 
ulimit -H      use the hard resource limit 

ulimit -a      all current limits are reported 
ulimit -c      the maximum size of core files created 
ulimit -d      the maximum size of a process data segment 
ulimit -f      the maximum size of files created by the shell 
ulimit -l      the maximum size a process may lock into memory 
ulimit -m      the maximum resident set size 
ulimit -n      the maximum number of open file descriptors 
ulimit -p      the pipe buffer size 
ulimit -s      the maximum stack size 
ulimit -t      the maximum amount of cpu time in seconds 
ulimit -u      the maximum number of user processes 
ulimit -v      the size of virtual memory 


ulimit -Sc		soft resource limit the maximum size of core files created 

ulimit -Sc 0	no core dumps
ulimit -u		total user processes
## ======================================================================================= ##

# don't create core files for any user unless they
# change this ulimit value for themselves
* soft core 0


/dev/zero (a special device that returns zero-valued bytes to all read requests)


## ======================================================================================= ##



				Limit directives and their equivalent with ulimit

           ┌─────────────────┬───────────────────┬────────────────────────────┐
           │Directive        │ ulimit equivalent │ Unit                       │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitCPU=        │ ulimit -t         │ Seconds                    │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitFSIZE=      │ ulimit -f         │ Bytes                      │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitDATA=       │ ulimit -d         │ Bytes                      │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitSTACK=      │ ulimit -s         │ Bytes                      │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitCORE=       │ ulimit -c         │ Bytes                      │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitRSS=        │ ulimit -m         │ Bytes                      │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitNOFILE=     │ ulimit -n         │ Number of File Descriptors │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitAS=         │ ulimit -v         │ Bytes                      │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitNPROC=      │ ulimit -u         │ Number of Processes        │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitMEMLOCK=    │ ulimit -l         │ Bytes                      │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitLOCKS=      │ ulimit -x         │ Number of Locks            │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitSIGPENDING= │ ulimit -i         │ Number of Queued Signals   │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitMSGQUEUE=   │ ulimit -q         │ Bytes                      │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitNICE=       │ ulimit -e         │ Nice Level                 │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitRTPRIO=     │ ulimit -r         │ Realtime Priority          │
           ├─────────────────┼───────────────────┼────────────────────────────┤
           │LimitRTTIME=     │ No equivalent     │ Microseconds               │
           └─────────────────┴───────────────────┴────────────────────────────┘







## ======================================================================================= ##
Encrypting a Linux directory with Linux Unifi ed Key Setup (LUKS)
## ======================================================================================= ##
lvs -o devices
/dev/mapper/luks-b099fbbe-0e56-425f-91a6-44f129db9f4b(56)
/dev/mapper/luks-b099fbbe-0e56-425f-91a6-44f129db9f4b(0)


## ======================================================================================= ##
cryptsetup status luks-b099fbbe-0e56-425f-91a6-44f129db9f4b
## ======================================================================================= ##
/dev/mapper/luks-b099fbbe-0e56-425f-91a6-44f129db9f4b
is active and is in use.
type:
LUKS1
cipher: aes-xts-plain64
keysize: 512 bits
device: /dev/sda3
offset: 4096 sectors
size:
15742976 sectors
mode:
read/write


## ======================================================================================= ##

## ======================================================================================= ##
## --------------------------------------------------------------------------------------- ##


mount -t ecryptfs /home/johndoe/Secret /home/johndoe/Secret			## encrypt the directory /home/johndoe/Secret
## --------------------------------------------------------------------------------------- ##


mount | grep /home/johndoe/Secret
/home/johndoe/Secret on /home/johndoe/Secret type ecryptfs
(rw,relatime,ecryptfs_sig=70993b8d49610e67,ecryptfs_cipher=aes,
ecryptfs_key_bytes=16,ecryptfs_unlink_sigs)





mount a volume  : 

zuluMount-cli -m -d /dev/sdc1					## mount a volume  : 


unmount a volume: 

zuluMount-cli -u -d /dev/sdc1					## unmount a volume: 


mount and encrypted volume with a key "xyz" : 

zuluMount-cli -m -d /dev/sdc2 -p xyz			## unmount a volume: 



print expanded list of all volumes
zuluMount-cli -l								## print expanded list of all volumes

zuluMount-cli -m -d /dev/sdc1					## mount a volume  : 
zuluMount-cli -u -d /dev/sdc1					## unmount a volume: 
zuluMount-cli -m -d /dev/sdc2 -p xyz			## unmount a volume: 
zuluMount-cli -l											## print expanded list of all volumes
zuluMount-cli -P								## print a list of all volumes
zuluMount-cli -P								## 
zuluMount-cli -e								## mount options
zuluMount-cli -P								## 
zuluMount-cli -S 								## print a list of system volumes
zuluMount-cli -N								## print a list of non system volumes
zuluMount-cli -E								## 

fstrim - discard unused blocks on a mounted filesystem












## =================================================================== ##
## ========================== LPIC-2 Start =========================== ##
## =================================================================== ##












ISOLINUX				## booting Linux from an optical disc 

EXTLINUX				## Linux fi lesystems

PXELINUX				## from a network boot

SYSLINUX				## from a FAT fi lesystem










PXE server Configurations:


boot.msg				## This file contains the message that Knoppix shows by default when you
							>> netboot. It also contains a reference to the graphic that Knoppix dis-
							>> plays on terminals that support it.
english.kbd				## The German keyboard mapping. If you plan on typing in German, this
							>> will be useful to you. Otherwise, it won’t.
logo.16A				## special graphic displayed at the PXE boot menu.
miniroot.gz				## The initial root partition the Knoppix kernel loads that contains 
							>> modules and other important files.
pxelinux.0				## The pxelinux program, which you should already have set up on your PXE server.
pxelinux.cfg/default	## This file contains the full set of pxelinux configuration commands for
							>> Knoppix. The bulk of your configuration will occur here, and I will cover it below.
vmlinuz					## The Knoppix kernel image.





DEFAULT vmlinuz
APPEND secure nfsdir=10.1.1.215:/cdrom nodhcp lang=us ramdisk_size=100000
init=/etc/init apm=power-off nomce vga=791 initrd=miniroot.gz quiet
BOOT_IMAGE=knoppix



from the booted Knoppix system, rsync all of the files from the /cdrom
directory to /mnt/knoppix:
knoppix@Knoppix:~$ sudo rsync –av /cdrom/ 192.168.1.5:/mnt/knoppix/



edit the /etc/exports file on the NFS server and 
add an entry to share the /mnt/knoppix directory:
/mnt/knoppix 192.168.1.0/255.255.255.0(ro)

/etc/
init.d/nfsd reload







mkdir boot/grub

cp /sbin/update-grub ./
knoppix@tty1[hda1]$ sudo chroot /mnt/hda1 /update-grub

grub-install --root-directory=/mnt/hda1 /dev/hda

Save the MBR

dd if=/dev/hda of=/home/knoppix/mbr_backup bs=512 count=1


the first 512 bytes of the drive (the MBR)


only want to back up the boot sector
(although it’s wise to back up the partition table as well)
replace 512 with 446

















blank your boot code, type:
dd if=/dev/zero of=/dev/hda bs=446 count=1								## blank your boot code



## To clear the complete MBR, including the partition table:
dd if=/dev/zero of=/dev/hda bs=512 count=1								## clear the complete MBR + partition table:


dd if=/dev/hda of=/home/knoppix/mbr_backup bs=512 count=1				## Save the MBR



## bs=446 element, this command only restores the boot code in the MBR.
dd if=/home/knoppix/mbr_backup of=/dev/hda bs=446 count=1


## restore the full 512 bytes to the MBR with:
dd if=mbr_backup of=/dev/hda bs=512 count=1						## restore the full 512 bytes to the MBR with:



To remove the traces of lilo or grub from your MBR
install-mbr /dev/hda


dd if=/dev/zero of=/dev/hda bs=446 count=1							## blank your boot code
dd if=/dev/zero of=/dev/hda bs=512 count=1							## clear the complete MBR + partition table:
dd if=/dev/hda of=/home/knoppix/mbr_backup bs=512 count=1			## Save the MBR
dd if=/home/knoppix/mbr_backup of=/dev/hda bs=446 count=1			## restores the boot code in the MBR.
dd if=mbr_backup of=/dev/hda bs=512 count=1							## restore the full 512 bytes to the MBR with:







bzImage (stands for "big zImage")


clean • Delete most generated files while leaving enough to build modules
mrproper • Delete the current configuration and ALL generated files
distclean • Remove everything including backup files, leftover patch files, etc.

make clean (run
as +root+, in the kernel source directory)



Main types:
• make config • The most involved type, you will be asked questions on everything
before compile can start (100s of them), not generally used anymore except in very specialized
circumstances
• make menuconfig • Most common method, will read .config file in base source
directory as template if it exists, reads existing kernel configuration if not
• make xconfig • Same as make menuconfig but with the X Window QT graphical
libraries
• make gconfig • Same as make menuconfig but with the Gnome Desktop and GTK+
librarie



Compile the new kernel:
make bzImage

Make the kernel modules:
make modules

Make the kernel module installation:
make modules-install



KernelVersion='dpkg -l | grep linux-image | grep -v meta | sort -t '.' -k 2 -g | tail -n 1 | grep "$(uname -r)" | cut -c5-34'


Copy the new bzImage to the /boot directory:
cp /usr/src/linux-[kernel version]/arch/[architecture]/boot/bzImage /
boot/vmlinuz-[kernel version].[architecture]



Create the initramfs file (which calls the "dracut" utility):
•
mkinitrd /boot/initramfs-[kernel version].[architecture].img [kernel version]
•
•
• mkinitrd /boot/initramfs-3.13.0-36.x86_64.img 3.13.0-36




LKM
• Modules that are loaded into memory as needed to supplement the functionality of the base
kernel





/lib/modules/modules.dep.bin	## binary file generated by depmod listing the dependencies for every module
/lib/modules/modules.dep		## Text Version








* route add default gw 10.1.1.1 = ip route add default via 10.1.1.1
* route del default = ip route del default
* route add -net 10.1.1.0 netmask 255.255.255.0 gw 10.1.1.1 = ip route add 10.1.1.0/24 via 10.1.1.1
* route del -net 10.1.1.0 netmask 255.255.255.0 gw 10.1.1.1 = ip route del 10.1.1.0/24 via 10.1.1.1
* route = ip route show
* ifconfig = ip addr show
* ifconfig eth0 promisc/-promisc = ip link set eth0 promisc on/off
* ifconfig eth0 apr/-arp = ip link set eth0 arp on/off
* ifconfig etho 10.1.1.120 netmask 255.255.255.0 broadcast 10.1.1.255 = ip addr add 10.1.1.120 /24 broadcast 10.1.1.255 dev eth0
* arp = ip neigh show
* arp -i eth0 -d 10.1.1.120 = ip neigh del 10.1.1.120 dev eth0 






* Information on uptime container in /var/run/utmp






/lib/systemd/system/collectd.service


systemctl status collectd
systemctl start collectd



collectd.conf		## Configuration for the system statistics collection daemon collectd

LoadPlugin			## controls which plugins to load.



types.db - Data-set specifications for the system statistics collection daemon collectd


cat /etc/collectd/collectd.conf | grep rrd

cat /usr/share/collectd/types.db | grep cpu



/usr/share/collectd/types.db







rrdtool




cat /var/lib/collectd/




## =================================================================== ##
## ====================  ======================= ##
## =================================================================== ##













The seccomp() system call operates on the Secure Computing (seccomp) state of the calling process


CONFIG_SECCOMP
SECCOMP_SET_MODE_FILTER				## The system calls allowed are defined by a pointer to a Berkeley Packet Filter (BPF) passed via args.
If fork(2) or clone(2) is allowed by the filter, any child processes will be constrained to the same system call fil‐
              ters as the parent.
SECCOMP_SET_MODE_STRICT


SECCOMP_FILTER_FLAG_TSYNC
prctl(PR_SET_SECCOMP, SECCOMP_MODE_STRICT);
AUDIT_ARCH_X86_64

SECCOMP_RET_KILL




SECCOMP_RET_TRAP

This value results in the kernel sending a SIGSYS signal to the triggering process without executing the system call.
              Various fields will be set in the siginfo_t structure (see sigaction(2)) associated with signal:
              
              
*  si_signo will contain SIGSYS.

              *  si_call_addr will show the address of the system call instruction.

              *  si_syscall and si_arch will indicate which system call was attempted.

              *  si_code will contain SYS_SECCOMP.

              *  si_errno will contain the SECCOMP_RET_DATA portion of the filter return value.





SECCOMP_RET_TRACE
              When  returned, this value will cause the kernel to attempt to notify a ptrace(2)-based tracer prior to executing the
              system call.  If there is no tracer present, the system call is not executed and returns a failure status with  errno
              set to ENOSYS.


EACCESS
              The  caller did not have the CAP_SYS_ADMIN capability in its user namespace, or had not set no_new_privs before using
              SECCOMP_SET_MODE_FILTER



prctl
PR_SET_SECCOMP

PTRACE_SECCOMP_GET_FILTER




The system calls allowed are defined by a pointer to a Berkeley Packet Filter (BPF)

This  argument is  a  pointer to a struct sock_fprog; it can be designed to filter arbitrary system calls 
and system call arguments. If the filter is invalid, seccomp() fails, returning EINVAL in errno.


If fork(2) or clone(2) is allowed by the filter, any child processes will be constrained to the same system call filters as the parent.  


If execve(2) is allowed, the existing filters will be preserved across a call to execve(2).

In  order  to use the SECCOMP_SET_MODE_FILTER operation, either the caller must have: 

the CAP_SYS_ADMIN capability, 
or
the thread must already have the no_new_privs bit set.  




If that bit was not  already  set  by  an  ancestor  of  this
thread, the thread must make the following call:

                  prctl(PR_SET_NO_NEW_PRIVS, 1);



SECCOMP_FILTER_FLAG_TSYNC
                     When adding a new filter, synchronize all other threads of the calling process  to  the  same  seccomp  filter
                     tree.


 A  "filter tree" is the ordered list of filters attached to a thread.  (Attaching identical filters in
                     separate seccomp() calls results in different filters from this perspective.)



 If any thread cannot synchronize to the same filter tree, the call will not attach the new seccomp filter, and
                     will  fail, returning the first thread ID found that cannot synchronize.  Synchronization will fail if another
                     thread in the same process is in SECCOMP_MODE_STRICT or if it has attached  new  seccomp  filters  to  itself,
                     diverging from the calling thread's filter tree.






























## =================================================================== ##
## ================== Begin I2P Protocol Stack  ======================== ##
## =================================================================== ##








## ======================================================================== ##
						Time Sync Message Format
## ======================================================================== ##



+-------+-------+-------+-------+-------+-------+-------+-------+
|       0       |      timestamp in seconds     | uninterpreted             
+-------+-------+-------+-------+-------+-------+-------+-------+
        uninterpreted           | Adler checksum of bytes 0-11  |
+-------+-------+-------+-------+-------+-------+-------+-------+








## ============================================================================ ##
	initial I2NP message fragment, or a complete (unfragmented) I2NP message
## ============================================================================ ##
+----+----+----+----+----+----+----+----+
|flag|  Tunnel ID (opt)  |              |
+----+----+----+----+----+              +
|                                       |
+                                       +
|         To Hash (optional)            |
+                                       +
|                                       |
+                        +--------------+
|                        |dly | Message
+----+----+----+----+----+----+----+----+
 ID (opt) |extended opts (opt)|  size   |
+----+----+----+----+----+----+----+----+






   +----+----+----+----+----+----+----+----+
   |                                       |
   +                                       +
   |       ElGamal Encrypted Block         |
   ~                                       ~
   |                                       |
   +         +----+----+----+----+----+----+
   |         |                             |
   +----+----+                             +
   |                                       |
   +                                       +
   |         AES Encrypted Block           |
   ~                                       ~
   |                                       |
   +         +----+----+----+----+----+----+
   |         +
   +----+----+






## ======================================================================== ##
								ElGamal Block
		The encrypted ElGamal Block is always 514 bytes long.
		The unencrypted ElGamal data is 222 bytes long, containing:
## ======================================================================== ##
   +----+----+----+----+----+----+----+----+
   |                                       |
   +                                       +
   |           Session Key                 |
   +                                       +
   |                                       |
   +                                       +
   |                                       |
   +----+----+----+----+----+----+----+----+
   |                                       |
   +                                       +
   |              Pre-IV                   |
   +                                       +
   |                                       |
   +                                       +
   |                                       |
   +----+----+----+----+----+----+----+----+
   +                                       +
   |                                       |
   +                                       +
   |       158 bytes random padding        |
   ~                                       ~
   |                                       |
   +                             +----+----+
   |                             |
   +----+----+----+----+----+----+



## ======================================================================== ##
								AES Block
		The unencrypted data in the AES block contains the following:
## ======================================================================== ##


   +----+----+----+----+----+----+----+----+
   |tag count|                             |
   +----+----+                             +
   |                                       |
   +                                       +
   |          Session Tags                 |
   ~                                       ~
   |                                       |
   +                                       +
   |                                       |
   +         +----+----+----+----+----+----+
   |         |    payload size   |         |
   +----+----+----+----+----+----+         +
   |                                       |
   +                                       +
   |          Payload Hash                 |
   +                                       +
   |                                       |
   +                             +----+----+
   |                             |flag|    |
   +----+----+----+----+----+----+----+    +
   |                                       |
   +                                       +
   |          New Session Key (opt.)       |
   +                                       +
   |                                       |
   +                                  +----+
   |                                  |    |
   +----+----+----+----+----+----+----+    +
   |                                       |
   +                                       +
   |           Payload                     |
   ~                                       ~
   |                                       |
   +                        +----//---+----+
   |                        |              |
   +----+----+----//---+----+              +
   |          Padding to 16 bytes          |
   +----+----+----+----+----+----+----+----+





## ======================================================================== ##
					The encrypted ElGamal contains:
## ======================================================================== ##
+----+----+----+----+----+----+----+----+
|  zero padding...       |              |
+----+----+----+-//-+----+              +
|                                       |
+                                       +
|       ElG encrypted part 1            |
~                                       ~
|                                       |
+    +----+----+----+----+----+----+----+
|    |   zero padding...      |         |
+----+----+----+----+-//-+----+         +
|                                       |
+                                       +
|       ElG encrypted part 2            |
~                                       ~
|                                       |
+         +----+----+----+----+----+----+
|         +
+----+----+






## ======================================================================== ##
						unencrypted ElGamal contains:
## ======================================================================== ##
+----+----+----+----+----+----+----+----+
|nonz|           H(data)                |
+----+                                  +
|                                       |
+                                       +
|                                       |
+                                       +
|                                       |
+    +----+----+----+----+----+----+----+
|    |  data...
+----+----+----+-//






## ======================================================================== ##
								RouterAddress
## ======================================================================== ##


+----+----+----+----+----+----+----+----+
|cost|           expiration
+----+----+----+----+----+----+----+----+
     |        transport_style           |
+----+----+----+----+-//-+----+----+----+
|                                       |
+                                       +
|               options                 |
~                                       ~
~                                       ~
|                                       |
+----+----+----+----+----+----+----+----+









## ======================================================================== ##
	RouterIdentity followed by the Date, when the entry was published
## ======================================================================== ##
+----+----+----+----+----+----+----+----+
| router_ident                          |
+                                       +
|                                       |
~                                       ~
~                                       ~
|                                       |
+----+----+----+----+----+----+----+----+
| published                             |
+----+----+----+----+----+----+----+----+
|size| RouterAddress 0                  |
+----+                                  +
|                                       |
~                                       ~
~                                       ~
|                                       |
+----+----+----+----+----+----+----+----+
| RouterAddress 1                       |
+                                       +
|                                       |
~                                       ~
~                                       ~
|                                       |
+----+----+----+----+----+----+----+----+
| RouterAddress ($size-1)               |
+                                       +
|                                       |
~                                       ~
~                                       ~
|                                       |
+----+----+----+----+-//-+----+----+----+
|psiz| options                          |
+----+----+----+----+-//-+----+----+----+
| signature                             |
+                                       +
|                                       |
+                                       +
|                                       |
+                                       +
|                                       |
+                                       +
|                                       |
+----+----+----+----+----+----+----+----+











## ======================================================================== ##
					Tunnel Message Delivery Instructions!
## ======================================================================== ##
+----+----+----+----+----+----+----+----+
|flag|                                  |
+----+                                  +
|                                       |
+       Session Key (optional)          +
|                                       |
+                                       +
|                                       |
+    +----+----+----+----+--------------+
|    |                                  |
+----+                                  +
|                                       |
+         To Hash (optional)            +
|                                       |
+                                       +
|                                       |
+    +----+----+----+----+--------------+
|    |  Tunnel ID (opt)  |  Delay (opt)
+----+----+----+----+----+----+----+----+









## ======================================================================== ##
		uncompressed LeaseSet or a compressed RouterInfo
## ======================================================================== ##

with reply token:

+----+----+----+----+----+----+----+----+
| SHA256 Hash as key                    |
+                                       +
|                                       |
+                                       +
|                                       |
+                                       +
|                                       |
+----+----+----+----+----+----+----+----+
|type| reply token       | reply_tunnelId
+----+----+----+----+----+----+----+----+
     | SHA256 of the gateway RouterInfo |
+----+                                  +
|                                       |
+                                       +
|                                       |
+                                       +
|                                       |
+    +----+----+----+----+----+----+----+
|    | data ...
+----+-//







## ======================================================================== ##
with reply token == 0:
## ======================================================================== ##

+----+----+----+----+----+----+----+----+
| SHA256 Hash as key                    |
+                                       +
|                                       |
+                                       +
|                                       |
+                                       +
|                                       |
+----+----+----+----+----+----+----+----+
|type|         0         | data ...
+----+----+----+----+----+-//






## ======================================================================== ##
						NTCP Protocol Specification
## ======================================================================== ##

+-------+-------+-------+-------+-------+-------+-------+-------+
| sizeof(data)  |                                               |
+-------+-------+                                               +
|                            data                               |
~                                                               ~
|                                                               |
+                                       +-------+-------+-------+
|                                       |        padding          
+-------+-------+-------+-------+-------+-------+-------+-------+
                                | Adler checksum of sz+data+pad |
+-------+-------+-------+-------+-------+-------+-------+-------+





#############################################################################
## ===================================================================== ##
## ================== End of I2P Protocol Stack  ===================== ##
## ===================================================================== ##
#############################################################################






















				 ______________________
				< Enter The Linux Void >
				 ----------------------
				  \                 __ 
				   \               (oo)
				    \              (  )
					 \             /--\
				       __         / \  \ 
				      UooU\.'@@@@@@`.\  )
				      \__/(@@@@@@@@@@) /
				           (@@@@@@@@)(( 
				           `YY~~~~YY' \\
				            ||    ||   >> 

				



#############################################################################
## ===================================================================== ##
## ================= Linux Advanced Memory Forensics  ================= ##
## ===================================================================== ##
#############################################################################






The global offset table (GOT) stores the runtime address of symbols that cannot be com-
puted at link time. These symbols are often stored within shared libraries that can be
loaded anywhere within the process’ address space.


The procedure linkage table (PLT) supports calling functions within shared libraries.
•    tasks: The process’ reference into the linked list of active processes.
•    mm: Stores memory management data. In particular, the DTB value (physical offset
of the process’ directory table base) can be found at mm->pgd. This value is used to
read from the address space of the process. It also holds references to important
portions of process address space such as the stack, heap, code, and data. For kernel
threads, this value is NULL.
•    parent: A reference to the process that spawned the current one. If a process’ par-
ent exits, the child is inherited by init.
•    children: Holds the list of processes spawned by the current one.
•    cred: Stores the credential information for the process. On some kernel versions,
it includes the user ID (UID) and group ID (GID), whereas on others the user and
group values are direct members of task_struct.
•    comm: The name of the process is a 16-byte character array that stores the name
of the executable or kernel thread. For a kernel thread, if its name ends with a
forward slash followed by a number, the number indicates the CPU where the
thread is executed.
•    start_time: The time the process was created.

•    mmap and mm_rb: These members store the individual process memory mappings
as a linked list and red-black tree, respectively.
•    pgd: The address of the process’ DTB. This is the member that populates the DTB
column of linux_pslist and enables access to the process’ address space.
•    owner: A back pointer to the task_struct that owns this mm_struct. On the kernels
in which this member is enabled and the SLAB allocator is in use, it can serve as
an alternative source of process listings because mm_struct structures are tracked
by the cache.
•    start_code and end_code: Pointers to the beginning and end of the process’ execut-
able code.
and end_data: Pointers to the beginning and end of the process’ data.
•
•    start_brk and brk: Pointers to the beginning and end of the process’ heap.
•    start_stack: A pointer to the beginning of the process’ stack. No pointer is kept
start_data
to the end of the stack because it will fluctuate on every function call.
•    arg_start and arg_end: Pointers to the beginning and end of the command-line
arguments.
•    env_start and env_end: Pointers to the beginning and end of the process’ environ-
ment variables.
•    vm_start and vm_end: The starting and ending virtual address of the region within
the process’ address space.
•    vm_next and vm_prev: Forward and back pointers inside the list of vm_area_struct
structures for a process.
•    vm_flags: Indicates whether the region was mapped readable, writable, and/or
executable.
•    vm_pgoff: The offset into the file that the region maps.
•    vm_file: A pointer to the file structure of the file the region maps (or NULL if it
is a memory-backed region).
•    mmap, is a linked list of vm_area_struct structures (one structure for each mapping).
•    mm_rb, which stores the same vm_area_struct structures, but in a red-black tree, so that
the kernel can quickly find mappings during page faults or when a new memory range
needs to be allocated.

•    f_path: Holds a reference to the information needed to reconstruct the name and
path of the file.
•    f_mode: Tells you whether the file was opened for read, write, and/or execute
access.
•    f_pos: The position where the next read or write will occur.
•    f_mapping: A reference to the address_space structure of the file that stores pointers
into the page cache. The page cache holds the file’s contents on disk.
•    f_op: This member identifies a set of file operation pointers for the file descriptor.
These operations (functions) are called when a process reads, writes, and seeks,
and so on. Later in the book, you will learn how rootkits hook these operations to
hide files on live machines.


•    linux_threads: Each process has one or more threads that execute distinct units of
code. This plugin identifies the threads by their thread ID and provides the base
functionality for the following plugins.
•    linux_info_regs: During a context switch, the current process state is saved to the
kernel stack. Volatility can recover this state to determine previous process activity.
•    linux_process_syscall: Context switches are often triggered when a thread makes
a system call. You can determine which system call the application was making
and the parameters sent to the handler.
•    linux_process_stack: Stack frames contain return addresses, local variables, and
function parameters. This plugin recovers stack frames and attempts to determine
the symbolic name of the function represented by each frame.


•    sk: The embedded sock structure
•    pinet6: Contains the source and destination address of IPv6 connections
•    inet_dport: The destination port
•    inet_sport: The source port
•    inet_saddr: The source IP address
•    inet_num: The protocol number (TCP, UDP, ICMP)


•    skc_daddr: The destination address of the connection
•    skc_rcv_saddr: The source address of the connection
•    skc_family: The address family. TCP and UDP connections are in the AF_INET
address family.
•    skc_state: The protocol state that Volatility uses to determine the state of TCP con-
nections. You determine the state by replicating the enumeration defined within
the include/net/tcp_states.h Linux source file.


•    Proto: The field is populated from inet_sock.sk.sk_protocol , as discussed
previously.
•    Source IP: The field is populated from skc_rcv_saddr of sock_common.
•    Source Port: Depending on the kernel version, this is populated from sport or
inet_sport of the inet_sock structure or skc_port of sock_common.
•    Destination IP: The field is populated from skc_daddr of sock_common.
•    Destination Port: Depending on the kernel version, this is populated from dport
or inet_dport of the inet_sock structure.
•    State: The field is populated from skc_state of sock_common.
•    Process/PID: Because the plugin works on a per-process basis, this information is
simply gathered from the process’ task_struct.


•    next: A reference to the next packet (sk_buff) of the connection
•    len: The length of the packet’s contents
•    head: A reference to the beginning of the packet’s protocol headers
•    data: A reference to the packet’s protocol data


•    dev_list : A pointer into the list of network devices in a particular network
				namespace. In older kernels without namespace support, a global list is stored
				within the dev_base global variable.
•    perm_addr: The MAC address of the interface.
•    flags: 	Holds status information on the device. If the device is in promiscuous mode,
				the flags member will have its IFF_PROMISC (0x100) bit set.






A process’ file descriptors are stored within kernel memory. 

Each process has a dedicated table with an array of indexes.

each index is the file descriptor number, and the corresponding value is a pointer 
to the file structure instance. 

A NULL pointer means that the file descriptor is not in use.





Program Headers:

############################################################################################
| The operating system uses program headers to map the file and its sections into memory    |
| at runtime. The e_phoff member of the ELF header tells you where the program header       |
| entries begin. At this offset is an Elf32_Phdr or Elf64_Phdr structure.                   |
############################################################################################
| •  p_type:        | Describes the type of the segment. Segments are portions of the       |
|                   | file that load into memory, and they contain one or more sections     |
|                   | of the file. The most common types are PT_LOAD, which describes a     |
|                   | segment that must load into memory; PT_DYNAMIC, which describes the   |
|                   | dynamic linking information; and PT_INTERP, which holds the full path |
|                   | to the program interpreter.                                           |
############################################################################################
| • p_vaddr &       | Serve the same purpose as sh_addr and sh_offset within                |
|   p_offset:       | the section headers and have the same semantics.                      |
############################################################################################
| •  p_filesz:      | Holds the size of the segment on disk.                                |
############################################################################################
| •  p_memsz:       | Holds the size of the segment in memory. p_memsz and p_filesz         |
|                   | differ in cases such as the mapping of the .bss, which occupies       |
|                   | space in memory, but not in the file. Such sections are of type       |
|                   | SHT_NOBITS.                                                           |
############################################################################################










#####################
Common ELF Sections:
#####################
#####################################################################################
||<•> Section Name     <|> Description                                            ||
#####################################################################################
|-->|| .text            | Contains the application’s executable code      |
############################################################################
|-->|| .data            | Contains the read/write data (variables)        |
############################################################################
|-->|| .rdata           | Contains read-only data                         |
############################################################################
|-->|| .bss             | Contains variables that are initialized to zero |
############################################################################
|-->|| .got             | Contains the global offset table                |
############################################################################




#############################################################################################
| The operating system uses program headers to map the file and its sections into memory    |
| at runtime. The e_phoff member of the ELF header tells you where the program header       |
| entries begin. At this offset is an Elf32_Phdr or Elf64_Phdr structure.                   |
#############################################################################################

Common Section Types:
#############################################################################################
|<•> Section Type      <|> Description                                                      |
#############################################################################################
| •  PROGBITS:          | Sections whose contents from disk will be loaded                  |
|                       | into memory upon execution.                                       |
#############################################################################################
| • NOBITS              | Sections that do not have data in the file, but have regions      |
|                       | allocated in memory. The .bss is typically a NOBITS section       |
|                       | because all its memory is initialized to zero upon execution      |
|                       | (and there is no need to store zeroes within the file).           |
#############################################################################################
| • STRTAB              | Holds a string table of the application.                          |
#############################################################################################
| • DYNAMIC             | Indicates that this is a dynamically linked application           |
|                       | and holds the dynamic information.                                |
#############################################################################################
| • HASH                | Contains the hash table of the application’s symbols.             |
#############################################################################################





.rodata Segments
A segment of memory containing program code traditionally had two parts:
actual code and read-only data, or .rodata segments.



A guard page is a single page of memory next to the memory allo-
cated by a program. The program cannot write to this memory. If the pro-
gram tries to write to the guard page, it probably will crash.

uses index nodes, or inodes, to map blocks of disk that contain
data.

The virtual node, or vnode, is an abstraction layer the kernel uses to
access all filesystems. Users never manipulate vnodes directly
Every tool that
reads or writes to disks does so through vnodes, which map the requests
to the filesystem.





"VmFlags" field deserves a separate description. This member represents the kernel
flags associated with the particular virtual memory area in two letter encoded
manner. The codes are the following:
    rd  - readable
    wr  - writeable
    ex  - executable
    sh  - shared
    mr  - may read
    mw  - may write
    me  - may execute
    ms  - may share
    gd  - stack segment growns down
    pf  - pure PFN range
    dw  - disabled write to the mapped file
    lo  - pages are locked in memory
    io  - memory mapped I/O area
    sr  - sequential read advise provided
    rr  - random read advise provided
    dc  - do not copy area on fork
    de  - do not expand area on remapping
    ac  - area is accountable
    nr  - swap space is not reserved for the area
    ht  - area uses huge tlb pages
    ar  - architecture specific flag
    dd  - do not include area into core dump
    sd  - soft-dirty flag
    mm  - mixed map area
    hg  - huge page advise flag
    nh  - no-huge page advise flag
    mg  - mergable advise flag


The /proc/PID/clear_refs is used to reset the PG_Referenced and ACCESSED/YOUNG
bits on both physical and virtual pages associated with a process, and the
soft-dirty bit on pte (see Documentation/vm/soft-dirty.txt for details).
To clear the bits for all the pages associated with the process
    > echo 1 > /proc/PID/clear_refs

To clear the bits for the anonymous pages associated with the process
    > echo 2 > /proc/PID/clear_refs

To clear the bits for the file mapped pages associated with the process
    > echo 3 > /proc/PID/clear_refs

To clear the soft-dirty bit
    > echo 4 > /proc/PID/clear_refs

To reset the peak resident set size ("high water mark") to the process's
current value:
    > echo 5 > /proc/PID/clear_refs



/proc/pid/numa_maps is an extension based on maps, showing the memory
locality and binding policy, as well as the memory usage (in pages) of
each mapping.

address   policy    mapping details

00400000 default file=/usr/local/bin/app mapped=1 active=0 N3=1 kernelpagesize_kB=4
00600000 default file=/usr/local/bin/app anon=1 dirty=1 N3=1 kernelpagesize_kB=4
3206000000 default file=/lib64/ld-2.12.so mapped=26 mapmax=6 N0=24 N3=2 kernelpagesize_kB=4
320621f000 default file=/lib64/ld-2.12.so anon=1 dirty=1 N3=1 kernelpagesize_kB=4
3206220000 default file=/lib64/ld-2.12.so anon=1 dirty=1 N3=1 kernelpagesize_kB=4
3206221000 default anon=1 dirty=1 N3=1 kernelpagesize_kB=4
3206800000 default file=/lib64/libc-2.12.so mapped=59 mapmax=21 active=55 N0=41 N3=18 kernelpagesize_kB=4
320698b000 default file=/lib64/libc-2.12.so
3206b8a000 default file=/lib64/libc-2.12.so anon=2 dirty=2 N3=2 kernelpagesize_kB=4
3206b8e000 default file=/lib64/libc-2.12.so anon=1 dirty=1 N3=1 kernelpagesize_kB=4
3206b8f000 default anon=3 dirty=3 active=1 N3=3 kernelpagesize_kB=4
7f4dc10a2000 default anon=3 dirty=3 N3=3 kernelpagesize_kB=4
7f4dc10b4000 default anon=2 dirty=2 active=1 N3=2 kernelpagesize_kB=4
7f4dc1200000 default file=/anon_hugepage\040(deleted) huge anon=1 dirty=1 N3=1 kernelpagesize_kB=2048
7fff335f0000 default stack anon=3 dirty=3 N3=3 kernelpagesize_kB=4
7fff3369d000 default mapped=1 mapmax=35 active=0 N3=1 kernelpagesize_kB=4

Where:
"address" is the starting address for the mapping;
"policy" reports the NUMA memory policy set for the mapping (see vm/numa_memory_policy.txt);
"mapping details" summarizes mapping data such as mapping type, page usage counters,
node locality page counters (N0 == node0, N1 == node1, ...) and the kernel page
size, in KB, that is backing the mapping up.



/proc/meminfo

    MemTotal: Total usable ram (i.e. physical ram minus a few reserved
              bits and the kernel binary code)
     MemFree: The sum of LowFree+HighFree
MemAvailable: An estimate of how much memory is available for starting new
              applications, without swapping. Calculated from MemFree,
              SReclaimable, the size of the file LRU lists, and the low
              watermarks in each zone.
              The estimate takes into account that the system needs some
              page cache to function well, and that not all reclaimable
              slab will be reclaimable, due to items being in use. The
              impact of those factors will vary from system to system.
     Buffers: Relatively temporary storage for raw disk blocks
              shouldn't get tremendously large (20MB or so)
      Cached: in-memory cache for files read from the disk (the
              pagecache).  Doesn't include SwapCached
  SwapCached: Memory that once was swapped out, is swapped back in but
              still also is in the swapfile (if memory is needed it
              doesn't need to be swapped out AGAIN because it is already
              in the swapfile. This saves I/O)
      Active: Memory that has been used more recently and usually not
              reclaimed unless absolutely necessary.
    Inactive: Memory which has been less recently used.  It is more
              eligible to be reclaimed for other purposes
   HighTotal:
    HighFree: Highmem is all memory above ~860MB of physical memory
              Highmem areas are for use by userspace programs, or
              for the pagecache.  The kernel must use tricks to access
              this memory, making it slower to access than lowmem.
    LowTotal:
     LowFree: Lowmem is memory which can be used for everything that
              highmem can be used for, but it is also available for the
              kernel's use for its own data structures.  Among many
              other things, it is where everything from the Slab is
              allocated.  Bad things happen when you're out of lowmem.
   SwapTotal: total amount of swap space available
    SwapFree: Memory which has been evicted from RAM, and is temporarily
              on the disk
       Dirty: Memory which is waiting to get written back to the disk
   Writeback: Memory which is actively being written back to the disk
   AnonPages: Non-file backed pages mapped into userspace page tables
AnonHugePages: Non-file backed huge pages mapped into userspace page tables
      Mapped: files which have been mmaped, such as libraries
       Shmem: Total memory used by shared memory (shmem) and tmpfs
        Slab: in-kernel data structures cache
SReclaimable: Part of Slab, that might be reclaimed, such as caches
  SUnreclaim: Part of Slab, that cannot be reclaimed on memory pressure
  PageTables: amount of memory dedicated to the lowest level of page
              tables.
NFS_Unstable: NFS pages sent to the server, but not yet committed to stable
	      storage
      Bounce: Memory used for block device "bounce buffers"
WritebackTmp: Memory used by FUSE for temporary writeback buffers
 CommitLimit: Based on the overcommit ratio ('vm.overcommit_ratio'),
              this is the total amount of  memory currently available to
              be allocated on the system. This limit is only adhered to
              if strict overcommit accounting is enabled (mode 2 in
              'vm.overcommit_memory').
              The CommitLimit is calculated with the following formula:
              CommitLimit = ([total RAM pages] - [total huge TLB pages]) *
                             overcommit_ratio / 100 + [total swap pages]
              For example, on a system with 1G of physical RAM and 7G
              of swap with a `vm.overcommit_ratio` of 30 it would
              yield a CommitLimit of 7.3G.
              For more details, see the memory overcommit documentation
              in vm/overcommit-accounting.
Committed_AS: The amount of memory presently allocated on the system.
              The committed memory is a sum of all of the memory which
              has been allocated by processes, even if it has not been
              "used" by them as of yet. A process which malloc()'s 1G
              of memory, but only touches 300M of it will show up as
	      using 1G. This 1G is memory which has been "committed" to
              by the VM and can be used at any time by the allocating
              application. With strict overcommit enabled on the system
              (mode 2 in 'vm.overcommit_memory'),allocations which would
              exceed the CommitLimit (detailed above) will not be permitted.
              This is useful if one needs to guarantee that processes will
              not fail due to lack of memory once that memory has been
              successfully allocated.
VmallocTotal: total size of vmalloc memory area
 VmallocUsed: amount of vmalloc area which is used
VmallocChunk: largest contiguous block of vmalloc area which is free


vmallocinfo:

Provides information about vmalloced/vmaped areas. One line per area,
containing the virtual address range of the area

 pages=nr    number of pages
 phys=addr   if a physical address was specified
 ioremap     I/O mapping (ioremap() and friends)
 vmalloc     vmalloc() area
 vmap        vmap()ed pages
 user        VM_USERMAP area
 vpages      buffer for pages pointers was vmalloced (huge area)
 N<node>=nr  (Only on NUMA kernels)
             Number of pages allocated on memory node <node>




 ||______________________________
 ||	user ABI   vDSO name
 ||─────────────────────────────
 || arm  ||		linux-vdso.so.1
 || ia64 ||		linux-gate.so.1
 || mips  \\	linux-vdso.so.1
 || ppc/32||	linux-vdso32.so.1
 || ppc/64||	linux-vdso64.so.1
 || s390  ||	linux-vdso32.so.1
 || s390x ||	linux-vdso64.so.1
 ||   sh  ||	linux-gate.so.1
 ||  i386 ||	linux-gate.so.1
 || x86_64||	linux-vdso.so.1
 ||x86/x32||    linux-vdso.so.1
 ||aarch64||    linux-vdso.so.1


mount -t debugfs debugfs /sys/kernel/debug/
 # echo 1 > /sys/kernel/debug/pstore/record_ftrace

strings -f /usr/sbin/*


tmpfs puts everything into the kernel internal caches and grows and
shrinks to accommodate the files it contains and is able to swap
unneeded pages out to swap space.

Since tmpfs lives completely in the page cache and on swap, all tmpfs
pages will be shown as "Shmem" in /proc/meminfo and "Shared" in
free(1). Notice that these counters also include shared memory
(shmem, see ipcs(1)). The most reliable way to get the count is
using df(1) and du(1).


/dev/hwrng is char device major 10, minor 183.

	CLASS DEVICE.  There is a /sys/class/misc/hw_random node with
	two unique attributes, "rng_available" and "rng_current".  The
	"rng_available" attribute lists the hardware-specific drivers
	available, while "rng_current" lists the one which is currently
	connected to /dev/hwrng.  If your system has more than one
	RNG available, you may change the one used by writing a name from
	the list in "rng_available" into "rng_current".


Hardware driver for Intel/AMD/VIA Random Number Generators (RNG)
Intel RNG hardware, from the firmware hub datasheet:

	The Firmware Hub integrates a Random Number Generator (RNG)
	using thermal noise generated from inherently random quantum
	mechanical properties of silicon.





Exceptions as described in this article are generated by the CPU when an 'error' occurs. Some exceptions are not really errors in most cases, such as page faults. Exceptions are a type of interrupt.

Exceptions are classified as:

Faults: These can be corrected and the program may continue as if nothing happened.
Traps: Traps are reported immediately after the execution of the trapping instruction.
Aborts: Some severe unrecoverable error.	




  Assigned boot loader ids (hexadecimal):

	0  LILO			(0x00 reserved for pre-2.00 bootloader)
	1  Loadlin
	2  bootsect-loader	(0x20, all other values reserved)
	3  Syslinux
	4  Etherboot/gPXE/iPXE
	5  ELILO
	7  GRUB
	8  U-Boot
	9  Xen
	A  Gujin
	B  Qemu
	C  Arcturus Networks uCbootloader
	D  kexec-tools
	E  Extended		(see ext_loader_type)
	F  Special		(0xFF = undefined)
       10  Reserved
       11  Minimal Linux Bootloader <http://sebastian-plotz.blogspot.de>
       12  OVMF UEFI virtualization stack




**** MEMORY LAYOUT

The traditional memory map for the kernel loader, used for Image or
zImage kernels, typically looks like:

	|			 |
0A0000	+------------------------+
	|  Reserved for BIOS	 |	Do not use.  Reserved for BIOS EBDA.
09A000	+------------------------+
	|  Command line		 |
	|  Stack/heap		 |	For use by the kernel real-mode code.
098000	+------------------------+	
	|  Kernel setup		 |	The kernel real-mode code.
090200	+------------------------+
	|  Kernel boot sector	 |	The kernel legacy boot sector.
090000	+------------------------+
	|  Protected-mode kernel |	The bulk of the kernel image.
010000	+------------------------+
	|  Boot loader		 |	<- Boot sector entry point 0000:7C00
001000	+------------------------+
	|  Reserved for MBR/BIOS |
000800	+------------------------+
	|  Typically used by MBR |
000600	+------------------------+ 
	|  BIOS use only	 |
000000	+------------------------+






For a modern bzImage kernel with boot protocol version >= 2.02, a
memory layout like the following is suggested:

	~                        ~
        |  Protected-mode kernel |
100000  +------------------------+
	|  I/O memory hole	 |
0A0000	+------------------------+
	|  Reserved for BIOS	 |	Leave as much as possible unused
	~                        ~
	|  Command line		 |	(Can also be below the X+10000 mark)
X+10000	+------------------------+
	|  Stack/heap		 |	For use by the kernel real-mode code.
X+08000	+------------------------+	
	|  Kernel setup		 |	The kernel real-mode code.
	|  Kernel boot sector	 |	The kernel legacy boot sector.
X       +------------------------+
	|  Boot loader		 |	<- Boot sector entry point 0000:7C00
001000	+------------------------+
	|  Reserved for MBR/BIOS |
000800	+------------------------+
	|  Typically used by MBR |
000600	+------------------------+ 
	|  BIOS use only	 |
000000	+------------------------+

... where the address X is as low as the design of the boot loader
permits.






IO-APIC',
which is an enhanced interrupt controller. It enables us to route
hardware interrupts to multiple CPUs, or to CPU groups. Without an
IO-APIC, interrupts from hardware will be delivered only to the
CPU which boots the operating system (usually CPU#0).



PCI slots are 'daisy chained' before they are
connected to the PCI chipset IRQ routing facility (the incoming PIRQ1-4
lines):

               ,-.        ,-.        ,-.        ,-.        ,-.
     PIRQ4 ----| |-.    ,-| |-.    ,-| |-.    ,-| |--------| |
               |S|  \  /  |S|  \  /  |S|  \  /  |S|        |S|
     PIRQ3 ----|l|-. `/---|l|-. `/---|l|-. `/---|l|--------|l|
               |o|  \/    |o|  \/    |o|  \/    |o|        |o|
     PIRQ2 ----|t|-./`----|t|-./`----|t|-./`----|t|--------|t|
               |1| /\     |2| /\     |3| /\     |4|        |5|
     PIRQ1 ----| |-  `----| |-  `----| |-  `----| |--------| |
               `-'        `-'        `-'        `-'        `-'

Every PCI card emits a PCI IRQ, which can be INTA, INTB, INTC or INTD:

                               ,-.
                         INTD--| |
                               |S|
                         INTC--|l|
                               |o|
                         INTB--|t|
                               |x|
                         INTA--| |
                               `-'





the following script tries to figure out such a default pirq= line from
your PCI configuration:

	echo -n pirq=; echo `scanpci | grep T_L | cut -c56-` | sed 's/ /,/g'






execsnoop  traces process execution
This traces exec() from the fork()->exec() sequence




















eBPF calling convention is defined as:

    * R0	- return value from in-kernel function, and exit value for eBPF program
    * R1 - R5	- arguments from eBPF program to in-kernel function
    * R6 - R9	- callee saved registers that in-kernel function will preserve
    * R10	- read-only frame pointer to access stack

  Thus, all eBPF registers map one to one to HW registers on x86_64, aarch64,
  etc, and eBPF calling convention maps directly to ABIs used by the kernel on
  64-bit architectures.

  On 32-bit architectures JIT may map programs that use only 32-bit arithmetic
  and may let more complex programs to be interpreted.

  R0 - R5 are scratch registers and eBPF program needs spill/fill them if
  necessary across calls. Note that there is only one eBPF program (== one
  eBPF main routine) and it cannot call other eBPF functions, it can only
  call predefined in-kernel functions, though.


eBPF opcode encoding
--------------------

eBPF is reusing most of the opcode encoding from classic to simplify conversion
of classic BPF to eBPF. For arithmetic and jump instructions the 8-bit 'code'
field is divided into three parts:

  +----------------+--------+--------------------+
  |   4 bits       |  1 bit |   3 bits           |
  | operation code | source | instruction class  |
  +----------------+--------+--------------------+
  (MSB)                                      (LSB)

Three LSB bits store instruction class which is one of:

  Classic BPF classes:    eBPF classes:

  BPF_LD    0x00          BPF_LD    0x00
  BPF_LDX   0x01          BPF_LDX   0x01
  BPF_ST    0x02          BPF_ST    0x02
  BPF_STX   0x03          BPF_STX   0x03
  BPF_ALU   0x04          BPF_ALU   0x04
  BPF_JMP   0x05          BPF_JMP   0x05
  BPF_RET   0x06          [ class 6 unused, for future if needed ]
  BPF_MISC  0x07          BPF_ALU64 0x07



For load and store instructions the 8-bit 'code' field is divided as:

  +--------+--------+-------------------+
  | 3 bits | 2 bits |   3 bits          |
  |  mode  |  size  | instruction class |
  +--------+--------+-------------------+
  (MSB)                             (LSB)

Size modifier is one of ...

  BPF_W   0x00    /* word */
  BPF_H   0x08    /* half word */
  BPF_B   0x10    /* byte */
  BPF_DW  0x18    /* eBPF only, double word */

... which encodes size of load/store operation:

 B  - 1 byte
 H  - 2 byte
 W  - 4 byte
 DW - 8 byte (eBPF only)

Mode modifier is one of:

  BPF_IMM  0x00  /* used for 32-bit mov in classic BPF and 64-bit in eBPF */
  BPF_ABS  0x20
  BPF_IND  0x40
  BPF_MEM  0x60
  BPF_LEN  0x80  /* classic BPF only, reserved in eBPF */
  BPF_MSH  0xa0  /* classic BPF only, reserved in eBPF */
  BPF_XADD 0xc0  /* eBPF only, exclusive add */

eBPF has two non-generic instructions: (BPF_ABS | <size> | BPF_LD) and
(BPF_IND | <size> | BPF_LD) which are used to access packet data.



eBPF maps
---------
'maps' is a generic storage of different types for sharing data between kernel
and userspace.

The maps are accessed from user space via BPF syscall, which has commands:
- create a map with given type and attributes
  map_fd = bpf(BPF_MAP_CREATE, union bpf_attr *attr, u32 size)
  using attr->map_type, attr->key_size, attr->value_size, attr->max_entries
  returns process-local file descriptor or negative error

- lookup key in a given map
  err = bpf(BPF_MAP_LOOKUP_ELEM, union bpf_attr *attr, u32 size)
  using attr->map_fd, attr->key, attr->value
  returns zero and stores found elem into value or negative error

- create or update key/value pair in a given map
  err = bpf(BPF_MAP_UPDATE_ELEM, union bpf_attr *attr, u32 size)
  using attr->map_fd, attr->key, attr->value
  returns zero or negative error

- find and delete element by key in a given map
  err = bpf(BPF_MAP_DELETE_ELEM, union bpf_attr *attr, u32 size)
  using attr->map_fd, attr->key

- to delete map: close(fd)
  Exiting process will delete maps automatically

userspace programs use this syscall to create/access maps that eBPF programs
are concurrently updating.

maps can have different types: hash, array, bloom filter, radix-tree, etc.

The map is defined by:
  . type
  . max number of elements
  . key size in bytes
  . value size in bytes
{¥}
{Æ
Æ
Æ
æ
{±
{€}
<(&) 
<[%] ======================================================================================================== [+]>
[+]========================================================================================================[+]


JIT compiler
------------

The Linux kernel has a built-in BPF JIT compiler for x86_64, SPARC, PowerPC,
ARM, ARM64, MIPS and s390 and can be enabled through CONFIG_BPF_JIT. The JIT
compiler is transparently invoked for each attached filter from user space
or for internal kernel users if it has been previously enabled by root:

  echo 1 > /proc/sys/net/core/bpf_jit_enable

For JIT developers, doing audits etc, each compile run can output the generated
opcode image into the kernel log via:

  echo 2 > /proc/sys/net/core/bpf_jit_enable

Example output from dmesg:

[ 3389.935842] flen=6 proglen=70 pass=3 image=ffffffffa0069c8f
[ 3389.935847] JIT code: 00000000: 55 48 89 e5 48 83 ec 60 48 89 5d f8 44 8b 4f 68
[ 3389.935849] JIT code: 00000010: 44 2b 4f 6c 4c 8b 87 d8 00 00 00 be 0c 00 00 00
[ 3389.935850] JIT code: 00000020: e8 1d 94 ff e0 3d 00 08 00 00 75 16 be 17 00 00
[ 3389.935851] JIT code: 00000030: 00 e8 28 94 ff e0 83 f8 01 75 07 b8 ff ff 00 00
[ 3389.935852] JIT code: 00000040: eb 02 31 c0 c9 c3

In the kernel source tree under tools/net/, there's bpf_jit_disasm for
generating disassembly out of the kernel log's hexdump:

# ./bpf_jit_disasm
70 bytes emitted from JIT compiler (pass:3, flen:6)
ffffffffa0069c8f + <x>:
   0:	push   %rbp
   1:	mov    %rsp,%rbp
   4:	sub    $0x60,%rsp
   8:	mov    %rbx,-0x8(%rbp)
   c:	mov    0x68(%rdi),%r9d
  10:	sub    0x6c(%rdi),%r9d
  14:	mov    0xd8(%rdi),%r8
  1b:	mov    $0xc,%esi
  20:	callq  0xffffffffe0ff9442
  25:	cmp    $0x800,%eax
  2a:	jne    0x0000000000000042
  2c:	mov    $0x17,%esi
  31:	callq  0xffffffffe0ff945e
  36:	cmp    $0x1,%eax
  39:	jne    0x0000000000000042
  3b:	mov    $0xffff,%eax
  40:	jmp    0x0000000000000044
  42:	xor    %eax,%eax
  44:	leaveq
  45:	retq

Issuing option `-o` will "annotate" opcodes to resulting assembler
instructions, which can be very useful for JIT developers:

# ./bpf_jit_disasm -o
70 bytes emitted from JIT compiler (pass:3, flen:6)
ffffffffa0069c8f + <x>:
   0:	push   %rbp
	55
   1:	mov    %rsp,%rbp
	48 89 e5
   4:	sub    $0x60,%rsp
	48 83 ec 60
   8:	mov    %rbx,-0x8(%rbp)
	48 89 5d f8
   c:	mov    0x68(%rdi),%r9d
	44 8b 4f 68
  10:	sub    0x6c(%rdi),%r9d
	44 2b 4f 6c
  14:	mov    0xd8(%rdi),%r8
	4c 8b 87 d8 00 00 00
  1b:	mov    $0xc,%esi
	be 0c 00 00 00
  20:	callq  0xffffffffe0ff9442
	e8 1d 94 ff e0
  25:	cmp    $0x800,%eax
	3d 00 08 00 00
  2a:	jne    0x0000000000000042
	75 16
  2c:	mov    $0x17,%esi
	be 17 00 00 00
  31:	callq  0xffffffffe0ff945e
	e8 28 94 ff e0
  36:	cmp    $0x1,%eax
	83 f8 01
  39:	jne    0x0000000000000042
	75 07
  3b:	mov    $0xffff,%eax
	b8 ff ff 00 00
  40:	jmp    0x0000000000000044
	eb 02
  42:	xor    %eax,%eax
	31 c0
  44:	leaveq
	c9
  45:	retq
	c3





       All of these system calls return a stat structure, which contains the following fields:

           struct stat {
               dev_t     st_dev;     /* ID of device containing file */
               ino_t     st_ino;     /* inode number */
               mode_t    st_mode;    /* protection */
               nlink_t   st_nlink;   /* number of hard links */
               uid_t     st_uid;     /* user ID of owner */
               gid_t     st_gid;     /* group ID of owner */
               dev_t     st_rdev;    /* device ID (if special file) */
               off_t     st_size;    /* total size, in bytes */
               blksize_t st_blksize; /* blocksize for file system I/O */
               blkcnt_t  st_blocks;  /* number of 512B blocks allocated */
               time_t    st_atime;   /* time of last access */
               time_t    st_mtime;   /* time of last modification */
               time_t    st_ctime;   /* time of last status change */
           };



       The following flags are defined for the st_mode field:

           S_IFMT     0170000   bit mask for the file type bit fields
           S_IFSOCK   0140000   socket
           S_IFLNK    0120000   symbolic link
           S_IFREG    0100000   regular file
           S_IFBLK    0060000   block device
           S_IFDIR    0040000   directory
           S_IFCHR    0020000   character device
           S_IFIFO    0010000   FIFO
           S_ISUID    0004000   set UID bit
           S_ISGID    0002000   set-group-ID bit (see below)
           S_ISVTX    0001000   sticky bit (see below)
           S_IRWXU    00700     mask for file owner permissions
           S_IRUSR    00400     owner has read permission
           S_IWUSR    00200     owner has write permission
           S_IXUSR    00100     owner has execute permission
           S_IRWXG    00070     mask for group permissions
           S_IRGRP    00040     group has read permission
           S_IWGRP    00020     group has write permission
           S_IXGRP    00010     group has execute permission
           S_IRWXO    00007     mask for permissions for others (not in group)
           S_IROTH    00004     others have read permission
           S_IWOTH    00002     others have write permission
           S_IXOTH    00001     others have execute permission



EACCES Search  permission is denied for one of the directories in the path prefix of path.
              (See also path_resolution(7).)

       EBADF  fd is bad.

       EFAULT Bad address.

       ELOOP  Too many symbolic links encountered while traversing the path.

       ENAMETOOLONG
              path is too long.

       ENOENT A component of path does not exist, or path is an empty string.

       ENOMEM Out of memory (i.e., kernel memory).

       ENOTDIR
              A component of the path prefix of path is not a directory.

       EOVERFLOW
              path or fd refers to a file whose size, inode number, or number of blocks cannot be
              represented  in, respectively, the types off_t, ino_t, or blkcnt_t.  This error can
              occur when, for example, an application  compiled  on  a  32-bit  platform  without
              -D_FILE_OFFSET_BITS=64 calls stat() on a file whose size exceeds (1<<31)-1 bytes.







   Other Systems
       Values that have been (or are) in use on various systems:

       hex    name       ls   octal    description
       f000   S_IFMT          170000   mask for file type

       0000                   000000   SCO out-of-service inode; BSD
                                       unknown type; SVID-v2 and XPG2 have
                                       both 0 and 0100000 for ordinary file
       1000   S_IFIFO    p|   010000   FIFO (named pipe)
       2000   S_IFCHR    c    020000   character special (V7)
       3000   S_IFMPC         030000   multiplexed character special (V7)
       4000   S_IFDIR    d/   040000   directory (V7)
       5000   S_IFNAM         050000   XENIX named special file with two
                                       subtypes, distinguished by st_rdev
                                       values 1, 2
       0001   S_INSEM    s    000001   XENIX semaphore subtype of IFNAM
       0002   S_INSHD    m    000002   XENIX shared data subtype of IFNAM
       6000   S_IFBLK    b    060000   block special (V7)
       7000   S_IFMPB         070000   multiplexed block special (V7)
       8000   S_IFREG    -    100000   regular (V7)
       9000   S_IFCMP         110000   VxFS compressed
       9000   S_IFNWK    n    110000   network special (HP-UX)
       a000   S_IFLNK    l@   120000   symbolic link (BSD)
       b000   S_IFSHAD        130000   Solaris shadow inode for ACL (not
                                       seen by user space)
       c000   S_IFSOCK   s=   140000   socket (BSD; also "S_IFSOC" on VxFS)
       d000   S_IFDOOR   D>   150000   Solaris door
       e000   S_IFWHT    w%   160000   BSD whiteout (not used for inode)
       0200   S_ISVTX         001000   sticky bit: save swapped text even
                                       after use (V7)
                                       reserved (SVID-v2)
                                       On nondirectories: don't cache this
                                       file (SunOS)
                                       On directories: restricted deletion
                                       flag (SVID-v4.2)
       0400   S_ISGID         002000   set-group-ID on execution (V7)
                                       for directories: use BSD semantics
                                       for propagation of GID
       0400   S_ENFMT         002000   System V file locking enforcement
                                       (shared with S_ISGID)
       0800   S_ISUID         004000   set-user-ID on execution (V7)
       0800   S_CDF           004000   directory is a context dependent
                                       file (HP-UX)

       A sticky command appeared in Version 32V AT&T UNIX.



/proc/PID/maps file containing the currently mapped memory regions and
their access permissions.

The format is:

address           perms offset  dev   inode      pathname

08048000-08049000 r-xp 00000000 03:00 8312       /opt/test
08049000-0804a000 rw-p 00001000 03:00 8312       /opt/test
0804a000-0806b000 rw-p 00000000 00:00 0          [heap]
a7cb1000-a7cb2000 ---p 00000000 00:00 0
a7cb2000-a7eb2000 rw-p 00000000 00:00 0
a7eb2000-a7eb3000 ---p 00000000 00:00 0
a7eb3000-a7ed5000 rw-p 00000000 00:00 0
a7ed5000-a8008000 r-xp 00000000 03:00 4222       /lib/libc.so.6
a8008000-a800a000 r--p 00133000 03:00 4222       /lib/libc.so.6
a800a000-a800b000 rw-p 00135000 03:00 4222       /lib/libc.so.6
a800b000-a800e000 rw-p 00000000 00:00 0
a800e000-a8022000 r-xp 00000000 03:00 14462      /lib/libpthread.so.0
a8022000-a8023000 r--p 00013000 03:00 14462      /lib/libpthread.so.0
a8023000-a8024000 rw-p 00014000 03:00 14462      /lib/libpthread.so.0
a8024000-a8027000 rw-p 00000000 00:00 0
a8027000-a8043000 r-xp 00000000 03:00 8317       /lib/ld-linux.so.2
a8043000-a8044000 r--p 0001b000 03:00 8317       /lib/ld-linux.so.2
a8044000-a8045000 rw-p 0001c000 03:00 8317       /lib/ld-linux.so.2
aff35000-aff4a000 rw-p 00000000 00:00 0          [stack]
ffffe000-fffff000 r-xp 00000000 00:00 0          [vdso]



 [heap]                   = the heap of the program
 [stack]                  = the stack of the main process
 [vdso]                   = the "virtual dynamic shared object",
                            the kernel system call handler






SMRAM layout for 2 processors:

+ Processor 0 ---------------------------+ Processor 1 ---------------------------+
|                                        |                                        |
|                                        + SMBASE + 0xFFFF + 0x300 ---------------+
|                                        |///////// SMM Save Sate area ///////////|
|                                        + SMBASE + 0xFF00 + 0x300 ---------------+
+ SMBASE + 0xFFFF -----------------------+                                        |
|///////// SMM Save Sate area ///////////|                                        |
+ SMBASE + 0xFF00 -----------------------+                                        |
|                                        |                                        |
|                                        |                                        |
|                                        |        SMI Handler entry point         |
|                                        + SMBASE + 0x8000 + 0x300 ---------------+
|                                        |                                        |
|        SMI Handler entry point         |                                        |
+ SMBASE + 0x8000 -----------------------+                                        |
|                                        |                                        |
|                                        |                                        |
|                                        |                                        |
|                                        |               SMRAM start              |
+                                        + SMBASE + 0x300 ------------------------+
|                                        |                                        |
|               SMRAM start              |                                        |
+ SMBASE --------------------------------+----------------------------------------+


Instead of 0x300, BIOS may choose any offset to use to increment SMBASE
for all processors. There is an easy way to determine it. SMM Save State
Map should contain SMM Revision Identifier Field at 0x7EFC offset of
SMBASE+0x8000 which should have the same value for each processor that
entered SMM. For example, SMM Revision ID may be 0x30100. SMI handler can
search for the same value of SMM Revision ID in SMRAM. An address of the
next SMM Revision ID field minus address of the current SMM Revision ID
field gives the offset that should be added to SMBASE to calculate SMBASE
of the next processor.










I/O Trap feature allows SMI trapping on access to any I/O port using IN or
OUT instructions and executing specific SMI handler. Reasoning behind this
feature is to power on some device being accessed via some I/O port if
it's powered off. Apparently, I/O Trap is also used for other features
like emulating 60h/64h keyboard ports in SMI handler for the USB keyboard.

So I/O Trap method is similar to debug trap mentioned above, it traps on
access to I/O ports, but instead of invoking debug trap handler in OS
kernel, it generates an SMI interrupt and CPU enters SMM and executes I/O
Trap SMI handler.

When processor traps I/O instruction and enters SMM mode, it saves all
information about trapped I/O instruction in SMM Save State Map in the
field "I/O State Field" at 0x8000 + 0x7FA4 offset from SMBASE. Below we
provide contents of this field that our keylogger will later need to check:


I/O State Field (SMBASE + 0x8000 + 0x7FA4):
+----------+----------+----------+------------+--------+
| 31    16 | 15     8 | 7      4 | 3        1 | 0      |
+----------+----------+----------+------------+--------+
| I/O Port | Reserved | I/O Type | I/O Length | IO_SMI |
+----------+----------+----------+------------+--------+

- If set, IO_SMI (bit 0) indicates that this is a I/O Trap SMI.
- I/O Length (bits [1:3]) indicates if I/O access was byte (001b), word
  (010b) or dword (100b).
- I/O Type (bits [4:7]) indicate type of I/O instruction, "IN imm"
  (1001b), "IN DX" (0001b), etc.
- I/O Port (bits [16:31]) contain I/O port number that has been accessed.








ACPI is an interface between OS and BIOS.
When booting, BIOS will put several tables that contain information about platform and system definitions in the memory. 
OS reads those tables and knows what to do when an event happen.

DSDT is Differentiated System Description Table which contains the Differentiated Definition Block that supplies 
the implementation and configuration information about the base system.

SSDT is Secondary System Description Table. SSDTs are a continuation of the DSDT.



The AML code allows firmware vendors to interface with the underlying hardware (e.g. Southbridge, Embedded Controller,
I/O ports, etc)




LNXSYSTM means \_SB (System Base), LNXPWRBN is the power butten device, 
LNXCPU is the CPU and LNXTHERM is the thermal zone defined in DSDT.








tree /sys/devices/LNXSYSTM\:00/


cat /proc/interrupts | grep acpi
cat /sys/firmware/acpi/interrupts/gpe1B
cat /proc/acpi/embedded_controller/EC0/info
diff --git a/drivers/acpi/ec.c b/drivers/acpi/ec.c




cat /boot/config-4.7.0-parrot-amd64 | grep ACPI
cat /boot/config-4.7.0-parrot-amd64 | grep CONFIG_ACPI_CUSTOM_DSDT
cat /boot/config-4.7.0-parrot-amd64 | grep CONFIG_ACPI_DEBUG=

Linux supports a method of overriding the BIOS DSDT:

CONFIG_ACPI_CUSTOM_DSDT builds the image into the kernel.

When to use this method is described in detail on the
Linux/ACPI home page:
http://www.lesswatts.org/projects/acpi/overridingDSDT.php



acpidump > acpidata.dat
acpixtract -sSSDT acpidata.dat
acpixtract -sDSDT acpidata.dat
iasl -d DSDT.dat SSDT*.dat


look at the individual fields one needs
to extract the table and disassemble it. One can use:
sudo acpidump > acpidata.dat
acpixtract -sFACP acpidata.dat
iasl -d FACP.dat

fwts acpidump -


ACPI AML byte code can trigger System Management Interrupts by writing a magic
number to a magic port. This then triggers a non-maskable interrupt out of kernel context straight into the BIOS context.

BIOS can then do anything it wants in a SMI, and return back to the kernel context at some arbitrary point in the future. The
BIOS is at liberty to twiddle with any I/O ports or memory region and it also messes up the CPU cache during the SMI. So
expect weird issues when SMIs are being used.
Incidentally, the FACP contains information concerning the SMI - the word at 0x2e contains the SCI interrupt number (which
should show up as the acpi interrupt in /proc/interrupts) and the 4 byte integer at offset 0x30 in the FACP contains the SMI
command port address. One writes a magic value to this command port to generate an SMI.



EC command port location can be found by using:


cat /proc/acpi/embedded_controller/*/info



# Extract the machine's ACPI tables:
cd /tmp
acpidump >acpidump
acpixtract -a acpidump
# Disassemble, modify and recompile them:
iasl -d *.dat
# For example add this statement into a _PRT (PCI Routing Table) function
# of the DSDT:
Store("HELLO WORLD", debug)
iasl -sa dsdt.dsl
# Add the raw ACPI tables to an uncompressed cpio archive.
# They must be put into a /kernel/firmware/acpi directory inside the
# cpio archive.
# The uncompressed cpio archive must be the first.
# Other, typically compressed cpio archives, must be
# concatenated on top of the uncompressed one.
mkdir -p kernel/firmware/acpi
cp dsdt.aml kernel/firmware/acpi
# A maximum of: #define ACPI_OVERRIDE_TABLES 10
# tables are  currently allowed (see osl.c):
iasl -sa facp.dsl
iasl -sa ssdt1.dsl
cp facp.aml kernel/firmware/acpi
cp ssdt1.aml kernel/firmware/acpi
# Create the uncompressed cpio archive and concatenate the original initrd
# on top:
find kernel | cpio -H newc --create > /boot/instrumented_initrd
cat /boot/initrd >>/boot/instrumented_initrd
# reboot with increased acpi debug level, e.g. boot params:
acpi.debug_level=0x2 acpi.debug_layer=0xFFFFFFFF
# and check your syslog:
[    1.268089] ACPI: PCI Interrupt Routing Table [\_SB_.PCI0._PRT]
[    1.272091] [ACPI Debug]  String [0x0B] "HELLO WORLD"

iasl is able to disassemble and recompile quite a lot different,
also static ACPI tables.



cat /sys/firmware/acpi/tables/
















###########################################################################################################
## ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ##
## ==================================== Buffer Overflows Tutorial ====================================== ##
## ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ##
###########################################################################################################


Buffer Overflows Tutorial:


CPU registers are used like variables by storing data for quick access.
On 32-bit machines, each register is 4 bytes or 32-bits.

EAX accumulator - used for performing calculations, and used to store return values from function calls. Basic operations such as add, subtract, compare use this general-purpose register
EBX base index - has no general purpose and can be used to store data.
ECX counter - used to indicate how many bytes to copy, loop operations
EDX data - this is an extension of the EAX register.  It allows for more complex calculations (multiply, divide) by allowing extra data to be stored to facilitate those calculations.  I/O pointer.
EDI destination index - points to a location where results of data operation are stored
ESI source index - holds location of input data
EBP stack data pointer
ESP stack pointer - will usually point to the current location in the stack
EIP extended instruction pointer - tells the CPU where to find the next instruction to execute
------------------------------------------------------------------------------------------------------

Big Endian Unix - read from left to right
Little Endian x86 - read from right to left
------------------------------------------------------------------------------------------------------

Program memory is LIFO (last in, first out)

0xBFFFFFFF (higher memory)
Stack - temporary space, used for storing function arguments and local variables

Unused memory

Heap - dynamic memory
.bss - uninitialized data
.data - initialized data
.text - program code
0x8048000 (lower memory)

JMP - non-conditional jump
JNE - conditional jump
POP - remove the topmost value from the stack
PUSH - push a value onto the stack
------------------------------------------------------------------------------------------------------

# Immunity Debugger

top left - assembly instructions
top right - CPU registers
bottom left - memory dump
bottom right - the state of the current stack
------------------------------------------------------------------------------------------------------

# Things we need to know:

Which 4 bytes overwrite EIP?
Do we have enough space in buffer for shellcode?
Is this shellcode easily  accessible in memory?
Does the application filter out any characters?
Will we encounter overflow protection mechanisms?
------------------------------------------------------------------------------------------------------

# Part 1

Start the Ability ftp server.
Open OllyDbg and attach the executable.
File > Attach > select Ability Server in the second column > Attach
Press Play to allow the application to continue to run.
Look in the bottom right corner and noticed how it has changed from a Paused to Running state.
Run the exploit.
The debugger catches the crash and halts the program execution, showing the exact state of the CPU registers at the time of the crash. In the top right window, notice the EIP register is completely overwritten by our buffer. Because the EIP controls the execution flow of the program, you can now hijack the application flow and redirect the application to continue executing whatever you want. What usually happens is that the attacker introduces his own shellcode, usually inside the buffer. After execution flow is gained, it's redirected to the attacker's shellcode.
Notice in the top right window that the EIP is completely overwritten with 41414141 or 4 As.
The ESP register holds the rest of the malicious buffer.
Right click on ESP > Follow in Dump
The bottom left window shows the contents of where the ESP register is pointing to.
Notice the address in the ESP is the same address in the memory dump.
Quit OllyDbg.

# Part 2

Now we need to find out the exact 4 bytes used to overwrite the EIP.
Create a random string that is 2000 bytes long.
cd /opt/metasploit/msf3/tools/
./pattern_create.rb 2000
Copy the string and replace the buffer that contains 2000 As.
Start the Ability ftp server.
Open OllyDbg, attach the executable and press Play.
Run the exploit.
This time the 4 bytes used to overwrite the EIP are 67423267

Use pattern_offset.py to identify the location of the 4 bytes in the 2000 byte string.
./pattern_offset.rb 67423267 2000

967

The EIP has been overwritten by the buffer from the 967th character to the 971st character.

Now try to find the location of memory that the ESP register is pointed to, and identify its position in the 2000 byte buffer.
Notice the ESP points to an address, which contains part of our unique string.
Try to identify the location of this unique string in the buffer.
Use the first 4 bytes in the ESP
./pattern_offset.rb Bg9B

987

# Part 3

Convert to Hex
A = \x41
B = \x42
C = \x43
D = \x44
NOP = \x90   A no operation instruction. It simply means, continue to the next instruction.

New buffer:  A * 967 + B * 4 + C * 16 + D * 1013
967 + 4 = 971
987 - 971 = 16
2000 - 987 = 1013

Shortcut: OllyDbg > Restart > Yes > Play
Run the exploit.
The EIP has been overwritten with all Bs (42424242).
Right click on ESP > Follow in Dump
The ESP has been overwritten with just Ds.

# Part 4

In the lower left window, copy the beginning address of the ESP (00C3B6B8).
Scroll down until you see an error. Copy the address of the line before the error (00C3BA98).
Subtract the first hex number from the second to find out how much space is available for our shell code.
00C3BA98 - 00C3B6B8 = 0x3E0
Now convert that to decimal (992).

# Part 5

NULL bytes are not good. Can't be sent over the network because they will terminate our buffer. The buffer must be encoded with msfencode. Every time that you encode the buffer, its size will increase.
------------------------------------------------------------------------------------------------------

# Example

Disable virtual address space randomization (ASLR)
echo 0 > /proc/sys/kernel/randomize_va_space

Create a vulnerable program using strcpy.  This function is dangerous because it does not limit the amount of bytes copied.
This creates the potential for a buffer overflow.

#include <cstring>
int main(int argc, char **argv)
{
char buffer[500];
strcpy(buffer, argv[1]);
return 0;
}

Compile with stack smashing protection disabled.
g++ vuln.c -fno-stack-protector -mpreferred-stack-boundary=2 -o vuln

./vuln test
./vuln `python -c 'print "\x41" * 100'`
./vuln `python -c 'print "\x41" * 500'`
./vuln `python -c 'print "\x41" * 1000'` # Segmentation fault

apt-get install gdb
gdb -q vuln
run `python -c 'print "\x41" * 1000'`

info registers show all registers
s step
c continue past a break point
quit

Open a new tab.
cd /opt/metasploit/msf3/tools
./pattern_create.rb 1000
Copy this random string.

Tab 1
run <random string>
y
Copy the memory address of the crash excluding the first 2 characters (0x).

Tab 2
./pattern_offset.rb <memory address>
504

Tab 1
disassemble main
Set a breakpoint for the line after the strcpy function.
break *0x080484e7
run `python -c 'print "\x41" * 504 + "\x42" * 4'`
y
x/16wx $esp # not sure what this does
info registers







###########################################################################################################
## ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ##
## ================================= End Buffer Overflows Tutorial ===================================== ##
## ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ♦ ##
###########################################################################################################









HEX=`address6 $2 | head -n 2 | tail -n 1 | sed 's/.*:://'`


TARGET="2002:$HEX::$HEX"

echo thcping6 $1 $TARGET
thcping6 $1 $TARGET




thcping6 eth0 2003::1 ipv6.google.com
alive6 -I 2003::1 eth0 ipv6.google.com
trace6 -s 2003::1 eth0 ipv6.google.com



## it is easier to just configure that as you only global
## IPv6 addresses so that everything works, e.g.
ip -6 addr add 2003::1/64 dev eth0




## run to answer these keep-alive packets called inject_alive. 

inject_alive eth0

## Creates a GraphViz .gv file from the file containing alive IPv6 addresses.
## Several files will be created in the same directory as the input file

## Ping scanning list ...
alive6 -p -i "$2" $1 | grep Alive: | grep echo-reply | awk '{print$2}' > "$2".pingable


## Extracting one target from every network ...
for i in `extract_networks6.sh "$2".pingable | sort -u | sed 's/:$//'`; do
  grep "^$i" "$2".pingable | head -n 1
done > "$2".traceable

## Tracerouting targets ...
for i in `cat "$2".traceable`; do
  trace6 $1 $i > $i.trace
  trace62list.sh $i.trace > $i.list
done






function get_api_token {

  echo -e "${INFO} Getting API token"

  # shellcheck disable=SC2086
  api_token=$(curl -s -H "Content-Type: application/json" \
        -d '{"username":"'${username}'", "password":"'${password}'"}' \
        -X POST "http://${beef_ip}:${beef_port}/api/admin/login" \
        | awk -F '"' '{print $6}')
        # HTTP hack

  if [ -z "${api_token}" ]; then

    echo "${FATAL} Failed to get API token"
    echo "${INFO} Check BeEF is running"
    echo "${INFO} Check BeEF username/password"
    echo "${INFO} Check BeEF ip and port are correct"
    return 1
  else 
    echo -e "${PASS} Successfully got API token"
    return 0
  fi
}